
/*
    
    ######## BEFORE UPDATING DATA-HANDLING CODE OR USING THE COALESCE OPERATOR: ######## ~michael
    don't use the pipe-pipe "||" coalesce operator when handling data because if a zero comes to the coalesce (and it is a number 0 and not a string "0") it will be evaluated as false and thus coalesce to the next operand. Whenever you use this operator: be careful of what will be evaluated.
    
    To see this in action run this in your console:
    
    console.log( true      || 'test' );  // logs:  true  (expected)
    console.log( false     || 'test' );  // logs: 'test' (expected)

    console.log( null      || 'test' );  // logs: 'test' (expected)
    console.log( undefined || 'test' );  // logs: 'test' (expected)

    console.log( '1'       || 'test' );  // logs: '1'    (expected)
    console.log(  1        || 'test' );  // logs:  1     (expected)
    console.log( '0'       || 'test' );  // logs: '0'    (expected)
    console.log(  0        || 'test' );  // logs: 'test' (OH NO!!)
    
    here is another demonstration:
    
    console.log( Boolean(true)      );
    console.log( Boolean(false)     );
    console.log( Boolean(null)      );
    console.log( Boolean(undefined) );
    console.log( Boolean('1')       );
    console.log( Boolean( 1)        );
    console.log( Boolean('0')       );
    console.log( Boolean( 0)        ); // zero evaluates to false
    
    
    ######## BEFORE UPDATING FASTCLICK: ######## ~michael
    fastclick (around line 254) has some code added (by michael) to add a feature to fastclick, bring this code to any new version
    
    it also has (around line 123) some code added to an if statement added by joseph:
        if (deviceIsAndroid || deviceIsIOS) {
    as opposed to:
        if (deviceIsAndroid) {
    
    
    ######## BEFORE UPDATING X-TAGS: ######## ~michael
    make sure you include the polyfills and make sure that there isn't still a duplicated block of code in the source, if there is remove it, here is how to find out:
    
    do a find in textedit for: "scope.upgradeDocumentTree = nop;" (excluding the quotes of course)
    AND var IMPORT_LINK_TYPE = scope.IMPORT_LINK_TYPE
    
    remove the whole block of code surrounding the second match (it might be the first match but I think it is the second match)
    
    
    ######## ELEMENT REGISTRATION: ######## ~michael
    When registering a custom element:
        1) register it after the "DOMContentLoaded" event has fired. Doing this prevents an issue that we ran into where in some cases (I believe when greyspots.js is cached and you are on yosemite is one case) some elements would be cut off and would disappear.
        2) Use the "methods" for public functions only, private functions should be kept in the "DOMContentLoaded" function. By keeping the functions in there it makes it so that the code for that element is the only code that can run those functions and it prevents these functions for cluttering public namespaces.
        3) Use "'use strict';" from the beginning. If you don't start out with it you might introduce strict mode errors that you don't even know about. Then one day you might decide to put "'use strict';" in there and errors you didn't know about will appear. Some errors might appear when you first move it over and some errors might be disvovered by your users because you didn't test every little feature of the element.
    
    An example:
    
    document.addEventListener('DOMContentLoaded', function () {
        'use strict';
        
        // ### private functions go here ###
        function foobar() {
            // do stuff to "element" here (gs-new-element is the only element that can run this function)
        }
        
        xtag.register('gs-new-element', {
            lifecycle: {
                'created': function () {
                    
                }
            },
            events: {},
            accessors: {},
            methods: {
                // ### public functions go here ###
            }
        });
    });
    
    ######## PSEUDO ELEMENT WARNING: ######## ~michael
    In firefox I ran into an issue where the undo history of controls in a gs-form (with the attribute "save-while-typing") was being erased. Turns out the issue was caused by a CSS pseudo-element. I was using a pseudo-element for a little box attached to the form to tell the user if the form was waiting to save or saving. By changing the pseudo-element to a real element that I add and remove with Javascript the issue was fixed.
    
    If you want to use a pseudo-element: make sure it doesn't affect the undo history of elements that are children of the element that the pseudo-element is attached to. This issue could have been fixed by now.
    
    
    
    ######## TEMPLATE SHIM: ######## ~michael
    The template polyfill has been changed, DO NOT UPDATE. It is for old browsers, and old browsers don't change so there is should be no need for the polyfill to change.
    
    
    
    
*/ /**
 * @license
 * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
 */
if(typeof HTMLTemplateElement==='undefined'){(function(){var TEMPLATE_TAG='template';var contentDoc=document.implementation.createHTMLDocument('template');/**
      Provides a minimal shim for the <template> element.
    */
HTMLTemplateElement=function(){};HTMLTemplateElement.prototype=Object.create(HTMLElement.prototype);/**
      The `decorate` method moves element children to the template's `content`.
      NOTE: there is no support for dynamically adding elements to templates.
    */
HTMLTemplateElement.decorate=function(template){if(!template.content){template.content=template.ownerDocument.createDocumentFragment();}
var child;while(child=template.firstChild){template.content.appendChild(child);}
Object.defineProperty(template,'innerHTML',{get:function(){var o='',fragment=this.content.cloneNode(true);for(var e=fragment.firstChild;e;e=e.nextSibling){o+=e.outerHTML||escapeData(e.data);}
return o;},set:function(text){contentDoc.body.innerHTML=text;while(this.content.firstChild){this.content.removeChild(this.content.firstChild);}
while(contentDoc.body.firstChild){this.content.appendChild(contentDoc.body.firstChild);}},configurable:true});Object.defineProperty(template,'outerHTML',{get:function(){var openTagText,arrAttr,i,len,innerHTML=this.innerHTML;arrAttr=this.attributes;for(i=0,len=arrAttr.length,openTagText='<template';i<len;i+=1){openTagText+=' '+arrAttr[i].nodeName+'="'+encodeHTML(arrAttr[i].value)+'"';}
return openTagText+'>'+innerHTML+'</template>';},configurable:true});};/**
      The `bootstrap` method is called automatically and "fixes" all
      <template> elements in the document referenced by the `doc` argument.
    */
HTMLTemplateElement.bootstrap=function(doc){var templates=doc.querySelectorAll(TEMPLATE_TAG),i,l,t;for(i=0,l=templates.length,t;(i<l)&&(t=templates[i]);i+=1){if(!GS.findParentTag(t,'template')&&GS.findParentTag(t,'html')){HTMLTemplateElement.decorate(t);}}};window.addEventListener('DOMContentLoaded',function(){HTMLTemplateElement.bootstrap(document);});var createElement=document.createElement;document.createElement=function(){'use strict';var el=createElement.apply(document,arguments);if(el.localName=='template'){HTMLTemplateElement.decorate(el);}
return el;};var escapeDataRegExp=/[&\u00A0<>]/g;function escapeReplace(c){switch(c){case'&':return'&amp;';case'<':return'&lt;';case'>':return'&gt;';case'\u00A0':return'&nbsp;';}}
function escapeData(s){return s.replace(escapeDataRegExp,escapeReplace);}})();}
/* http://x-tags.org/download?byob=,x-tag-core,x-tag-pseudo-outer,WeakMap,MutationObserver,domtokenlist-polyfill,customelements-polyfill */
window.Platform={};var logFlags={};(function(){if(typeof window.Element==="undefined"||"classList"in document.documentElement)return;var prototype=Array.prototype,indexOf=prototype.indexOf,slice=prototype.slice,push=prototype.push,splice=prototype.splice,join=prototype.join;function DOMTokenList(el){this._element=el;if(el.className!=this._classCache){this._classCache=el.className;if(!this._classCache)return;var classes=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/),i;for(i=0;i<classes.length;i++){push.call(this,classes[i]);}}}
function setToClassName(el,classes){el.className=classes.join(" ");}
DOMTokenList.prototype={add:function(token){if(this.contains(token))return;push.call(this,token);setToClassName(this._element,slice.call(this,0));},contains:function(token){return indexOf.call(this,token)!==-1;},item:function(index){return this[index]||null;},remove:function(token){var i=indexOf.call(this,token);if(i===-1){return;}
splice.call(this,i,1);setToClassName(this._element,slice.call(this,0));},toString:function(){return join.call(this," ");},toggle:function(token){if(indexOf.call(this,token)===-1){this.add(token);}else{this.remove(token);}}};window.DOMTokenList=DOMTokenList;function defineElementGetter(obj,prop,getter){if(Object.defineProperty){Object.defineProperty(obj,prop,{get:getter});}else{obj.__defineGetter__(prop,getter);}}
defineElementGetter(Element.prototype,"classList",function(){return new DOMTokenList(this);});})();if(typeof WeakMap==="undefined"){(function(){var defineProperty=Object.defineProperty;var counter=Date.now()%1e9;var WeakMap=function(){this.name="__st"+(Math.random()*1e9>>>0)+(counter++ +"__");};WeakMap.prototype={set:function(key,value){var entry=key[this.name];if(entry&&entry[0]===key)entry[1]=value;else defineProperty(key,this.name,{value:[key,value],writable:true});},get:function(key){var entry;return(entry=key[this.name])&&entry[0]===key?entry[1]:undefined;},"delete":function(key){this.set(key,undefined);}};window.WeakMap=WeakMap;})();}
(function(global){var registrationsTable=new WeakMap();var setImmediate=window.msSetImmediate;if(!setImmediate){var setImmediateQueue=[];var sentinel=String(Math.random());window.addEventListener("message",function(e){if(e.data===sentinel){var queue=setImmediateQueue;setImmediateQueue=[];queue.forEach(function(func){func();});}});setImmediate=function(func){setImmediateQueue.push(func);window.postMessage(sentinel,"*");};}
var isScheduled=false;var scheduledObservers=[];function scheduleCallback(observer){scheduledObservers.push(observer);if(!isScheduled){isScheduled=true;setImmediate(dispatchCallbacks);}}
function wrapIfNeeded(node){return node;}
function dispatchCallbacks(){isScheduled=false;var observers=scheduledObservers;scheduledObservers=[];observers.sort(function(o1,o2){return o1.uid_-o2.uid_;});var anyNonEmpty=false;observers.forEach(function(observer){var queue=observer.takeRecords();removeTransientObserversFor(observer);if(queue.length){observer.callback_(queue,observer);anyNonEmpty=true;}});if(anyNonEmpty)dispatchCallbacks();}
function removeTransientObserversFor(observer){observer.nodes_.forEach(function(node){var registrations=registrationsTable.get(node);if(!registrations)return;registrations.forEach(function(registration){if(registration.observer===observer)registration.removeTransientObservers();});});}
function forEachAncestorAndObserverEnqueueRecord(target,callback){for(var node=target;node;node=node.parentNode){var registrations=registrationsTable.get(node);if(registrations){for(var j=0;j<registrations.length;j++){var registration=registrations[j];var options=registration.options;if(node!==target&&!options.subtree)continue;var record=callback(options);if(record)registration.enqueue(record);}}}}
var uidCounter=0;function JsMutationObserver(callback){this.callback_=callback;this.nodes_=[];this.records_=[];this.uid_=++uidCounter;}
JsMutationObserver.prototype={observe:function(target,options){target=wrapIfNeeded(target);if(!options.childList&&!options.attributes&&!options.characterData||options.attributeOldValue&&!options.attributes||options.attributeFilter&&options.attributeFilter.length&&!options.attributes||options.characterDataOldValue&&!options.characterData){throw new SyntaxError();}
var registrations=registrationsTable.get(target);if(!registrations)registrationsTable.set(target,registrations=[]);var registration;for(var i=0;i<registrations.length;i++){if(registrations[i].observer===this){registration=registrations[i];registration.removeListeners();registration.options=options;break;}}
if(!registration){registration=new Registration(this,target,options);registrations.push(registration);this.nodes_.push(target);}
registration.addListeners();},disconnect:function(){this.nodes_.forEach(function(node){var registrations=registrationsTable.get(node);for(var i=0;i<registrations.length;i++){var registration=registrations[i];if(registration.observer===this){registration.removeListeners();registrations.splice(i,1);break;}}},this);this.records_=[];},takeRecords:function(){var copyOfRecords=this.records_;this.records_=[];return copyOfRecords;}};function MutationRecord(type,target){this.type=type;this.target=target;this.addedNodes=[];this.removedNodes=[];this.previousSibling=null;this.nextSibling=null;this.attributeName=null;this.attributeNamespace=null;this.oldValue=null;}
function copyMutationRecord(original){var record=new MutationRecord(original.type,original.target);record.addedNodes=original.addedNodes.slice();record.removedNodes=original.removedNodes.slice();record.previousSibling=original.previousSibling;record.nextSibling=original.nextSibling;record.attributeName=original.attributeName;record.attributeNamespace=original.attributeNamespace;record.oldValue=original.oldValue;return record;}
var currentRecord,recordWithOldValue;function getRecord(type,target){return currentRecord=new MutationRecord(type,target);}
function getRecordWithOldValue(oldValue){if(recordWithOldValue)return recordWithOldValue;recordWithOldValue=copyMutationRecord(currentRecord);recordWithOldValue.oldValue=oldValue;return recordWithOldValue;}
function clearRecords(){currentRecord=recordWithOldValue=undefined;}
function recordRepresentsCurrentMutation(record){return record===recordWithOldValue||record===currentRecord;}
function selectRecord(lastRecord,newRecord){if(lastRecord===newRecord)return lastRecord;if(recordWithOldValue&&recordRepresentsCurrentMutation(lastRecord))return recordWithOldValue;return null;}
function Registration(observer,target,options){this.observer=observer;this.target=target;this.options=options;this.transientObservedNodes=[];}
Registration.prototype={enqueue:function(record){var records=this.observer.records_;var length=records.length;if(records.length>0){var lastRecord=records[length-1];var recordToReplaceLast=selectRecord(lastRecord,record);if(recordToReplaceLast){records[length-1]=recordToReplaceLast;return;}}else{scheduleCallback(this.observer);}
records[length]=record;},addListeners:function(){this.addListeners_(this.target);},addListeners_:function(node){var options=this.options;if(options.attributes)node.addEventListener("DOMAttrModified",this,true);if(options.characterData)node.addEventListener("DOMCharacterDataModified",this,true);if(options.childList)node.addEventListener("DOMNodeInserted",this,true);if(options.childList||options.subtree)node.addEventListener("DOMNodeRemoved",this,true);},removeListeners:function(){this.removeListeners_(this.target);},removeListeners_:function(node){var options=this.options;if(options.attributes)node.removeEventListener("DOMAttrModified",this,true);if(options.characterData)node.removeEventListener("DOMCharacterDataModified",this,true);if(options.childList)node.removeEventListener("DOMNodeInserted",this,true);if(options.childList||options.subtree)node.removeEventListener("DOMNodeRemoved",this,true);},addTransientObserver:function(node){if(node===this.target)return;this.addListeners_(node);this.transientObservedNodes.push(node);var registrations=registrationsTable.get(node);if(!registrations)registrationsTable.set(node,registrations=[]);registrations.push(this);},removeTransientObservers:function(){var transientObservedNodes=this.transientObservedNodes;this.transientObservedNodes=[];transientObservedNodes.forEach(function(node){this.removeListeners_(node);var registrations=registrationsTable.get(node);for(var i=0;i<registrations.length;i++){if(registrations[i]===this){registrations.splice(i,1);break;}}},this);},handleEvent:function(e){e.stopImmediatePropagation();switch(e.type){case"DOMAttrModified":var name=e.attrName;var namespace=e.relatedNode.namespaceURI;var target=e.target;var record=new getRecord("attributes",target);record.attributeName=name;record.attributeNamespace=namespace;var oldValue=e.attrChange===MutationEvent.ADDITION?null:e.prevValue;forEachAncestorAndObserverEnqueueRecord(target,function(options){if(!options.attributes)return;if(options.attributeFilter&&options.attributeFilter.length&&options.attributeFilter.indexOf(name)===-1&&options.attributeFilter.indexOf(namespace)===-1){return;}
if(options.attributeOldValue)return getRecordWithOldValue(oldValue);return record;});break;case"DOMCharacterDataModified":var target=e.target;var record=getRecord("characterData",target);var oldValue=e.prevValue;forEachAncestorAndObserverEnqueueRecord(target,function(options){if(!options.characterData)return;if(options.characterDataOldValue)return getRecordWithOldValue(oldValue);return record;});break;case"DOMNodeRemoved":this.addTransientObserver(e.target);case"DOMNodeInserted":var target=e.relatedNode;var changedNode=e.target;var addedNodes,removedNodes;if(e.type==="DOMNodeInserted"){addedNodes=[changedNode];removedNodes=[];}else{addedNodes=[];removedNodes=[changedNode];}
var previousSibling=changedNode.previousSibling;var nextSibling=changedNode.nextSibling;var record=getRecord("childList",target);record.addedNodes=addedNodes;record.removedNodes=removedNodes;record.previousSibling=previousSibling;record.nextSibling=nextSibling;forEachAncestorAndObserverEnqueueRecord(target,function(options){if(!options.childList)return;return record;});}
clearRecords();}};global.JsMutationObserver=JsMutationObserver;if(!global.MutationObserver)global.MutationObserver=JsMutationObserver;})(this);(function(scope){if(!scope){scope=window.CustomElements={flags:{}};}
var flags=scope.flags;var hasNative=Boolean(document.registerElement);var useNative=!flags.register&&hasNative;if(useNative){var nop=function(){};scope.registry={};scope.upgradeElement=nop;scope.watchShadow=nop;scope.upgrade=nop;scope.upgradeAll=nop;scope.upgradeSubtree=nop;scope.observeDocument=nop;scope.upgradeDocument=nop;scope.upgradeDocumentTree=nop;scope.takeRecords=nop;scope.reservedTagList=[];}else{function register(name,options){var definition=options||{};if(!name){throw new Error("document.registerElement: first argument `name` must not be empty");}
if(name.indexOf("-")<0){throw new Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+String(name)+"'.");}
if(isReservedTag(name)){throw new Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(name)+"'. The type name is invalid.");}
if(getRegisteredDefinition(name)){throw new Error("DuplicateDefinitionError: a type with name '"+String(name)+"' is already registered");}
if(!definition.prototype){throw new Error("Options missing required prototype property");}
definition.__name=name.toLowerCase();definition.lifecycle=definition.lifecycle||{};definition.ancestry=ancestry(definition.extends);resolveTagName(definition);resolvePrototypeChain(definition);overrideAttributeApi(definition.prototype);registerDefinition(definition.__name,definition);definition.ctor=generateConstructor(definition);definition.ctor.prototype=definition.prototype;definition.prototype.constructor=definition.ctor;if(scope.ready){scope.upgradeDocumentTree(document);}
return definition.ctor;}
function isReservedTag(name){for(var i=0;i<reservedTagList.length;i++){if(name===reservedTagList[i]){return true;}}}
var reservedTagList=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];function ancestry(extnds){var extendee=getRegisteredDefinition(extnds);if(extendee){return ancestry(extendee.extends).concat([extendee]);}
return[];}
function resolveTagName(definition){var baseTag=definition.extends;for(var i=0,a;a=definition.ancestry[i];i++){baseTag=a.is&&a.tag;}
definition.tag=baseTag||definition.__name;if(baseTag){definition.is=definition.__name;}}
function resolvePrototypeChain(definition){if(!Object.__proto__){var nativePrototype=HTMLElement.prototype;if(definition.is){var inst=document.createElement(definition.tag);var expectedPrototype=Object.getPrototypeOf(inst);if(expectedPrototype===definition.prototype){nativePrototype=expectedPrototype;}}
var proto=definition.prototype,ancestor;while(proto&&proto!==nativePrototype){ancestor=Object.getPrototypeOf(proto);proto.__proto__=ancestor;proto=ancestor;}
definition.native=nativePrototype;}}
function instantiate(definition){return upgrade(domCreateElement(definition.tag),definition);}
function upgrade(element,definition){if(definition.is){element.setAttribute("is",definition.is);}
implement(element,definition);element.__upgraded__=true;created(element);scope.insertedNode(element);scope.upgradeSubtree(element);return element;}
function implement(element,definition){if(Object.__proto__){element.__proto__=definition.prototype;}else{customMixin(element,definition.prototype,definition.native);element.__proto__=definition.prototype;}}
function customMixin(inTarget,inSrc,inNative){var used={};var p=inSrc;while(p!==inNative&&p!==HTMLElement.prototype){var keys=Object.getOwnPropertyNames(p);for(var i=0,k;k=keys[i];i++){if(!used[k]){Object.defineProperty(inTarget,k,Object.getOwnPropertyDescriptor(p,k));used[k]=1;}}
p=Object.getPrototypeOf(p);}}
function created(element){if(element.createdCallback){element.createdCallback();}}
function overrideAttributeApi(prototype){if(prototype.setAttribute._polyfilled){return;}
var setAttribute=prototype.setAttribute;prototype.setAttribute=function(name,value){changeAttribute.call(this,name,value,setAttribute);};var removeAttribute=prototype.removeAttribute;prototype.removeAttribute=function(name){changeAttribute.call(this,name,null,removeAttribute);};prototype.setAttribute._polyfilled=true;}
function changeAttribute(name,value,operation){name=name.toLowerCase();var oldValue=this.getAttribute(name);operation.apply(this,arguments);var newValue=this.getAttribute(name);if(this.attributeChangedCallback&&newValue!==oldValue){this.attributeChangedCallback(name,oldValue,newValue);}}
var registry={};function getRegisteredDefinition(name){if(name){return registry[name.toLowerCase()];}}
function registerDefinition(name,definition){registry[name]=definition;}
function generateConstructor(definition){return function(){return instantiate(definition);};}
var HTML_NAMESPACE="http://www.w3.org/1999/xhtml";function createElementNS(namespace,tag,typeExtension){if(namespace===HTML_NAMESPACE){return createElement(tag,typeExtension);}else{return domCreateElementNS(namespace,tag);}}
function createElement(tag,typeExtension){var definition=getRegisteredDefinition(typeExtension||tag);if(definition){if(tag==definition.tag&&typeExtension==definition.is){return new definition.ctor();}
if(!typeExtension&&!definition.is){return new definition.ctor();}}
if(typeExtension){var element=createElement(tag);element.setAttribute("is",typeExtension);return element;}
var element=domCreateElement(tag);if(tag.indexOf("-")>=0){implement(element,HTMLElement);}
return element;}
function upgradeElement(element){if(!element.__upgraded__&&element.nodeType===Node.ELEMENT_NODE){var is=element.getAttribute("is");var definition=getRegisteredDefinition(is||element.localName);if(definition){if(is&&definition.tag==element.localName){return upgrade(element,definition);}else if(!is&&!definition.extends){return upgrade(element,definition);}}}}
function cloneNode(deep){var n=domCloneNode.call(this,deep);scope.upgradeAll(n);return n;}
var domCreateElement=document.createElement.bind(document);var domCreateElementNS=document.createElementNS.bind(document);var domCloneNode=Node.prototype.cloneNode;document.registerElement=register;document.createElement=createElement;document.createElementNS=createElementNS;Node.prototype.cloneNode=cloneNode;scope.registry=registry;scope.upgrade=upgradeElement;}
var isInstance;if(!Object.__proto__&&!useNative){isInstance=function(obj,ctor){var p=obj;while(p){if(p===ctor.prototype){return true;}
p=p.__proto__;}
return false;};}else{isInstance=function(obj,base){return obj instanceof base;};}
scope.instanceof=isInstance;scope.reservedTagList=reservedTagList;document.register=document.registerElement;scope.hasNative=hasNative;scope.useNative=useNative;})(window.CustomElements);(function(scope){var IMPORT_LINK_TYPE=scope.IMPORT_LINK_TYPE;var parser={selectors:["link[rel="+IMPORT_LINK_TYPE+"]"],map:{link:"parseLink"},parse:function(inDocument){if(!inDocument.__parsed){inDocument.__parsed=true;var elts=inDocument.querySelectorAll(parser.selectors);forEach(elts,function(e){parser[parser.map[e.localName]](e);});CustomElements.upgradeDocument(inDocument);CustomElements.observeDocument(inDocument);}},parseLink:function(linkElt){if(isDocumentLink(linkElt)){this.parseImport(linkElt);}},parseImport:function(linkElt){if(linkElt.import){parser.parse(linkElt.import);}}};function isDocumentLink(inElt){return inElt.localName==="link"&&inElt.getAttribute("rel")===IMPORT_LINK_TYPE;}
var forEach=Array.prototype.forEach.call.bind(Array.prototype.forEach);scope.parser=parser;scope.IMPORT_LINK_TYPE=IMPORT_LINK_TYPE;})(window.CustomElements);(function(scope){function bootstrap(){CustomElements.parser.parse(document);CustomElements.upgradeDocument(document);if(window.HTMLImports){HTMLImports.__importsParsingHook=function(elt){CustomElements.parser.parse(elt.import);};}
CustomElements.ready=true;setTimeout(function(){CustomElements.readyTime=Date.now();if(window.HTMLImports){CustomElements.elapsed=CustomElements.readyTime-HTMLImports.readyTime;}
document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:true}));});}
if(typeof window.CustomEvent!=="function"){window.CustomEvent=function(inType,params){params=params||{};var e=document.createEvent("CustomEvent");e.initCustomEvent(inType,Boolean(params.bubbles),Boolean(params.cancelable),params.detail);return e;};window.CustomEvent.prototype=window.Event.prototype;}
if(document.readyState==="complete"||scope.flags.eager){bootstrap();}else if(document.readyState==="interactive"&&!window.attachEvent&&(!window.HTMLImports||window.HTMLImports.ready)){bootstrap();}else{var loadEvent=window.HTMLImports&&!HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(loadEvent,bootstrap);}})(window.CustomElements);(function(){var win=window,doc=document,container=doc.createElement("div"),noop=function(){},trueop=function(){return true;},regexPseudoSplit=/([\w-]+(?:\([^\)]+\))?)/g,regexPseudoReplace=/(\w*)(?:\(([^\)]*)\))?/,regexDigits=/(\d+)/g,keypseudo={action:function(pseudo,event){return pseudo.value.match(regexDigits).indexOf(String(event.keyCode))>-1==(pseudo.name=="keypass")||null;}},prefix=function(){var styles=win.getComputedStyle(doc.documentElement,""),pre=(Array.prototype.slice.call(styles).join("").match(/-(moz|webkit|ms)-/)||styles.OLink===""&&["","o"])[1];return{dom:pre=="ms"?"MS":pre,lowercase:pre,css:"-"+pre+"-",js:pre=="ms"?pre:pre[0].toUpperCase()+pre.substr(1)};}(),matchSelector=Element.prototype.matchesSelector||Element.prototype[prefix.lowercase+"MatchesSelector"],mutation=win.MutationObserver||win[prefix.js+"MutationObserver"];var typeCache={},typeString=typeCache.toString,typeRegexp=/\s([a-zA-Z]+)/;function typeOf(obj){var type=typeString.call(obj);return typeCache[type]||(typeCache[type]=type.match(typeRegexp)[1].toLowerCase());}
function clone(item,type){var fn=clone[type||typeOf(item)];return fn?fn(item):item;}
clone.object=function(src){var obj={};for(var key in src)obj[key]=clone(src[key]);return obj;};clone.array=function(src){var i=src.length,array=new Array(i);while(i--)array[i]=clone(src[i]);return array;};var unsliceable=["undefined","null","number","boolean","string","function"];function toArray(obj){return unsliceable.indexOf(typeOf(obj))==-1?Array.prototype.slice.call(obj,0):[obj];}
var str="";function query(element,selector){if(!element||!selector){console.trace(element,selector);}
return(selector||str).length?toArray(element.querySelectorAll(selector)):[];}
function parseMutations(element,mutations){var diff={added:[],removed:[]};mutations.forEach(function(record){record._mutation=true;for(var z in diff){var type=element._records[z=="added"?"inserted":"removed"],nodes=record[z+"Nodes"],length=nodes.length;for(var i=0;i<length&&diff[z].indexOf(nodes[i])==-1;i++){diff[z].push(nodes[i]);type.forEach(function(fn){fn(nodes[i],record);});}}});}
function mergeOne(source,key,current){var type=typeOf(current);if(type=="object"&&typeOf(source[key])=="object")xtag.merge(source[key],current);else source[key]=clone(current,type);return source;}
function wrapMixin(tag,key,pseudo,value,original){var fn=original[key];if(!(key in original)){original[key+(pseudo.match(":mixins")?"":":mixins")]=value;}else if(typeof original[key]=="function"){if(!fn.__mixins__)fn.__mixins__=[];fn.__mixins__.push(xtag.applyPseudos(pseudo,value,tag.pseudos));}}
var uniqueMixinCount=0;function mergeMixin(tag,mixin,original,mix){if(mix){var uniques={};for(var z in original)uniques[z.split(":")[0]]=z;for(z in mixin){wrapMixin(tag,uniques[z.split(":")[0]]||z,z,mixin[z],original);}}else{for(var zz in mixin){original[zz+":__mixin__("+uniqueMixinCount++ +")"]=xtag.applyPseudos(zz,mixin[zz],tag.pseudos);}}}
function applyMixins(tag){tag.mixins.forEach(function(name){var mixin=xtag.mixins[name];for(var type in mixin){var item=mixin[type],original=tag[type];if(!original)tag[type]=item;else{switch(type){case"accessors":case"prototype":for(var z in item){if(!original[z])original[z]=item[z];else mergeMixin(tag,item[z],original[z],true);}
break;default:mergeMixin(tag,item,original,type!="events");}}}});return tag;}
function delegateAction(pseudo,event){var match,target=event.target;if(!target.tagName)return null;if(xtag.matchSelector(target,pseudo.value))match=target;else if(xtag.matchSelector(target,pseudo.value+" *")){var parent=target.parentNode;while(!match){if(xtag.matchSelector(parent,pseudo.value))match=parent;parent=parent.parentNode;}}
return match?pseudo.listener=pseudo.listener.bind(match):null;}
function touchFilter(event){if(event.type.match("touch")){event.target.__touched__=true;}else if(event.target.__touched__&&event.type.match("mouse")){delete event.target.__touched__;return;}
return true;}
function createFlowEvent(type){var flow=type=="over";return{attach:"OverflowEvent"in win?"overflowchanged":[],condition:function(event,custom){event.flow=type;return event.type==type+"flow"||event.orient===0&&event.horizontalOverflow==flow||event.orient==1&&event.verticalOverflow==flow||event.orient==2&&event.horizontalOverflow==flow&&event.verticalOverflow==flow;}};}
function writeProperty(key,event,base,desc){if(desc)event[key]=base[key];else Object.defineProperty(event,key,{writable:true,enumerable:true,value:base[key]});}
var skipProps={};for(var z in doc.createEvent("CustomEvent"))skipProps[z]=1;function inheritEvent(event,base){var desc=Object.getOwnPropertyDescriptor(event,"target");for(var z in base){if(!skipProps[z])writeProperty(z,event,base,desc);}
event.baseEvent=base;}
function getArgs(attr,value){return{value:attr.boolean?"":value,method:attr.boolean&&!value?"removeAttribute":"setAttribute"};}
function modAttr(element,attr,name,value){var args=getArgs(attr,value);element[args.method](name,args.value);}
function syncAttr(element,attr,name,value,method){var nodes=attr.property?[element.xtag[attr.property]]:attr.selector?xtag.query(element,attr.selector):[],index=nodes.length;while(index--)nodes[index][method](name,value);}
function updateView(element,name,value){if(element.__view__){element.__view__.updateBindingValue(element,name,value);}}
function attachProperties(tag,prop,z,accessor,attr,name){var key=z.split(":"),type=key[0];if(type=="get"){key[0]=prop;tag.prototype[prop].get=xtag.applyPseudos(key.join(":"),accessor[z],tag.pseudos,accessor[z]);}else if(type=="set"){key[0]=prop;var setter=tag.prototype[prop].set=xtag.applyPseudos(key.join(":"),attr?function(value){this.xtag._skipSet=true;if(!this.xtag._skipAttr)modAttr(this,attr,name,value);if(this.xtag._skipAttr&&attr.skip)delete this.xtag._skipAttr;accessor[z].call(this,attr.boolean?!!value:value);updateView(this,name,value);delete this.xtag._skipSet;}:accessor[z]?function(value){accessor[z].call(this,value);updateView(this,name,value);}:null,tag.pseudos,accessor[z]);if(attr)attr.setter=setter;}else tag.prototype[prop][z]=accessor[z];}
function parseAccessor(tag,prop){tag.prototype[prop]={};var accessor=tag.accessors[prop],attr=accessor.attribute,name=attr&&attr.name?attr.name.toLowerCase():prop;if(attr){attr.key=prop;tag.attributes[name]=attr;}
for(var z in accessor)attachProperties(tag,prop,z,accessor,attr,name);if(attr){if(!tag.prototype[prop].get){var method=(attr.boolean?"has":"get")+"Attribute";tag.prototype[prop].get=function(){return this[method](name);};}
if(!tag.prototype[prop].set)tag.prototype[prop].set=function(value){modAttr(this,attr,name,value);updateView(this,name,value);};}}
var unwrapComment=/\/\*!?(?:\@preserve)?[ \t]*(?:\r\n|\n)([\s\S]*?)(?:\r\n|\n)\s*\*\//;function parseMultiline(fn){return unwrapComment.exec(fn.toString())[1];}
var readyTags={};function fireReady(name){readyTags[name]=(readyTags[name]||[]).filter(function(obj){return(obj.tags=obj.tags.filter(function(z){return z!=name&&!xtag.tags[z];})).length||obj.fn();});}
var xtag={tags:{},defaultOptions:{pseudos:[],mixins:[],events:{},methods:{},accessors:{},lifecycle:{},attributes:{},prototype:{xtag:{get:function(){return this.__xtag__?this.__xtag__:this.__xtag__={data:{}};}}}},register:function(name,options){var _name;if(typeof name=="string"){_name=name.toLowerCase();}else{return;}
xtag.tags[_name]=options||{};var basePrototype=options.prototype;delete options.prototype;var tag=xtag.tags[_name].compiled=applyMixins(xtag.merge({},xtag.defaultOptions,options));for(var z in tag.events)tag.events[z]=xtag.parseEvent(z,tag.events[z]);for(z in tag.lifecycle)tag.lifecycle[z.split(":")[0]]=xtag.applyPseudos(z,tag.lifecycle[z],tag.pseudos,tag.lifecycle[z]);for(z in tag.methods)tag.prototype[z.split(":")[0]]={value:xtag.applyPseudos(z,tag.methods[z],tag.pseudos,tag.methods[z]),enumerable:true};for(z in tag.accessors)parseAccessor(tag,z);var shadow=tag.shadow?xtag.createFragment(tag.shadow):null;var ready=tag.lifecycle.created||tag.lifecycle.ready;tag.prototype.createdCallback={enumerable:true,value:function(){var element=this;if(shadow&&this.createShadowRoot){var root=this.createShadowRoot();root.appendChild(shadow.cloneNode(true));}
xtag.addEvents(this,tag.events);var output=ready?ready.apply(this,arguments):null;for(var name in tag.attributes){var attr=tag.attributes[name],hasAttr=this.hasAttribute(name);if(hasAttr||attr.boolean){this[attr.key]=attr.boolean?hasAttr:this.getAttribute(name);}}
tag.pseudos.forEach(function(obj){obj.onAdd.call(element,obj);});return output;}};var inserted=tag.lifecycle.inserted,removed=tag.lifecycle.removed;if(inserted||removed){tag.prototype.attachedCallback={value:function(){if(removed)this.xtag.__parentNode__=this.parentNode;if(inserted)return inserted.apply(this,arguments);},enumerable:true};}
if(removed){tag.prototype.detachedCallback={value:function(){var args=toArray(arguments);args.unshift(this.xtag.__parentNode__);var output=removed.apply(this,args);delete this.xtag.__parentNode__;return output;},enumerable:true};}
if(tag.lifecycle.attributeChanged)tag.prototype.attributeChangedCallback={value:tag.lifecycle.attributeChanged,enumerable:true};var setAttribute=tag.prototype.setAttribute||HTMLElement.prototype.setAttribute;tag.prototype.setAttribute={writable:true,enumberable:true,value:function(name,value){var attr=tag.attributes[name.toLowerCase()];if(!this.xtag._skipAttr)setAttribute.call(this,name,attr&&attr.boolean?"":value);if(attr){if(attr.setter&&!this.xtag._skipSet){this.xtag._skipAttr=true;attr.setter.call(this,attr.boolean?true:value);}
value=attr.skip?attr.boolean?this.hasAttribute(name):this.getAttribute(name):value;syncAttr(this,attr,name,attr.boolean?"":value,"setAttribute");}
delete this.xtag._skipAttr;}};var removeAttribute=tag.prototype.removeAttribute||HTMLElement.prototype.removeAttribute;tag.prototype.removeAttribute={writable:true,enumberable:true,value:function(name){var attr=tag.attributes[name.toLowerCase()];if(!this.xtag._skipAttr)removeAttribute.call(this,name);if(attr){if(attr.setter&&!this.xtag._skipSet){this.xtag._skipAttr=true;attr.setter.call(this,attr.boolean?false:undefined);}
syncAttr(this,attr,name,undefined,"removeAttribute");}
delete this.xtag._skipAttr;}};var elementProto=basePrototype?basePrototype:options["extends"]?Object.create(doc.createElement(options["extends"]).constructor).prototype:win.HTMLElement.prototype;var definition={prototype:Object.create(elementProto,tag.prototype)};if(options["extends"]){definition["extends"]=options["extends"];}
var reg=doc.registerElement(_name,definition);fireReady(_name);return reg;},ready:function(names,fn){var obj={tags:toArray(names),fn:fn};if(obj.tags.reduce(function(last,name){if(xtag.tags[name])return last;(readyTags[name]=readyTags[name]||[]).push(obj);},true))fn();},mixins:{},prefix:prefix,captureEvents:["focus","blur","scroll","underflow","overflow","overflowchanged","DOMMouseScroll"],customEvents:{overflow:createFlowEvent("over"),underflow:createFlowEvent("under"),animationstart:{attach:[prefix.dom+"AnimationStart"]},animationend:{attach:[prefix.dom+"AnimationEnd"]},transitionend:{attach:[prefix.dom+"TransitionEnd"]},move:{attach:["mousemove","touchmove"],condition:touchFilter},enter:{attach:["mouseover","touchenter"],condition:touchFilter},leave:{attach:["mouseout","touchleave"],condition:touchFilter},scrollwheel:{attach:["DOMMouseScroll","mousewheel"],condition:function(event){event.delta=event.wheelDelta?event.wheelDelta/40:Math.round(event.detail/3.5* -1);return true;}},tapstart:{observe:{mousedown:doc,touchstart:doc},condition:touchFilter},tapend:{observe:{mouseup:doc,touchend:doc},condition:touchFilter},tapmove:{attach:["tapstart","dragend","touchcancel"],condition:function(event,custom){switch(event.type){case"move":return true;case"dragover":var last=custom.lastDrag||{};custom.lastDrag=event;return last.pageX!=event.pageX&&last.pageY!=event.pageY||null;case"tapstart":if(!custom.move){custom.current=this;custom.move=xtag.addEvents(this,{move:custom.listener,dragover:custom.listener});custom.tapend=xtag.addEvent(doc,"tapend",custom.listener);}
break;case"tapend":case"dragend":case"touchcancel":if(!event.touches.length){if(custom.move)xtag.removeEvents(custom.current,custom.move||{});if(custom.tapend)xtag.removeEvent(doc,custom.tapend||{});delete custom.lastDrag;delete custom.current;delete custom.tapend;delete custom.move;}}}}},pseudos:{__mixin__:{},mixins:{onCompiled:function(fn,pseudo){var mixins=pseudo.source.__mixins__;if(mixins)switch(pseudo.value){case"before":return function(){var self=this,args=arguments;mixins.forEach(function(m){m.apply(self,args);});return fn.apply(self,args);};case null:case"":case"after":return function(){var self=this,args=arguments;returns=fn.apply(self,args);mixins.forEach(function(m){m.apply(self,args);});return returns;};}}},keypass:keypseudo,keyfail:keypseudo,delegate:{action:delegateAction},within:{action:delegateAction,onAdd:function(pseudo){var condition=pseudo.source.condition;if(condition)pseudo.source.condition=function(event,custom){return xtag.query(this,pseudo.value).filter(function(node){return node==event.target||node.contains?node.contains(event.target):null;})[0]?condition.call(this,event,custom):null;};}},preventable:{action:function(pseudo,event){return!event.defaultPrevented;}}},clone:clone,typeOf:typeOf,toArray:toArray,wrap:function(original,fn){return function(){var args=arguments,output=original.apply(this,args);fn.apply(this,args);return output;};},merge:function(source,k,v){if(typeOf(k)=="string")return mergeOne(source,k,v);for(var i=1,l=arguments.length;i<l;i++){var object=arguments[i];for(var key in object)mergeOne(source,key,object[key]);}
return source;},uid:function(){return Math.random().toString(36).substr(2,10);},query:query,skipTransition:function(element,fn,bind){var prop=prefix.js+"TransitionProperty";element.style[prop]=element.style.transitionProperty="none";var callback=fn?fn.call(bind):null;return xtag.requestFrame(function(){xtag.requestFrame(function(){element.style[prop]=element.style.transitionProperty="";if(callback)xtag.requestFrame(callback);});});},requestFrame:function(){var raf=win.requestAnimationFrame||win[prefix.lowercase+"RequestAnimationFrame"]||function(fn){return win.setTimeout(fn,20);};return function(fn){return raf(fn);};}(),cancelFrame:function(){var cancel=win.cancelAnimationFrame||win[prefix.lowercase+"CancelAnimationFrame"]||win.clearTimeout;return function(id){return cancel(id);};}(),matchSelector:function(element,selector){return matchSelector.call(element,selector);},set:function(element,method,value){element[method]=value;if(window.CustomElements)CustomElements.upgradeAll(element);},innerHTML:function(el,html){xtag.set(el,"innerHTML",html);},hasClass:function(element,klass){return element.className.split(" ").indexOf(klass.trim())>-1;},addClass:function(element,klass){var list=element.className.trim().split(" ");klass.trim().split(" ").forEach(function(name){if(!~list.indexOf(name))list.push(name);});element.className=list.join(" ").trim();return element;},removeClass:function(element,klass){var classes=klass.trim().split(" ");element.className=element.className.trim().split(" ").filter(function(name){return name&&!~classes.indexOf(name);}).join(" ");return element;},toggleClass:function(element,klass){return xtag[xtag.hasClass(element,klass)?"removeClass":"addClass"].call(null,element,klass);},queryChildren:function(element,selector){if(!element||!selector){console.trace(element,selector);}
var id=element.id,guid=element.id=id||"x_"+xtag.uid(),attr="#"+guid+" > ",noParent=false;if(!element.parentNode){noParent=true;container.appendChild(element);}
selector=attr+(selector+"").replace(",",","+attr,"g");var result=element.parentNode.querySelectorAll(selector);if(!id)element.removeAttribute("id");if(noParent){container.removeChild(element);}
return toArray(result);},createFragment:function(content){var frag=doc.createDocumentFragment();if(content){var div=frag.appendChild(doc.createElement("div")),nodes=toArray(content.nodeName?arguments:!(div.innerHTML=typeof content=="function"?parseMultiline(content):content)||div.children),length=nodes.length,index=0;while(index<length)frag.insertBefore(nodes[index++],div);frag.removeChild(div);}
return frag;},manipulate:function(element,fn){var next=element.nextSibling,parent=element.parentNode,frag=doc.createDocumentFragment(),returned=fn.call(frag.appendChild(element),frag)||element;if(next)parent.insertBefore(returned,next);else parent.appendChild(returned);},applyPseudos:function(key,fn,target,source){var listener=fn,pseudos={};if(key.match(":")){var split=key.match(regexPseudoSplit),i=split.length;while(--i){split[i].replace(regexPseudoReplace,function(match,name,value){if(!xtag.pseudos[name])throw"pseudo not found: "+name+" "+split;value=value===""||typeof value=="undefined"?null:value;var pseudo=pseudos[i]=Object.create(xtag.pseudos[name]);pseudo.key=key;pseudo.name=name;pseudo.value=value;pseudo["arguments"]=(value||"").split(",");pseudo.action=pseudo.action||trueop;pseudo.source=source;var last=listener;listener=function(){var args=toArray(arguments),obj={key:key,name:name,value:value,source:source,arguments:pseudo["arguments"],listener:last};var output=pseudo.action.apply(this,[obj].concat(args));if(output===null||output===false)return output;return obj.listener.apply(this,args);};if(target&&pseudo.onAdd){if(target.nodeName)pseudo.onAdd.call(target,pseudo);else target.push(pseudo);}});}}
for(var z in pseudos){if(pseudos[z].onCompiled)listener=pseudos[z].onCompiled(listener,pseudos[z])||listener;}
return listener;},removePseudos:function(target,pseudos){pseudos.forEach(function(obj){if(obj.onRemove)obj.onRemove.call(target,obj);});},parseEvent:function(type,fn){var pseudos=type.split(":"),key=pseudos.shift(),custom=xtag.customEvents[key],event=xtag.merge({type:key,stack:noop,condition:trueop,attach:[],_attach:[],pseudos:"",_pseudos:[],onAdd:noop,onRemove:noop},custom||{});event.attach=toArray(event.base||event.attach);event.chain=key+(event.pseudos.length?":"+event.pseudos:"")+(pseudos.length?":"+pseudos.join(":"):"");var condition=event.condition;event.condition=function(e){var t=e.touches,tt=e.targetTouches;return condition.apply(this,arguments);};var stack=xtag.applyPseudos(event.chain,fn,event._pseudos,event);event.stack=function(e){e.currentTarget=e.currentTarget||this;var t=e.touches,tt=e.targetTouches;var detail=e.detail||{};if(!detail.__stack__)return stack.apply(this,arguments);else if(detail.__stack__==stack){e.stopPropagation();e.cancelBubble=true;return stack.apply(this,arguments);}};event.listener=function(e){var args=toArray(arguments),output=event.condition.apply(this,args.concat([event]));if(!output)return output;if(e.type!=key&&e.baseEvent&&e.type!=e.baseEvent.type){xtag.fireEvent(e.target,key,{baseEvent:e,detail:output!==true&&(output.__stack__=stack)?output:{__stack__:stack}});}else return event.stack.apply(this,args);};event.attach.forEach(function(name){event._attach.push(xtag.parseEvent(name,event.listener));});if(custom&&custom.observe&&!custom.__observing__){custom.observer=function(e){var output=event.condition.apply(this,toArray(arguments).concat([custom]));if(!output)return output;xtag.fireEvent(e.target,key,{baseEvent:e,detail:output!==true?output:{}});};for(var z in custom.observe)xtag.addEvent(custom.observe[z]||document,z,custom.observer,true);custom.__observing__=true;}
return event;},addEvent:function(element,type,fn,capture){var event=typeof fn=="function"?xtag.parseEvent(type,fn):fn;event._pseudos.forEach(function(obj){obj.onAdd.call(element,obj);});event._attach.forEach(function(obj){xtag.addEvent(element,obj.type,obj);});event.onAdd.call(element,event,event.listener);element.addEventListener(event.type,event.stack,capture||xtag.captureEvents.indexOf(event.type)>-1);return event;},addEvents:function(element,obj){var events={};for(var z in obj){events[z]=xtag.addEvent(element,z,obj[z]);}
return events;},removeEvent:function(element,type,event){event=event||type;event.onRemove.call(element,event,event.listener);xtag.removePseudos(element,event._pseudos);event._attach.forEach(function(obj){xtag.removeEvent(element,obj);});element.removeEventListener(event.type,event.stack);},removeEvents:function(element,obj){for(var z in obj)xtag.removeEvent(element,obj[z]);},fireEvent:function(element,type,options,warn){var event=doc.createEvent("CustomEvent");options=options||{};if(warn)console.warn("fireEvent has been modified");event.initCustomEvent(type,options.bubbles!==false,options.cancelable!==false,options.detail);if(options.baseEvent)inheritEvent(event,options.baseEvent);try{element.dispatchEvent(event);}catch(e){console.warn("This error may have been caused by a change in the fireEvent method",e);}},addObserver:function(element,type,fn){if(!element._records){element._records={inserted:[],removed:[]};if(mutation){element._observer=new mutation(function(mutations){parseMutations(element,mutations);});element._observer.observe(element,{subtree:true,childList:true,attributes:!true,characterData:false});}else["Inserted","Removed"].forEach(function(type){element.addEventListener("DOMNode"+type,function(event){event._mutation=true;element._records[type.toLowerCase()].forEach(function(fn){fn(event.target,event);});},false);});}
if(element._records[type].indexOf(fn)==-1)element._records[type].push(fn);},removeObserver:function(element,type,fn){var obj=element._records;if(obj&&fn){obj[type].splice(obj[type].indexOf(fn),1);}else{obj[type]=[];}}};var touching=false,touchTarget=null;doc.addEventListener("mousedown",function(e){touching=true;touchTarget=e.target;},true);doc.addEventListener("mouseup",function(){touching=false;touchTarget=null;},true);doc.addEventListener("dragend",function(){touching=false;touchTarget=null;},true);var UIEventProto={touches:{configurable:true,get:function(){return this.__touches__||(this.identifier=0)||(this.__touches__=touching?[this]:[]);}},targetTouches:{configurable:true,get:function(){return this.__targetTouches__||(this.__targetTouches__=touching&&this.currentTarget&&(this.currentTarget==touchTarget||this.currentTarget.contains&&this.currentTarget.contains(touchTarget))?(this.identifier=0)||[this]:[]);}},changedTouches:{configurable:true,get:function(){return this.__changedTouches__||(this.identifier=0)||(this.__changedTouches__=[this]);}}};for(z in UIEventProto){UIEvent.prototype[z]=UIEventProto[z];Object.defineProperty(UIEvent.prototype,z,UIEventProto[z]);}
function addTap(el,tap,e){if(!el.__tap__){el.__tap__={click:e.type=="mousedown"};if(el.__tap__.click)el.addEventListener("click",tap.observer);else{el.__tap__.scroll=tap.observer.bind(el);window.addEventListener("scroll",el.__tap__.scroll,true);el.addEventListener("touchmove",tap.observer);el.addEventListener("touchcancel",tap.observer);el.addEventListener("touchend",tap.observer);}}
if(!el.__tap__.click){el.__tap__.x=e.touches[0].pageX;el.__tap__.y=e.touches[0].pageY;}}
function removeTap(el,tap){if(el.__tap__){if(el.__tap__.click)el.removeEventListener("click",tap.observer);else{window.removeEventListener("scroll",el.__tap__.scroll,true);el.removeEventListener("touchmove",tap.observer);el.removeEventListener("touchcancel",tap.observer);el.removeEventListener("touchend",tap.observer);}
delete el.__tap__;}}
function checkTapPosition(el,tap,e){var touch=e.changedTouches[0],tol=tap.gesture.tolerance;if(touch.pageX<el.__tap__.x+tol&&touch.pageX>el.__tap__.x-tol&&touch.pageY<el.__tap__.y+tol&&touch.pageY>el.__tap__.y-tol)return true;}
xtag.customEvents.tap={observe:{mousedown:document,touchstart:document},gesture:{tolerance:8},condition:function(e,tap){var el=e.target;switch(e.type){case"touchstart":if(el.__tap__&&el.__tap__.click)removeTap(el,tap);addTap(el,tap,e);return;case"mousedown":if(!el.__tap__)addTap(el,tap,e);return;case"scroll":case"touchcancel":removeTap(this,tap);return;case"touchmove":case"touchend":if(this.__tap__&&!checkTapPosition(this,tap,e)){removeTap(this,tap);return;}
return e.type=="touchend"||null;case"click":removeTap(this,tap);return true;}}};win.xtag=xtag;if(typeof define=="function"&&define.amd)define(xtag);doc.addEventListener("WebComponentsReady",function(){xtag.fireEvent(doc.body,"DOMComponentsLoaded");});})();(function(){var events={},elements={},observers={};function outerNodes(element,event){var type=event.type,el=elements[type]||(elements[type]=[]),ev=events[type]||(events[type]=[]),i=el.indexOf(element);if(i==-1){el.push(element);ev.push(event);}else{el.splice(i,1);ev.splice(i,1);}
return el;}
xtag.pseudos.outer={action:function(pseudo,e){if(this==e.target||this.contains&&this.contains(e.target))return null;},onRemove:function(pseudo){if(!outerNodes(this,pseudo.source).length){xtag.removeEvent(document,observers[pseudo.source.type]);}},onAdd:function(pseudo){outerNodes(this,pseudo.source);var element=this,type=pseudo.source.type;if(!observers[type]){observers[type]=xtag.addEvent(document,type,function(e){elements[type].forEach(function(node,i){if(node==e.target||node.contains(e.target))return;events[type][i].stack.call(node,e);});});}}};})();if(typeof WeakMap==="undefined"){(function(){var defineProperty=Object.defineProperty;var counter=Date.now()%1e9;var WeakMap=function(){this.name="__st"+(Math.random()*1e9>>>0)+(counter++ +"__");};WeakMap.prototype={set:function(key,value){var entry=key[this.name];if(entry&&entry[0]===key)entry[1]=value;else defineProperty(key,this.name,{value:[key,value],writable:true});},get:function(key){var entry;return(entry=key[this.name])&&entry[0]===key?entry[1]:undefined;},"delete":function(key){this.set(key,undefined);}};window.WeakMap=WeakMap;})();}
(function(global){var registrationsTable=new WeakMap();var setImmediate=window.msSetImmediate;if(!setImmediate){var setImmediateQueue=[];var sentinel=String(Math.random());window.addEventListener("message",function(e){if(e.data===sentinel){var queue=setImmediateQueue;setImmediateQueue=[];queue.forEach(function(func){func();});}});setImmediate=function(func){setImmediateQueue.push(func);window.postMessage(sentinel,"*");};}
var isScheduled=false;var scheduledObservers=[];function scheduleCallback(observer){scheduledObservers.push(observer);if(!isScheduled){isScheduled=true;setImmediate(dispatchCallbacks);}}
function wrapIfNeeded(node){return node;}
function dispatchCallbacks(){isScheduled=false;var observers=scheduledObservers;scheduledObservers=[];observers.sort(function(o1,o2){return o1.uid_-o2.uid_;});var anyNonEmpty=false;observers.forEach(function(observer){var queue=observer.takeRecords();removeTransientObserversFor(observer);if(queue.length){observer.callback_(queue,observer);anyNonEmpty=true;}});if(anyNonEmpty)dispatchCallbacks();}
function removeTransientObserversFor(observer){observer.nodes_.forEach(function(node){var registrations=registrationsTable.get(node);if(!registrations)return;registrations.forEach(function(registration){if(registration.observer===observer)registration.removeTransientObservers();});});}
function forEachAncestorAndObserverEnqueueRecord(target,callback){for(var node=target;node;node=node.parentNode){var registrations=registrationsTable.get(node);if(registrations){for(var j=0;j<registrations.length;j++){var registration=registrations[j];var options=registration.options;if(node!==target&&!options.subtree)continue;var record=callback(options);if(record)registration.enqueue(record);}}}}
var uidCounter=0;function JsMutationObserver(callback){this.callback_=callback;this.nodes_=[];this.records_=[];this.uid_=++uidCounter;}
JsMutationObserver.prototype={observe:function(target,options){target=wrapIfNeeded(target);if(!options.childList&&!options.attributes&&!options.characterData||options.attributeOldValue&&!options.attributes||options.attributeFilter&&options.attributeFilter.length&&!options.attributes||options.characterDataOldValue&&!options.characterData){throw new SyntaxError();}
var registrations=registrationsTable.get(target);if(!registrations)registrationsTable.set(target,registrations=[]);var registration;for(var i=0;i<registrations.length;i++){if(registrations[i].observer===this){registration=registrations[i];registration.removeListeners();registration.options=options;break;}}
if(!registration){registration=new Registration(this,target,options);registrations.push(registration);this.nodes_.push(target);}
registration.addListeners();},disconnect:function(){this.nodes_.forEach(function(node){var registrations=registrationsTable.get(node);for(var i=0;i<registrations.length;i++){var registration=registrations[i];if(registration.observer===this){registration.removeListeners();registrations.splice(i,1);break;}}},this);this.records_=[];},takeRecords:function(){var copyOfRecords=this.records_;this.records_=[];return copyOfRecords;}};function MutationRecord(type,target){this.type=type;this.target=target;this.addedNodes=[];this.removedNodes=[];this.previousSibling=null;this.nextSibling=null;this.attributeName=null;this.attributeNamespace=null;this.oldValue=null;}
function copyMutationRecord(original){var record=new MutationRecord(original.type,original.target);record.addedNodes=original.addedNodes.slice();record.removedNodes=original.removedNodes.slice();record.previousSibling=original.previousSibling;record.nextSibling=original.nextSibling;record.attributeName=original.attributeName;record.attributeNamespace=original.attributeNamespace;record.oldValue=original.oldValue;return record;}
var currentRecord,recordWithOldValue;function getRecord(type,target){return currentRecord=new MutationRecord(type,target);}
function getRecordWithOldValue(oldValue){if(recordWithOldValue)return recordWithOldValue;recordWithOldValue=copyMutationRecord(currentRecord);recordWithOldValue.oldValue=oldValue;return recordWithOldValue;}
function clearRecords(){currentRecord=recordWithOldValue=undefined;}
function recordRepresentsCurrentMutation(record){return record===recordWithOldValue||record===currentRecord;}
function selectRecord(lastRecord,newRecord){if(lastRecord===newRecord)return lastRecord;if(recordWithOldValue&&recordRepresentsCurrentMutation(lastRecord))return recordWithOldValue;return null;}
function Registration(observer,target,options){this.observer=observer;this.target=target;this.options=options;this.transientObservedNodes=[];}
Registration.prototype={enqueue:function(record){var records=this.observer.records_;var length=records.length;if(records.length>0){var lastRecord=records[length-1];var recordToReplaceLast=selectRecord(lastRecord,record);if(recordToReplaceLast){records[length-1]=recordToReplaceLast;return;}}else{scheduleCallback(this.observer);}
records[length]=record;},addListeners:function(){this.addListeners_(this.target);},addListeners_:function(node){var options=this.options;if(options.attributes)node.addEventListener("DOMAttrModified",this,true);if(options.characterData)node.addEventListener("DOMCharacterDataModified",this,true);if(options.childList)node.addEventListener("DOMNodeInserted",this,true);if(options.childList||options.subtree)node.addEventListener("DOMNodeRemoved",this,true);},removeListeners:function(){this.removeListeners_(this.target);},removeListeners_:function(node){var options=this.options;if(options.attributes)node.removeEventListener("DOMAttrModified",this,true);if(options.characterData)node.removeEventListener("DOMCharacterDataModified",this,true);if(options.childList)node.removeEventListener("DOMNodeInserted",this,true);if(options.childList||options.subtree)node.removeEventListener("DOMNodeRemoved",this,true);},addTransientObserver:function(node){if(node===this.target)return;this.addListeners_(node);this.transientObservedNodes.push(node);var registrations=registrationsTable.get(node);if(!registrations)registrationsTable.set(node,registrations=[]);registrations.push(this);},removeTransientObservers:function(){var transientObservedNodes=this.transientObservedNodes;this.transientObservedNodes=[];transientObservedNodes.forEach(function(node){this.removeListeners_(node);var registrations=registrationsTable.get(node);for(var i=0;i<registrations.length;i++){if(registrations[i]===this){registrations.splice(i,1);break;}}},this);},handleEvent:function(e){e.stopImmediatePropagation();switch(e.type){case"DOMAttrModified":var name=e.attrName;var namespace=e.relatedNode.namespaceURI;var target=e.target;var record=new getRecord("attributes",target);record.attributeName=name;record.attributeNamespace=namespace;var oldValue=e.attrChange===MutationEvent.ADDITION?null:e.prevValue;forEachAncestorAndObserverEnqueueRecord(target,function(options){if(!options.attributes)return;if(options.attributeFilter&&options.attributeFilter.length&&options.attributeFilter.indexOf(name)===-1&&options.attributeFilter.indexOf(namespace)===-1){return;}
if(options.attributeOldValue)return getRecordWithOldValue(oldValue);return record;});break;case"DOMCharacterDataModified":var target=e.target;var record=getRecord("characterData",target);var oldValue=e.prevValue;forEachAncestorAndObserverEnqueueRecord(target,function(options){if(!options.characterData)return;if(options.characterDataOldValue)return getRecordWithOldValue(oldValue);return record;});break;case"DOMNodeRemoved":this.addTransientObserver(e.target);case"DOMNodeInserted":var target=e.relatedNode;var changedNode=e.target;var addedNodes,removedNodes;if(e.type==="DOMNodeInserted"){addedNodes=[changedNode];removedNodes=[];}else{addedNodes=[];removedNodes=[changedNode];}
var previousSibling=changedNode.previousSibling;var nextSibling=changedNode.nextSibling;var record=getRecord("childList",target);record.addedNodes=addedNodes;record.removedNodes=removedNodes;record.previousSibling=previousSibling;record.nextSibling=nextSibling;forEachAncestorAndObserverEnqueueRecord(target,function(options){if(!options.childList)return;return record;});}
clearRecords();}};global.JsMutationObserver=JsMutationObserver;if(!global.MutationObserver)global.MutationObserver=JsMutationObserver;})(this);(function(){if(typeof window.Element==="undefined"||"classList"in document.documentElement)return;var prototype=Array.prototype,indexOf=prototype.indexOf,slice=prototype.slice,push=prototype.push,splice=prototype.splice,join=prototype.join;function DOMTokenList(el){this._element=el;if(el.className!=this._classCache){this._classCache=el.className;if(!this._classCache)return;var classes=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/),i;for(i=0;i<classes.length;i++){push.call(this,classes[i]);}}}
function setToClassName(el,classes){el.className=classes.join(" ");}
DOMTokenList.prototype={add:function(token){if(this.contains(token))return;push.call(this,token);setToClassName(this._element,slice.call(this,0));},contains:function(token){return indexOf.call(this,token)!==-1;},item:function(index){return this[index]||null;},remove:function(token){var i=indexOf.call(this,token);if(i===-1){return;}
splice.call(this,i,1);setToClassName(this._element,slice.call(this,0));},toString:function(){return join.call(this," ");},toggle:function(token){if(indexOf.call(this,token)===-1){this.add(token);}else{this.remove(token);}}};window.DOMTokenList=DOMTokenList;function defineElementGetter(obj,prop,getter){if(Object.defineProperty){Object.defineProperty(obj,prop,{get:getter});}else{obj.__defineGetter__(prop,getter);}}
defineElementGetter(Element.prototype,"classList",function(){return new DOMTokenList(this);});})();if(!window.CustomElements){window.CustomElements={flags:{}};}
(function(scope){var logFlags=window.logFlags||{};var IMPORT_LINK_TYPE=window.HTMLImports?HTMLImports.IMPORT_LINK_TYPE:"none";function findAll(node,find,data){var e=node.firstElementChild;if(!e){e=node.firstChild;while(e&&e.nodeType!==Node.ELEMENT_NODE){e=e.nextSibling;}}
while(e){if(find(e,data)!==true){findAll(e,find,data);}
e=e.nextElementSibling;}
return null;}
function forRoots(node,cb){var root=node.shadowRoot;while(root){forSubtree(root,cb);root=root.olderShadowRoot;}}
function forSubtree(node,cb){findAll(node,function(e){if(cb(e)){return true;}
forRoots(e,cb);});forRoots(node,cb);}
function added(node){if(upgrade(node)){insertedNode(node);return true;}
inserted(node);}
function addedSubtree(node){forSubtree(node,function(e){if(added(e)){return true;}});}
function addedNode(node){return added(node)||addedSubtree(node);}
function upgrade(node){if(!node.__upgraded__&&node.nodeType===Node.ELEMENT_NODE){var type=node.getAttribute("is")||node.localName;var definition=scope.registry[type];if(definition){logFlags.dom&&console.group("upgrade:",node.localName);scope.upgrade(node);logFlags.dom&&console.groupEnd();return true;}}}
function insertedNode(node){inserted(node);if(inDocument(node)){forSubtree(node,function(e){inserted(e);});}}
var hasPolyfillMutations=!window.MutationObserver||window.MutationObserver===window.JsMutationObserver;scope.hasPolyfillMutations=hasPolyfillMutations;var isPendingMutations=false;var pendingMutations=[];function deferMutation(fn){pendingMutations.push(fn);if(!isPendingMutations){isPendingMutations=true;var async=window.Platform&&window.Platform.endOfMicrotask||setTimeout;async(takeMutations);}}
function takeMutations(){isPendingMutations=false;var $p=pendingMutations;for(var i=0,l=$p.length,p;i<l&&(p=$p[i]);i++){p();}
pendingMutations=[];}
function inserted(element){if(hasPolyfillMutations){deferMutation(function(){_inserted(element);});}else{_inserted(element);}}
function _inserted(element){if(element.attachedCallback||element.detachedCallback||element.__upgraded__&&logFlags.dom){logFlags.dom&&console.group("inserted:",element.localName);if(inDocument(element)){element.__inserted=(element.__inserted||0)+1;if(element.__inserted<1){element.__inserted=1;}
if(element.__inserted>1){logFlags.dom&&console.warn("inserted:",element.localName,"insert/remove count:",element.__inserted);}else if(element.attachedCallback){logFlags.dom&&console.log("inserted:",element.localName);element.attachedCallback();}}
logFlags.dom&&console.groupEnd();}}
function removedNode(node){removed(node);forSubtree(node,function(e){removed(e);});}
function removed(element){if(hasPolyfillMutations){deferMutation(function(){_removed(element);});}else{_removed(element);}}
function _removed(element){if(element.attachedCallback||element.detachedCallback||element.__upgraded__&&logFlags.dom){logFlags.dom&&console.group("removed:",element.localName);if(!inDocument(element)){element.__inserted=(element.__inserted||0)-1;if(element.__inserted>0){element.__inserted=0;}
if(element.__inserted<0){logFlags.dom&&console.warn("removed:",element.localName,"insert/remove count:",element.__inserted);}else if(element.detachedCallback){element.detachedCallback();}}
logFlags.dom&&console.groupEnd();}}
function wrapIfNeeded(node){return node;}
function inDocument(element){var p=element;var doc=wrapIfNeeded(document);while(p){if(p==doc){return true;}
p=p.parentNode||p.host;}}
function watchShadow(node){if(node.shadowRoot&&!node.shadowRoot.__watched){logFlags.dom&&console.log("watching shadow-root for: ",node.localName);var root=node.shadowRoot;while(root){watchRoot(root);root=root.olderShadowRoot;}}}
function watchRoot(root){if(!root.__watched){observe(root);root.__watched=true;}}
function handler(mutations){if(logFlags.dom){var mx=mutations[0];if(mx&&mx.type==="childList"&&mx.addedNodes){if(mx.addedNodes){var d=mx.addedNodes[0];while(d&&d!==document&&!d.host){d=d.parentNode;}
var u=d&&(d.URL||d._URL||d.host&&d.host.localName)||"";u=u.split("/?").shift().split("/").pop();}}
console.group("mutations (%d) [%s]",mutations.length,u||"");}
mutations.forEach(function(mx){if(mx.type==="childList"){forEach(mx.addedNodes,function(n){if(!n.localName){return;}
addedNode(n);});forEach(mx.removedNodes,function(n){if(!n.localName){return;}
removedNode(n);});}});logFlags.dom&&console.groupEnd();}
var observer=new MutationObserver(handler);function takeRecords(){handler(observer.takeRecords());takeMutations();}
var forEach=Array.prototype.forEach.call.bind(Array.prototype.forEach);function observe(inRoot){observer.observe(inRoot,{childList:true,subtree:true});}
function observeDocument(doc){observe(doc);}
function upgradeDocument(doc){logFlags.dom&&console.group("upgradeDocument: ",doc.baseURI.split("/").pop());addedNode(doc);logFlags.dom&&console.groupEnd();}
function upgradeDocumentTree(doc){doc=wrapIfNeeded(doc);var imports=doc.querySelectorAll("link[rel="+IMPORT_LINK_TYPE+"]");for(var i=0,l=imports.length,n;i<l&&(n=imports[i]);i++){if(n.import&&n.import.__parsed){upgradeDocumentTree(n.import);}}
upgradeDocument(doc);}
scope.IMPORT_LINK_TYPE=IMPORT_LINK_TYPE;scope.watchShadow=watchShadow;scope.upgradeDocumentTree=upgradeDocumentTree;scope.upgradeAll=addedNode;scope.upgradeSubtree=addedSubtree;scope.insertedNode=insertedNode;scope.observeDocument=observeDocument;scope.upgradeDocument=upgradeDocument;scope.takeRecords=takeRecords;})(window.CustomElements);(function(scope){function bootstrap(){CustomElements.parser.parse(document);CustomElements.upgradeDocument(document);var async=window.Platform&&Platform.endOfMicrotask?Platform.endOfMicrotask:setTimeout;async(function(){CustomElements.ready=true;CustomElements.readyTime=Date.now();if(window.HTMLImports){CustomElements.elapsed=CustomElements.readyTime-HTMLImports.readyTime;}
document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:true}));if(window.HTMLImports){HTMLImports.__importsParsingHook=function(elt){CustomElements.parser.parse(elt.import);};}});}
if(typeof window.CustomEvent!=="function"){window.CustomEvent=function(inType){var e=document.createEvent("HTMLEvents");e.initEvent(inType,true,true);return e;};}
if(document.readyState==="complete"||scope.flags.eager){bootstrap();}else if(document.readyState==="interactive"&&!window.attachEvent&&(!window.HTMLImports||window.HTMLImports.ready)){bootstrap();}else{var loadEvent=window.HTMLImports&&!HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(loadEvent,bootstrap);}})(window.CustomElements);;(function(){'use strict';/**
	 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
	 *
	 * @codingstandard ftlabs-jsv2
	 * @copyright The Financial Times Limited [All Rights Reserved]
	 * @license MIT License (see LICENSE.txt)
	 */
/*jslint browser:true, node:true*/
/*global define, Event, Node*/
/**
	 * Instantiate fast-clicking listeners on the specified layer.
	 *
	 * @constructor
	 * @param {Element} layer The layer to listen on
	 * @param {Object} [options={}] The options to override the defaults
	 */
function FastClick(layer,options){var oldOnClick;options=options||{};/**
		 * Whether a click is currently being tracked.
		 *
		 * @type boolean
		 */
this.trackingClick=false;/**
		 * Timestamp for when click tracking started.
		 *
		 * @type number
		 */
this.trackingClickStart=0;/**
		 * The element being tracked for a click.
		 *
		 * @type EventTarget
		 */
this.targetElement=null;/**
		 * X-coordinate of touch start event.
		 *
		 * @type number
		 */
this.touchStartX=0;/**
		 * Y-coordinate of touch start event.
		 *
		 * @type number
		 */
this.touchStartY=0;/**
		 * ID of the last touch, retrieved from Touch.identifier.
		 *
		 * @type number
		 */
this.lastTouchIdentifier=0;/**
		 * Touchmove boundary, beyond which a click will be cancelled.
		 *
		 * @type number
		 */
this.touchBoundary=options.touchBoundary||10;/**
		 * The FastClick layer.
		 *
		 * @type Element
		 */
this.layer=layer;/**
		 * The minimum time between tap(touchstart and touchend) events
		 *
		 * @type number
		 */
this.tapDelay=options.tapDelay||200;/**
		 * The maximum time for a tap
		 *
		 * @type number
		 */
this.tapTimeout=options.tapTimeout||700;if(FastClick.notNeeded(layer)){return;}
function bind(method,context){return function(){return method.apply(context,arguments);};}
var methods=['onMouse','onClick','onTouchStart','onTouchMove','onTouchEnd','onTouchCancel'];var context=this;for(var i=0,l=methods.length;i<l;i++){context[methods[i]]=bind(context[methods[i]],context);}
if(deviceIsAndroid||deviceIsIOS){layer.addEventListener('mouseover',this.onMouse,true);layer.addEventListener('mousedown',this.onMouse,true);layer.addEventListener('mouseup',this.onMouse,true);}
layer.addEventListener('click',this.onClick,true);layer.addEventListener('touchstart',this.onTouchStart,false);layer.addEventListener('touchmove',this.onTouchMove,false);layer.addEventListener('touchend',this.onTouchEnd,false);layer.addEventListener('touchcancel',this.onTouchCancel,false);if(!Event.prototype.stopImmediatePropagation){layer.removeEventListener=function(type,callback,capture){var rmv=Node.prototype.removeEventListener;if(type==='click'){rmv.call(layer,type,callback.hijacked||callback,capture);}else{rmv.call(layer,type,callback,capture);}};layer.addEventListener=function(type,callback,capture){var adv=Node.prototype.addEventListener;if(type==='click'){adv.call(layer,type,callback.hijacked||(callback.hijacked=function(event){if(!event.propagationStopped){callback(event);}}),capture);}else{adv.call(layer,type,callback,capture);}};}
if(typeof layer.onclick==='function'){oldOnClick=layer.onclick;layer.addEventListener('click',function(event){oldOnClick(event);},false);layer.onclick=null;}}
/**
	* Windows Phone 8.1 fakes user agent string to look like Android and iPhone.
	*
	* @type boolean
	*/
var deviceIsWindowsPhone=navigator.userAgent.indexOf("Windows Phone")>=0;/**
	 * Android requires exceptions.
	 *
	 * @type boolean
	 */
var deviceIsAndroid=navigator.userAgent.indexOf('Android')>0&&!deviceIsWindowsPhone;/**
	 * iOS requires exceptions.
	 *
	 * @type boolean
	 */
var deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent)&&!deviceIsWindowsPhone;/**
	 * iOS 4 requires an exception for select elements.
	 *
	 * @type boolean
	 */
var deviceIsIOS4=deviceIsIOS&&(/OS 4_\d(_\d)?/).test(navigator.userAgent);/**
	 * iOS 6.0-7.* requires the target element to be manually derived
	 *
	 * @type boolean
	 */
var deviceIsIOSWithBadTarget=deviceIsIOS&&(/OS [6-7]_\d/).test(navigator.userAgent);/**
	 * BlackBerry requires exceptions.
	 *
	 * @type boolean
	 */
var deviceIsBlackBerry10=navigator.userAgent.indexOf('BB10')>0;/**
	 * Determine whether a given element requires a native click.
	 *
	 * @param {EventTarget|Element} target Target DOM element
	 * @returns {boolean} Returns true if the element needs a native click
	 */
FastClick.prototype.needsClick=function(target){switch(target.nodeName.toLowerCase()){case'button':case'select':case'textarea':if(target.disabled){return true;}
break;case'input':if((deviceIsIOS&&target.type==='file')||target.disabled){return true;}
break;case'label':case'iframe':case'video':return true;}
var currentElement=target.parentNode;while(currentElement&&currentElement.parentNode&&currentElement.parentNode.nodeName!=='HTML'){if(currentElement.classList.contains('childrenneedsclick')){return true;}
currentElement=currentElement.parentNode;}
return(/\bneedsclick\b/).test(target.className);};/**
	 * Determine whether a given element requires a call to focus to simulate click into element.
	 *
	 * @param {EventTarget|Element} target Target DOM element
	 * @returns {boolean} Returns true if the element requires a call to focus to simulate native click.
	 */
FastClick.prototype.needsFocus=function(target){switch(target.nodeName.toLowerCase()){case'textarea':return true;case'select':return!deviceIsAndroid;case'input':switch(target.type){case'button':case'checkbox':case'file':case'image':case'radio':case'submit':return false;}
return!target.disabled&&!target.readOnly;default:return(/\bneedsfocus\b/).test(target.className);}};/**
	 * Send a click event to the specified element.
	 *
	 * @param {EventTarget|Element} targetElement
	 * @param {Event} event
	 */
FastClick.prototype.sendClick=function(targetElement,event){var clickEvent,touch;if(document.activeElement&&document.activeElement!==targetElement){document.activeElement.blur();}
touch=event.changedTouches[0];clickEvent=document.createEvent('MouseEvents');clickEvent.initMouseEvent(this.determineEventType(targetElement),true,true,window,1,touch.screenX,touch.screenY,touch.clientX,touch.clientY,false,false,false,false,0,null);clickEvent.forwardedTouchEvent=true;targetElement.dispatchEvent(clickEvent);};FastClick.prototype.determineEventType=function(targetElement){if(deviceIsAndroid&&targetElement.tagName.toLowerCase()==='select'){return'mousedown';}
return'click';};/**
	 * @param {EventTarget|Element} targetElement
	 */
FastClick.prototype.focus=function(targetElement){var length;if(deviceIsIOS&&targetElement.setSelectionRange&&targetElement.type.indexOf('date')!==0&&targetElement.type!=='time'&&targetElement.type!=='month'){length=targetElement.value.length;targetElement.setSelectionRange(length,length);}else{targetElement.focus();}};/**
	 * Check whether the given target element is a child of a scrollable layer and if so, set a flag on it.
	 *
	 * @param {EventTarget|Element} targetElement
	 */
FastClick.prototype.updateScrollParent=function(targetElement){var scrollParent,parentElement;scrollParent=targetElement.fastClickScrollParent;if(!scrollParent||!scrollParent.contains(targetElement)){parentElement=targetElement;do{if(parentElement.scrollHeight>parentElement.offsetHeight){scrollParent=parentElement;targetElement.fastClickScrollParent=parentElement;break;}
parentElement=parentElement.parentElement;}while(parentElement);}
if(scrollParent){scrollParent.fastClickLastScrollTop=scrollParent.scrollTop;}};/**
	 * @param {EventTarget} targetElement
	 * @returns {Element|EventTarget}
	 */
FastClick.prototype.getTargetElementFromEventTarget=function(eventTarget){if(eventTarget.nodeType===Node.TEXT_NODE){return eventTarget.parentNode;}
return eventTarget;};/**
	 * On touch start, record the position and scroll offset.
	 *
	 * @param {Event} event
	 * @returns {boolean}
	 */
FastClick.prototype.onTouchStart=function(event){var targetElement,touch,selection;if(event.targetTouches.length>1){return true;}
targetElement=this.getTargetElementFromEventTarget(event.target);touch=event.targetTouches[0];if(deviceIsIOS){selection=window.getSelection();if(selection.rangeCount&&!selection.isCollapsed){return true;}
if(!deviceIsIOS4){if(touch.identifier&&touch.identifier===this.lastTouchIdentifier){event.preventDefault();return false;}
this.lastTouchIdentifier=touch.identifier;this.updateScrollParent(targetElement);}}
this.trackingClick=true;this.trackingClickStart=event.timeStamp;this.targetElement=targetElement;this.touchStartX=touch.pageX;this.touchStartY=touch.pageY;if((event.timeStamp-this.lastClickTime)<this.tapDelay){event.preventDefault();}
return true;};/**
	 * Based on a touchmove event object, check whether the touch has moved past a boundary since it started.
	 *
	 * @param {Event} event
	 * @returns {boolean}
	 */
FastClick.prototype.touchHasMoved=function(event){var touch=event.changedTouches[0],boundary=this.touchBoundary;if(Math.abs(touch.pageX-this.touchStartX)>boundary||Math.abs(touch.pageY-this.touchStartY)>boundary){return true;}
return false;};/**
	 * Update the last position.
	 *
	 * @param {Event} event
	 * @returns {boolean}
	 */
FastClick.prototype.onTouchMove=function(event){if(!this.trackingClick){return true;}
if(this.targetElement!==this.getTargetElementFromEventTarget(event.target)||this.touchHasMoved(event)){this.trackingClick=false;this.targetElement=null;}
return true;};/**
	 * Attempt to find the labelled control for the given label element.
	 *
	 * @param {EventTarget|HTMLLabelElement} labelElement
	 * @returns {Element|null}
	 */
FastClick.prototype.findControl=function(labelElement){if(labelElement.control!==undefined){return labelElement.control;}
if(labelElement.htmlFor){return document.getElementById(labelElement.htmlFor);}
return labelElement.querySelector('button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea');};/**
	 * On touch end, determine whether to send a click event at once.
	 *
	 * @param {Event} event
	 * @returns {boolean}
	 */
FastClick.prototype.onTouchEnd=function(event){var forElement,trackingClickStart,targetTagName,scrollParent,touch,targetElement=this.targetElement;if(!this.trackingClick){return true;}
if((event.timeStamp-this.lastClickTime)<this.tapDelay){this.cancelNextClick=true;return true;}
if((event.timeStamp-this.trackingClickStart)>this.tapTimeout){return true;}
this.cancelNextClick=false;this.lastClickTime=event.timeStamp;trackingClickStart=this.trackingClickStart;this.trackingClick=false;this.trackingClickStart=0;if(deviceIsIOSWithBadTarget){touch=event.changedTouches[0];targetElement=document.elementFromPoint(touch.pageX-window.pageXOffset,touch.pageY-window.pageYOffset)||targetElement;targetElement.fastClickScrollParent=this.targetElement.fastClickScrollParent;}
targetTagName=targetElement.tagName.toLowerCase();if(targetTagName==='label'){forElement=this.findControl(targetElement);if(forElement){this.focus(targetElement);if(deviceIsAndroid){return false;}
targetElement=forElement;}}else if(this.needsFocus(targetElement)){if((event.timeStamp-trackingClickStart)>100||(deviceIsIOS&&window.top!==window&&targetTagName==='input')){this.targetElement=null;return false;}
this.focus(targetElement);this.sendClick(targetElement,event);if(!deviceIsIOS||targetTagName!=='select'){this.targetElement=null;event.preventDefault();}
return false;}
if(deviceIsIOS&&!deviceIsIOS4){scrollParent=targetElement.fastClickScrollParent;if(scrollParent&&scrollParent.fastClickLastScrollTop!==scrollParent.scrollTop){return true;}}
if(!this.needsClick(targetElement)){event.preventDefault();this.sendClick(targetElement,event);}
return false;};/**
	 * On touch cancel, stop tracking the click.
	 *
	 * @returns {void}
	 */
FastClick.prototype.onTouchCancel=function(){this.trackingClick=false;this.targetElement=null;};/**
	 * Determine mouse events which should be permitted.
	 *
	 * @param {Event} event
	 * @returns {boolean}
	 */
FastClick.prototype.onMouse=function(event){if(!this.targetElement){return true;}
if(event.forwardedTouchEvent){return true;}
if(!event.cancelable){return true;}
if(!this.needsClick(this.targetElement)||this.cancelNextClick){if(event.stopImmediatePropagation){event.stopImmediatePropagation();}else{event.propagationStopped=true;}
event.stopPropagation();event.preventDefault();return false;}
return true;};/**
	 * On actual clicks, determine whether this is a touch-generated click, a click action occurring
	 * naturally after a delay after a touch (which needs to be cancelled to avoid duplication), or
	 * an actual click which should be permitted.
	 *
	 * @param {Event} event
	 * @returns {boolean}
	 */
FastClick.prototype.onClick=function(event){var permitted;if(this.trackingClick){this.targetElement=null;this.trackingClick=false;return true;}
if(event.target.type==='submit'&&event.detail===0){return true;}
permitted=this.onMouse(event);if(!permitted){this.targetElement=null;}
return permitted;};/**
	 * Remove all FastClick's event listeners.
	 *
	 * @returns {void}
	 */
FastClick.prototype.destroy=function(){var layer=this.layer;if(deviceIsAndroid){layer.removeEventListener('mouseover',this.onMouse,true);layer.removeEventListener('mousedown',this.onMouse,true);layer.removeEventListener('mouseup',this.onMouse,true);}
layer.removeEventListener('click',this.onClick,true);layer.removeEventListener('touchstart',this.onTouchStart,false);layer.removeEventListener('touchmove',this.onTouchMove,false);layer.removeEventListener('touchend',this.onTouchEnd,false);layer.removeEventListener('touchcancel',this.onTouchCancel,false);};/**
	 * Check whether FastClick is needed.
	 *
	 * @param {Element} layer The layer to listen on
	 */
FastClick.notNeeded=function(layer){var metaViewport;var chromeVersion;var blackberryVersion;if(typeof window.ontouchstart==='undefined'){return true;}
chromeVersion=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(chromeVersion){if(deviceIsAndroid){metaViewport=document.querySelector('meta[name=viewport]');if(metaViewport){if(metaViewport.content.indexOf('user-scalable=no')!==-1){return true;}
if(chromeVersion>31&&document.documentElement.scrollWidth<=window.outerWidth){return true;}}}else{return true;}}
if(deviceIsBlackBerry10){blackberryVersion=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/);if(blackberryVersion[1]>=10&&blackberryVersion[2]>=3){metaViewport=document.querySelector('meta[name=viewport]');if(metaViewport){if(metaViewport.content.indexOf('user-scalable=no')!==-1){return true;}
if(document.documentElement.scrollWidth<=window.outerWidth){return true;}}}}
if(layer.style.msTouchAction==='none'){return true;}
if(layer.style.touchAction==='none'){return true;}
return false;};/**
	 * Factory method for creating a FastClick object
	 *
	 * @param {Element} layer The layer to listen on
	 * @param {Object} [options={}] The options to override the defaults
	 */
FastClick.attach=function(layer,options){return new FastClick(layer,options);};if(typeof define=='function'&&typeof define.amd=='object'&&define.amd){define(function(){return FastClick;});}else if(typeof module!=='undefined'&&module.exports){module.exports=FastClick.attach;module.exports.FastClick=FastClick;}else{window.FastClick=FastClick;}}());/*
    json_parse.js
    2012-06-20

    Public Domain.

    NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.

    This file creates a json_parse function.

        json_parse(text, reviver)
            This method parses a JSON text to produce an object or array.
            It can throw a SyntaxError exception.

            The optional reviver parameter is a function that can filter and
            transform the results. It receives each of the keys and values,
            and its return value is used instead of the original value.
            If it returns what it received, then the structure is not modified.
            If it returns undefined then the member is deleted.

            Example:

            // Parse the text. Values that look like ISO date strings will
            // be converted to Date objects.

            myData = json_parse(text, function (key, value) {
                var a;
                if (typeof value === 'string') {
                    a =
/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(value);
                    if (a) {
                        return new Date(Date.UTC(+a[1], +a[2] - 1, +a[3], +a[4],
                            +a[5], +a[6]));
                    }
                }
                return value;
            });

    This is a reference implementation. You are free to copy, modify, or
    redistribute.

    This code should be minified before deployment.
    See http://javascript.crockford.com/jsmin.html

    USE YOUR OWN COPY. IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO
    NOT CONTROL.
*/
/*members "", "\"", "\/", "\\", at, b, call, charAt, f, fromCharCode,
    hasOwnProperty, message, n, name, prototype, push, r, t, text
*/
window.JSON=window.JSON||{};window.JSON.parse=(function(){"use strict";var at,ch,escapee={'"':'"','\\':'\\','/':'/',b:'\b',f:'\f',n:'\n',r:'\r',t:'\t'},text,error=function(m){throw{name:'SyntaxError',message:m,at:at,text:text};},next=function(c){if(c&&c!==ch){error("Expected '"+c+"' instead of '"+ch+"'");}
ch=text.charAt(at);at+=1;return ch;},number=function(){var number,string='';if(ch==='-'){string='-';next('-');}
while(ch>='0'&&ch<='9'){string+=ch;next();}
if(ch==='.'){string+='.';while(next()&&ch>='0'&&ch<='9'){string+=ch;}}
if(ch==='e'||ch==='E'){string+=ch;next();if(ch==='-'||ch==='+'){string+=ch;next();}
while(ch>='0'&&ch<='9'){string+=ch;next();}}
number=+string;if(!isFinite(number)){error("Bad number");}else{return number;}},string=function(){var hex,i,string='',uffff;if(ch==='"'){while(next()){if(ch==='"'){next();return string;}
if(ch==='\\'){next();if(ch==='u'){uffff=0;for(i=0;i<4;i+=1){hex=parseInt(next(),16);if(!isFinite(hex)){break;}
uffff=uffff*16+hex;}
string+=String.fromCharCode(uffff);}else if(typeof escapee[ch]==='string'){string+=escapee[ch];}else{break;}}else{string+=ch;}}}
error("Bad string");},white=function(){while(ch&&ch<=' '){next();}},word=function(){switch(ch){case't':next('t');next('r');next('u');next('e');return true;case'f':next('f');next('a');next('l');next('s');next('e');return false;case'n':next('n');next('u');next('l');next('l');return null;}
error("Unexpected '"+ch+"'");},value,array=function(){var array=[];if(ch==='['){next('[');white();if(ch===']'){next(']');return array;}
while(ch){array.push(value());white();if(ch===']'){next(']');return array;}
next(',');white();}}
error("Bad array");},object=function(){var key,object={};if(ch==='{'){next('{');white();if(ch==='}'){next('}');return object;}
while(ch){key=string();white();next(':');if(Object.hasOwnProperty.call(object,key)){error('Duplicate key "'+key+'"');}
object[key]=value();white();if(ch==='}'){next('}');return object;}
next(',');white();}}
error("Bad object");};value=function(){white();switch(ch){case'{':return object();case'[':return array();case'"':return string();case'-':return number();default:return ch>='0'&&ch<='9'?number():word();}};return function(source,reviver){var result;text=source;at=0;ch=' ';result=value();white();if(ch){error("Syntax error");}
return typeof reviver==='function'?(function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object'){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}
return reviver.call(holder,key,value);}({'':result},'')):result;};}());(function(){function p(b,a,d){return("string"===typeof a?a:a.toString()).replace(b.define||h,function(a,c,e,g){0===c.indexOf("def.")&&(c=c.substring(4));c in d||(":"===e?(b.defineParams&&g.replace(b.defineParams,function(a,b,l){d[c]={arg:b,text:l}}),c in d||(d[c]=g)):(new Function("def","def['"+c+"']="+g))(d));return""}).replace(b.use||h,function(a,c){b.useParams&&(c=c.replace(b.useParams,function(a,b,c,l){if(d[c]&&d[c].arg&&l)return a=(c+":"+l).replace(/'|\\/g,"_"),d.__exp=d.__exp||{},d.__exp[a]=d[c].text.replace(new RegExp("(^|[^\\w$])"+d[c].arg+"([^\\w$])","g"),"$1"+l+"$2"),b+"def.__exp['"+a+"']"}));var e=(new Function("def","return "+c))(d);return e?p(b,e,d):e})}function k(b){return b.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var f={version:"1.0.3",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},template:void 0,compile:void 0},m;f.encodeHTMLSource=function(b){var a={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},d=b?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(b){return b?b.toString().replace(d,function(b){return a[b]||b}):""}};m=function(){return this||(0,eval)("this")}();"undefined"!==typeof module&&module.exports?module.exports=f:"function"===typeof define&&define.amd?define(function(){return f}):m.doT=f;var r={start:"'+(",end:")+'",startencode:"'+encodeHTML("},s={start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("},h=/$^/;f.template=function(b,a,d){a=a||f.templateSettings;var n=a.append?r:s,c,e=0,g;b=a.use||a.define?p(a,b,d||{}):b;b=("var out='"+(a.strip?b.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):b).replace(/'|\\/g,"\\$&").replace(a.interpolate||h,function(b,a){return n.start+k(a)+n.end}).replace(a.encode||h,function(b,a){c=!0;return n.startencode+k(a)+n.end}).replace(a.conditional||h,function(b,a,c){return a?c?"';}else if("+k(c)+"){out+='":"';}else{out+='":c?"';if("+k(c)+"){out+='":"';}out+='"}).replace(a.iterate||h,function(b,a,c,d){if(!a)return"';} } out+='";e+=1;g=d||"i"+e;a=k(a);return"';var arr"+
e+"="+a+";if(arr"+e+"){var "+c+","+g+"=-1,l"+e+"=arr"+e+".length-1;while("+g+"<l"+e+"){"+c+"=arr"+e+"["+g+"+=1];out+='"}).replace(a.evaluate||h,function(a,b){return"';"+k(b)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,"");c&&(a.selfcontained||!m||m._encodeHTML||(m._encodeHTML=f.encodeHTMLSource(a.doNotSkipEncoded)),b="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+f.encodeHTMLSource.toString()+"("+(a.doNotSkipEncoded||"")+"));"+b);try{return new Function(a.varname,b)}catch(q){throw"undefined"!==typeof console&&console.log("Could not create a template function: "+b),q;}};f.compile=function(b,a){return f.template(b,null,a)}})();doT.templateSettings={evaluate:/\{\{([\s\S]+?)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:}}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:'jo',strip:false,append:true,selfcontained:false};function encodeHTML(text){'use strict';var encode={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"};return text?text.toString().replace(/&|<|>|"|'|\//g,function(letter){return encode[letter]||letter;}):text;}
function decodeHTML(text){'use strict';var decode={"&#38;":"&","&amp;":"&","&#60;":"<","&#62;":">","&lt;":"<","&gt;":">","&#34;":'"',"&#39;":"'","&#47;":"/"};return text?text.toString().replace(/&#38;|&amp;|&#60;|&#62;|&lt;|&gt;|&#34;|&#39;|&#47;/g,function(letter){return decode[letter]||letter;}):text;}
function ml(func){'use strict';func=func.toString();return func.substring(func.indexOf('/*')+2,func.indexOf('*/'));}
if(window.evt===undefined){window.evt={};}
function touchDeviceTest(){'use strict';return'ontouchstart'in window||'onmsgesturechange'in window;}
function getDeviceType(){'use strict';if(evt.touchDevice===false){return'desktop';}
if(evt.touchDevice===true&&screen.width>500){return'tablet';}
return'phone';}
/*DOC
Name:
    evt.*

Description:
    This is a collection of global variables that are used for browser-type detection and for using different events for different devices.
    The reason for this is because even though the 'mousedown' event works on a phone it is substantially slower than if you had used 'touchstart',
    But if you used 'touchstart' it wouldn't work on the computer so we wrap both under the name evt.mousedown and only give mobile browsers
    'touchstart' and desktop browsers 'mousedown' so that you dont have to differentiate.
    
List of variables:
    evt.touchDevice  equals true|false depending on whether or not we are on a touch-enabled devide
    evt.deviceType   equals 'desktop'|'tablet'|'phone' depending on what type of device you are on
    
    evt.mousedown    if we are on a touch device: 'touchstart'  else  'mousedown'
    evt.mouseover    if we are on a touch device: 'touchenter'  else  'mouseover'
    evt.mousemove    if we are on a touch device: 'touchmove'   else  'mousemove'
    evt.mouseout     if we are on a touch device: 'touchleave'  else  'mouseout'
    evt.mouseup      if we are on a touch device: 'touchend'    else  'mouseup'
    evt.click        if we are on a touch device: 'touchend'    else  'click'

*/
evt.touchDevice=touchDeviceTest();evt.deviceType=getDeviceType();evt.mousedown=evt.touchDevice?'touchstart':'mousedown';evt.mouseover=evt.touchDevice?'touchenter':'mouseover';evt.mousemove=evt.touchDevice?'touchmove':'mousemove';evt.mouseout=evt.touchDevice?'touchleave':'mouseout';evt.mouseup=evt.touchDevice?'touchend':'mouseup';evt.click='click';if(window.GS===undefined){window.GS={};GS.version=function(){'use strict';return'1.0.0';};window.addEventListener('design-register-element',function(){'use strict';registerDesignSnippet('GS.version','GS.version','GS.version();');});}
if(window.shimmed===undefined){window.shimmed={};window.addEventListener('design-register-element',function(){'use strict';});}
if(typeof console==='undefined'||!console.log){window.console={log:function(){'use strict';},info:function(){'use strict';},debug:function(){'use strict';},warn:function(){'use strict';},trace:function(){'use strict';},error:function(){'use strict';}};}
/*
if (evt.touchDevice) {
    (function () {
        var startTime, startTouchTop, endTime, endTouchTop, lastTouchTop, currentTouchTop,
            bolCurrentlyMonitoring = false, bolTouchScrollPrevented = false, currentScrollingElement, scrollingLooper;
        
        window.ontouchstart = function(event){
            lastTouchTop = GS.mousePosition(event).top;
        };
        
        //window.addEventListener('scroll', function (event) {
        //    console.log(event);
        //}, true);
        
        window.ontouchmove = function (event) {
            var currentTouchTop = GS.mousePosition(event).top, currentElement = GS.scrollParent(event.target), bolFoundScrollable = Boolean(currentElement);
            
            //console.log(currentElement,
            //            event.target,
            //            bolFoundScrollable,
            //            currentElement.scrollTop,
            //            currentElement.clientHeight,
            //            currentElement.scrollHeight,
            //            currentTouchTop,
            //            lastTouchTop);
            //console.log(currentElement.scrollTop <= 0,
            //            currentTouchTop > lastTouchTop,
            //            currentElement.scrollTop + currentElement.clientHeight >= currentElement.scrollHeight,
            //            currentTouchTop < lastTouchTop);
            
            if (bolFoundScrollable === false ||
                (currentElement.scrollTop <= 0 && currentTouchTop > lastTouchTop) ||
                (currentElement.scrollTop + currentElement.clientHeight >= currentElement.scrollHeight && currentTouchTop < lastTouchTop)) {
                
                //console.log('prevent default');
                
                bolTouchScrollPrevented = true;
                event.preventDefault();
                //event.stopPropagation();
                
            } else if (bolFoundScrollable === true && bolTouchScrollPrevented === true) {
                currentElement.scrollTop += (lastTouchTop - currentTouchTop);
            }
            
            currentScrollingElement = currentElement;
            lastTouchTop = currentTouchTop;
        };
        
        window.ontouchend = function () {
            bolTouchScrollPrevented = false;
        };
    })();
}*/
window.addEventListener('click',function(event){var labelElement,targetElement;if(event.target.nodeName==='LABEL'){labelElement=event.target;}else if(GS.findParentTag(event.target,'LABEL')){labelElement=GS.findParentTag(event.target,'LABEL');}
if(labelElement&&labelElement.hasAttribute('for')){targetElement=document.getElementById(labelElement.getAttribute('for'));if(targetElement&&targetElement.focus&&!targetElement.hasAttribute('disabled')){targetElement.focus();}}});window.addEventListener('load',function(){var strPostageuName=GS.getCookie('postage_uname');if(strPostageuName&&window.location.host.indexOf(strPostageuName)===0&&window.location.pathname!=='/v1/app/all/index.html'&&window.location.pathname.indexOf('/v1/dev')!==0){var styleChild=document.createElement('style');styleChild.innerHTML='body, body gs-panel, body gs-panel gs-header, body gs-panel gs-body, '+'body gs-page, body gs-page gs-header, body gs-page gs-body {'+'background-color: #FFBBBB;'+'}';document.querySelector('head').appendChild(styleChild);}});window.addEventListener('load',function(){'use strict';var bolOpen,intMaxHeight,curlElement,menuElement,strPostageUName,strHTML,toggleCurl;if(window.bolCurl!==false){bolOpen=false;intMaxHeight=0;curlElement=document.createElement('div');menuElement=document.createElement('div');strPostageUName=GS.getCookie('postage_uname');strHTML='';curlElement.setAttribute('id','gs-document-curl-container');curlElement.innerHTML='<div id="gs-document-curl-part-1"></div>'+'<div id="gs-document-curl-part-2"></div>'+'<div id="gs-document-curl-part-3"></div>'+'<div id="gs-document-curl-part-4"></div>';document.body.appendChild(curlElement);if(evt.deviceType==='phone'){curlElement.setAttribute('style','font-size: 1.3em;');}else{curlElement.setAttribute('style','font-size: 0.7em;');}
menuElement.setAttribute('id','gs-document-menu-container');menuElement.setAttribute('style','height: 0px;');strHTML+='<center><b><a target="_self" href="/v1/app/all/index.html">Home</a></b></center>';strHTML+='<center><b><a target="_self" href="/v1/env/auth/?action=logout">Log out</a></b></center>';strHTML+='<center><b><a onclick="GS.userChangePassword()">Change Password</a></b></center>';intMaxHeight+=4.2;if(window.location.host.indexOf(strPostageUName)===0){strHTML+='<center><b><a target="_self" href="/v1/postage/auth/?action=logout">Log Superuser out</a></b></center>';strHTML+='<center><b><a onclick="GS.superChangePassword()">Change Superuser Password</a></b></center>';intMaxHeight+=2.8;}
strHTML+='<b>&nbsp;<a onclick="GS.showShimmed()">Browser Support</a></b>';intMaxHeight+=1.4;menuElement.innerHTML='<div id="gs-document-menu-link-container" style="height: '+intMaxHeight+'em;">'+strHTML+'</div>';document.body.appendChild(menuElement);toggleCurl=function(){var intFontSize=GS.pxToEm(document.body,window.innerWidth)/4,intBottomLine=window.innerHeight-(GS.emToPx(document.body,intFontSize)),closedSize=(evt.deviceType==='phone'?'1.3em':'0.7em');if(GS.pxToEm(document.body,intBottomLine)>intMaxHeight){intBottomLine=GS.emToPx(document.body,intMaxHeight);}
curlElement.classList.add('animating');menuElement.classList.add('animating');if(bolOpen===false){document.body.insertBefore(GS.stringToElement('<div id="gs-document-curl-modal-background"></div>'),curlElement);document.getElementById('gs-document-curl-modal-background').addEventListener('click',toggleCurl);GS.animateStyle(curlElement,'font-size',closedSize,intFontSize+'em',function(){curlElement.classList.remove('animating');},185,18);GS.animateStyle(curlElement,'bottom','0px',intBottomLine+'px',function(){curlElement.classList.remove('animating');},185,18);GS.animateStyle(menuElement,'height','0px',intBottomLine+'px',function(){menuElement.classList.remove('animating');},185,18);bolOpen=true;}else{document.body.removeChild(document.getElementById('gs-document-curl-modal-background'));GS.animateStyle(curlElement,'font-size',intFontSize+'em',closedSize,function(){curlElement.classList.remove('animating');},185,18);GS.animateStyle(curlElement,'bottom',intBottomLine+'px','0px',function(){curlElement.classList.remove('animating');},185,18);GS.animateStyle(menuElement,'height',intBottomLine+'px','0px',function(){menuElement.classList.remove('animating');},185,18);bolOpen=false;}};curlElement.addEventListener('click',toggleCurl);}});/*
    .------ turns out I was under the mistaken impression that $ was being defined globally
    |           by the browser as a shortcut to run a selector, this is not the case. $ is only
    |           for use in the console which is why when I tested "window.$ = $;" it worked in a
    |           console but not here, and also why the onclick of elements had no access either
    |           so this section of code never did anything for me.
    V
// #############################################################
// ################## ONCLICK ATTRIBUTE $ FIX ##################
// #############################################################

window.addEventListener('load', function () {
    // this fixes an issue where onclick attributes did not have access to the $ function provided by the browser
    
    
    
    //try {                                                <== Illegal invocation when $() is called
    //    window.$ = $;
    //} catch (e) {
    //    window.$ = document.querySelector;
    //}
    
    //if ($) {                                             <== $ not defined
    //    window.$ = $;
    //} else {
    //    window.$ = document.querySelector;
    //}
    
    //window.$ = $ || document.querySelector;              <== $ not defined
});
*/
/*// custom event: gs-tap
(function () {
    var bolMousedown = false, bolMouseWithinRange = false, intOriginX, intOriginY, intMaxHorizontalDiff = 10, intMaxVerticalDiff = 10, originTarget, mousedownTime;
    
    window.addEventListener(evt.mousedown, function (event) {
        var jsnMousePos = GS.mousePosition(event);
        
        //if (event.target.nodeName !== 'INPUT' && event.target.nodeName !== 'TEXTAREA' && event.target.nodeName !== 'SELECT') {
        //    event.preventDefault();
        //}
        
        intOriginY = jsnMousePos.top;
        intOriginX = jsnMousePos.left;
        
        bolMousedown = true;
        bolMouseWithinRange = true;
        
        originTarget = event.target;
        
        //console.log(evt.mousedown, event, mousedownTime !== undefined ? new Date().getTime() - mousedownTime : mousedownTime, event.target);
        
        mousedownTime = new Date().getTime();
    });
    
    window.addEventListener(evt.mousemove, function (event) {
        var jsnMousePos = GS.mousePosition(event), intCurrentX, intCurrentY;
        
        //if (!evt.touchDevice && event.which === 0) {
        //    bolMousedown = false;
        //} else 
        if (bolMousedown === true) {
            intCurrentY = jsnMousePos.top;
            intCurrentX = jsnMousePos.left;
            
            bolMouseWithinRange = !(Math.abs(intOriginX - intCurrentX) > intMaxHorizontalDiff || Math.abs(intOriginY - intCurrentY) > intMaxVerticalDiff);
            
            //console.log(evt.mousemove, bolMouseWithinRange);
        }
    });
    
    //window.addEventListener('touchcancel', function (event) {
    //    console.log('touchcancel');
    //});
    
    window.addEventListener(evt.mouseup, function (event) {
        bolMousedown = false;
        
        //console.log(evt.mouseup, bolMouseWithinRange);
        
        //if (event.target.nodeName !== 'INPUT' && event.target.nodeName !== 'TEXTAREA' && event.target.nodeName !== 'SELECT') {
        //    event.preventDefault();
        //}
        
        //console.log(originTarget, event.target, bolMouseWithinRange);
        
        if (bolMouseWithinRange === true && originTarget === event.target && new Date().getTime() - mousedownTime < 220) {
            xtag.fireEvent(originTarget, 'gs-tap');
            
            //console.log(event.target);
            //alert(event.target.nodeName);
        }
        
        bolMouseWithinRange = false;
    });
})();
*/
if('addEventListener'in document){document.addEventListener('DOMContentLoaded',function(){'use strict';FastClick.attach(document.body);},false);}
/*
HTMLTemplateElement.prototype.contentTemplate = function () {
    'use strict';
    
    if (this.content) {
        
    } else {
        
    }
};
*/
window.addEventListener('design-register-element',function(){'use strict';registerDesignSnippet('GS.showShimmed','GS.showShimmed','GS.showShimmed();');});window.addEventListener('load',function(){'use strict';function cleanFunctionForTest(fn){fn=fn.toString().toLowerCase();fn=fn.substring(fn.indexOf('{'));fn=fn.replace(/ /gim,'');return fn;}
function nativeTest(fn){if(!fn){return false;}
fn=cleanFunctionForTest(fn);return fn.indexOf('[nativecode]')>-1||fn===cleanFunctionForTest(document.createElement);}
shimmed.matchesSelector=!nativeTest(Element.prototype.matchesSelector)&&!nativeTest(Element.prototype.webkitMatchesSelector)&&!nativeTest(Element.prototype.mozMatchesSelector)&&!nativeTest(Element.prototype.msMatchesSelector)&&!nativeTest(Element.prototype.MSMatchesSelector);shimmed.MutationObserver=!nativeTest(window.MutationObserver);shimmed.WeakMap=!nativeTest(window.WeakMap);shimmed.registerElement=!nativeTest(document.registerElement);shimmed.DOMTokenList=!nativeTest(window.DOMTokenList);shimmed.HTMLTemplateElement=Boolean(HTMLTemplateElement.bootstrap);GS.showShimmed=function(){var strHTML='',key,templateElement;strHTML+='<br />\n'+'<center>This dialog is for developers so that they can determine what technologies this browser supports and what technologies are being implemented manually.</center>\n'+'<br />\n'+'<hr />\n';for(key in shimmed){strHTML+='<gs-grid reflow-at="450px">\n'+'    <gs-block><center>'+encodeHTML(key)+'</center></gs-block>\n'+'    <gs-block>\n'+'        <center>\n'+
(shimmed[key]?'            <b style="color: #F00;">SHIMMED</b>\n':'            <b style="color: #11A511;">NATIVE</b>\n')+'        </center>\n'+'    </gs-block>\n'+'</gs-grid>\n'+'<hr />\n';}
strHTML+='<br />';templateElement=document.createElement('template');templateElement.innerHTML=ml(function(){/*
            <gs-page>
                <gs-header><center><h3>Native Detection</h3></center></gs-header>
                <gs-body padded>
                    {{HTML}}
                </gs-body>
                <gs-footer><gs-button dialogclose>Done</gs-button></gs-footer>
            </gs-page>
        */}).replace('{{HTML}}',strHTML);GS.openDialog(templateElement);};});window.addEventListener('design-register-element',function(){registerDesignSnippet('Lorem Ipsum','Lorem Ipsum','Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.');registerDesignSnippet('Document Start','Document Start','<!DOCTYPE html>\n'+'<html>\n'+'    <head>\n'+'        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n'+'        <meta name="apple-mobile-web-app-capable" content="yes" />\n'+'        <meta name="apple-mobile-web-app-status-bar-style" content="black" />\n'+'        <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0, minimal-ui" />\n'+'        \n'+'        <title>${1:New Page}</title>\n'+'        \n'+'        <script src="/js/greyspots.js" type="text/javascript"></script>\n'+'        <link href="/css/greyspots.css" type="text/css" rel="stylesheet" />\n'+'    </head>\n'+'    <body>\n'+'        $0\n'+'    </body>\n'+'</html>');registerDesignSnippet('Centered H1','Centered H1','<center><h1>$0</h1></center>');registerDesignSnippet('Centered H2','Centered H2','<center><h2>$0</h2></center>');registerDesignSnippet('Centered H3','Centered H3','<center><h3>$0</h3></center>');registerDesignSnippet('Centered H4','Centered H4','<center><h4>$0</h4></center>');registerDesignSnippet('Centered H5','Centered H5','<center><h5>$0</h5></center>');registerDesignSnippet('Centered H6','Centered H6','<center><h6>$0</h6></center>');registerDesignSnippet('Window Load','window.addEventListener','window.addEventListener(\'load\', function () {\n'+'    $0\n'+'});');registerDesignSnippet('Multiline String','Multiline String','ml(function () {/*\n'+'    ${0}\n'+'})');registerDesignSnippet('ml()','ml()','ml(function () {/*\n'+'    ${0}\n'+'})');registerDesignSnippet('<style>','<style>','style>\n'+'    $0\n'+'</style>');registerDesignSnippet('<script>','<script>','script>\n'+'    $0\n'+'</script>');registerDesignSnippet('<link>','<link>','link href="${1}" type="text/css" rel="stylesheet" />');registerDesignSnippet('Curved Borders','Curved Borders','-webkit-border-radius: ${1:50%};\n'+'-moz-border-radius: ${1:50%};\n'+'-ms-border-radius: ${1:50%};\n'+'-o-border-radius: ${1:50%};\n'+'border-radius: ${1:50%};');registerDesignSnippet('border-radius','border-radius','-webkit-border-radius: ${1:50%};\n'+'-moz-border-radius: ${1:50%};\n'+'-ms-border-radius: ${1:50%};\n'+'-o-border-radius: ${1:50%};\n'+'border-radius: ${1:50%};');registerDesignSnippet('box-sizing','box-sizing','-webkit-box-sizing: ${1:border-box};\n'+'-moz-box-sizing: ${1:border-box};\n'+'-ms-box-sizing: ${1:border-box};\n'+'-o-box-sizing: ${1:border-box};\n'+'box-sizing: ${1:border-box};');registerDesignSnippet('transform','transform','-webkit-transform: ${1:rotate(42deg)};\n'+'-moz-transform: ${1:rotate(42deg)};\n'+'-ms-transform: ${1:rotate(42deg)};\n'+'-o-transform: ${1:rotate(42deg)};\n'+'transform: ${1:rotate(42deg)};');registerDesignSnippet('Desktop Media Query','Desktop Media Query','@media only screen and (max-width: 5000px) {\n'+'    $0\n'+'}');registerDesignSnippet('Tablet Media Query','Tablet Media Query','@media only screen and (max-width: 768px) {\n'+'    $0\n'+'}');registerDesignSnippet('Phone Media Query','Phone Media Query','@media only screen and (max-width: 321px) {\n'+'    $0\n'+'}');registerDesignSnippet('SELECT Query','SELECT','SELECT ${1:*} FROM ${2:test.tpeople};');registerDesignSnippet('INSERT Query','INSERT','INSERT INTO ${1:shop.raisle} (${2:store_id, aisle_name, order_no})\n'+'        VALUES (${3:new.store_id, new.aisle_name, new.order_no});');registerDesignSnippet('UPDATE Query','UPDATE','UPDATE ${1:shop.raisle} SET ${2:aisle_name = new.aisle_name, order_no = new.order_no}\n'+'        WHERE ${3:old.id = raisle.id};');registerDesignSnippet('DELETE Query','DELETE','DELETE FROM ${1:shop.raisle} WHERE ${2:id = 123456};');});window.addEventListener('design-register-element',function(){var strNormalCallbackContent='    if (!error) {\n'+'        $0\n'+'    } else {\n'+'        GS.ajaxErrorDialog(data);\n'+'    }\n';registerDesignSnippet('JSON Ajax','JSON Ajax','GS.ajaxJSON(\'/v1/${1:cluster}/${2:test.action_ship}\', \'${3:action=ship&id=}\', function (data, error) {\n'+
strNormalCallbackContent+'});');registerDesignSnippet('GS.ajaxJSON','GS.ajaxJSON','GS.ajaxJSON(\'/v1/${1:cluster}/${2:test.action_ship}\', \'${3:action=ship&id=}\', function (data, error) {\n'+
strNormalCallbackContent+'});');registerDesignSnippet('TEXT Ajax','TEXT Ajax','GS.ajaxText(\'/v1/${1:cluster}/${2:test.action_description}\', \'${3:action=get&id=}\', function (data, error) {\n'+
strNormalCallbackContent+'});');registerDesignSnippet('GS.ajaxText','GS.ajaxText','GS.ajaxText(\'/v1/${1:cluster}/${2:test.action_description}\', \'${3:action=get&id=}\', function (data, error) {\n'+
strNormalCallbackContent+'});');registerDesignSnippet('PG FUNCTION AJAX','PG FUNCTION AJAX','GS.ajaxJSON(\'/v1/${1:cluster}/${2:test.action_ship}\', \'${3:action=ship&id=}\', function (data, error) {\n'+
strNormalCallbackContent+'});');registerDesignSnippet('ENV SELECT AJAX','ENV SELECT AJAX','GS.ajaxJSON(\'/v1/env/action_select\', \'view=${1:test.tpeople}&where=&order_by=&limit=&offset=\', function (data, error) {\n'+
strNormalCallbackContent+'});');registerDesignSnippet('ENV UPDATE AJAX','ENV UPDATE AJAX','GS.ajaxJSON(\'/v1/env/action_update\', \'view=${1:test.tpeople}\' +\n'+'                                        \'&where=\' + encodeURIComponent(\'id=\' + ${2:strID} + \'&change_stamp=\' + ${3:strChangeStamp}) +\n'+'                                        \'&column=${4:first_name}&value=\' + encodeURIComponent(${5:newValue}), function (data, error) {\n'+
strNormalCallbackContent+'});');registerDesignSnippet('ENV INSERT AJAX','ENV INSERT AJAX','GS.ajaxJSON(\'/v1/env/action_insert\', \'view=${1:test.tpeople}&data=\' + encodeURIComponent(${2:strInsertString}), function (data, error) {\n'+
strNormalCallbackContent+'});');registerDesignSnippet('ENV DELETE AJAX','ENV DELETE AJAX','GS.ajaxJSON(\'/v1/env/action_delete\', \'view=${1:test.tpeople}&id=\' + ${2:strIDs}, function (data, error) {\n'+
strNormalCallbackContent+'});');registerDesignSnippet('GS.ajaxErrorDialog','GS.ajaxErrorDialog','GS.ajaxErrorDialog(data,\n'+'                   function () {\n'+'                       // Try Again Button Callback\n'+'                       // delete this function if you dont want a try again button\n'+'                   },\n'+'                   function () {\n'+'                       // Cance Button Callback\n'+'                       // if you dont need to do anything when the cancel button is clicked: delete this function\n'+'                   });');registerDesignSnippet('GS.dataFetch','GS.dataFetch','function getData(bolClearPrevious) {\n'+'    var data, strLink, dataResultHandler, dataEventFunction;\n'+'    \n'+'    // create function that will use the data\n'+'    dataResultHandler = function (data, error) {\n'+'        \n'+'    };\n'+'    \n'+'    // save data from request or\n'+'    //     start ajax if it hasn\'t already gotten the data yet or\n'+'    //     start new ajax if bolClearPrevious is true\n'+'    data = GS.dataFetch(strLink, bolClearPrevious);\n'+'    \n'+'    // if this request already has been completed\n'+'    if (data) {\n'+'        // handle result\n'+'        dataResultHandler(data.response, data.error);\n'+'    } else {\n'+'        dataEventFunction = function (event) {\n'+'            // unbind data event function\n'+'            document.removeEventListener(\'dataready_\' + encodeURIComponent(strLink), dataEventFunction);\n'+'            \n'+'            // handle result\n'+'            dataResultHandler(event.detail.response, event.detail.error);\n'+'        };\n'+'        \n'+'        // bind data event function\n'+'        document.addEventListener(\'dataready_\' + encodeURIComponent(strLink), dataEventFunction);\n'+'    }\n'+'}');});(function(){function ajaxCheckJSONResponseForError(request){'use strict';var jsnTemp;if(request.responseJSON){if(request.responseJSON.stat===false){return true;}}else{return true;}
return false;}
function ajaxNormalizeError(request,bolFrontEndTimeout){'use strict';var response=request.response,jsnTemp,jsnRet={'error_title':'','error_hint':'','error_text':'','error_file':'','error_context':'','original_response':response};if(request.bolFrontEndTimeout===true){jsnRet.error_text='Front-end Timeout Reached';jsnRet.error_title='Front-end Timeout Reached';jsnRet.error_hint='This request took too long. Please report this to a system administrator.';}else if(response.status===403){jsnRet.error_title='403 Link Is Forbidden';jsnRet.error_hint='You have no permission to use this link. If you need this link contact a system administrator and request permission for this link.';}else if(response.status===404){jsnRet.error_title='404 Link Could Not Be Found';jsnRet.error_hint='This link does not exist. Please report this to a system administrator.';}else if(response.status===408){jsnRet.error_title='408 Request Took Too Long';jsnRet.error_hint='This link is broken. Please report this to a system administrator.';}else if(response.status===500){jsnRet.error_title='500 Internal Server Error';jsnRet.error_hint='This call to the server failed. Please report this to a system administrator.';}else if(response.status===502){jsnRet.error_title='502 Bad Gateway';jsnRet.error_hint='This link is broken. Please report this to a system administrator.';}else if(response.status===504){jsnRet.error_title='504 Gateway Timeout';jsnRet.error_hint='This link is broken. Please report this to a system administrator.';}
try{jsnTemp=JSON.parse((response.responseText||response)).dat;jsnRet.error_text=jsnTemp.error;jsnRet.error_file=jsnTemp.filename;jsnRet.error_context=jsnTemp.context;if(!jsnRet.error_text){jsnRet.error_text=JSON.parse((response.responseText||response)).dat;}}catch(err){if(response){jsnRet.error_text=response.responseText||JSON.stringify(response);}else{jsnRet.error_text=jsnRet.error_text||response;}}
jsnRet.error_file=jsnRet.error_file||'';return jsnRet;}
GS.ajaxJSON=function(strLink,strParams,callback,intTimeout){'use strict';var request=new XMLHttpRequest();callback=callback||function(){};request.onreadystatechange=function(){var normalizedError;if(request.readyState===4){try{request.responseJSON=JSON.parse(request.responseText||request.response);}catch(e){}
if(!ajaxCheckJSONResponseForError(request)){callback(request.responseJSON);}else{normalizedError=ajaxNormalizeError(request);if(normalizedError.error_text.indexOf('Session expired')===0&&strLink.indexOf('action_info')===-1){GS.normalUserLogin(function(data){if(window.location.hostname.substring(0,window.location.hostname.indexOf('.'))!==(request.responseJSON.dat.default_subdomain)){GS.superUserLogin(function(){window.location.reload();});}else{window.location.reload();}},'',request.responseJSON.dat.default_subdomain);}else{callback(normalizedError,'error');}}}};request.open('POST',strLink+'?anticache='+((new Date()).getMilliseconds()+Math.floor(Math.random()*1e9)),true);request.setRequestHeader('Content-type','application/x-www-form-urlencoded; charset=UTF-8');request.send(strParams);if(typeof intTimeout==='number'){if(request&&request.readyState!==4){setTimeout(function(){request.bolFrontEndTimeout=true;request.abort();},intTimeout);}}
return request;};GS.ajaxText=function(strLink,strParams,callback){'use strict';var request=new XMLHttpRequest();callback=callback||function(){};request.onreadystatechange=function(){var normalizedError;if(request.readyState===4){if(request.status===200){callback(request.responseText);}else{normalizedError=ajaxNormalizeError(request);if(normalizedError.error_text.indexOf('Session expired')===0&&strLink.indexOf('action_info')===-1){GS.normalUserLogin(function(data){if(window.location.hostname.substring(0,window.location.hostname.indexOf('.'))!==(data.default_domain||data.default_subdomain)){GS.superUserLogin(function(){window.location.reload();});}else{window.location.reload();}});}else{callback(normalizedError,'error');}}}};request.open('POST',strLink+'?anticache='+((new Date()).getMilliseconds()+Math.floor(Math.random()*1e9)),true);request.setRequestHeader('Content-type','application/x-www-form-urlencoded; charset=UTF-8');request.send(strParams);if(typeof intTimeout==='number'){if(request&&request.readyState!==4){setTimeout(function(){request.bolFrontEndTimeout=true;request.abort();},intTimeout);}}
return request;};})();GS.ajaxErrorDialog=function(jsnError,tryAgainCallback,cancelCallback){'use strict';var templateElement=document.createElement('template'),strHTML;templateElement.setAttribute('data-theme','error');strHTML=ml(function(){/*
        <gs-page>
            <gs-header><center><h3>There was an error!</h3></center></gs-header>
            <gs-body padded>
                {{HTML}}
            </gs-body>
            <gs-footer>{{BUTTONS}}</gs-footer>
        </gs-page>
    */}).replace('{{HTML}}','<pre style="white-space: pre-wrap;">'+'There was an error:'+
(jsnError.error_text?'<br /><br />'+jsnError.error_text:'')+
(jsnError.error_file?'<br /><br />The error was on file: '+jsnError.error_file:'')+
(jsnError.error_hint?'<br /><br />'+jsnError.error_hint:'')+
(jsnError.error_context?'<br /><br />'+jsnError.error_context:'')+
(jsnError.error_addin?'<br /><br />'+jsnError.error_addin:'')+'</pre>');if(typeof tryAgainCallback==='function'){templateElement.innerHTML=strHTML.replace('{{BUTTONS}}','<gs-grid>'+'  <gs-block><gs-button dialogclose>Cancel</gs-button></gs-block>'+'  <gs-block><gs-button dialogclose>Try Again</gs-button></gs-block>'+'</gs-grid>');GS.openDialog(templateElement,'',function(event,strAnswer){if(strAnswer==='Try Again'){tryAgainCallback(strAnswer);}else{if(typeof cancelCallback==='function'){cancelCallback(strAnswer);}}});}else{templateElement.innerHTML=strHTML.replace('{{BUTTONS}}','<gs-button dialogclose>Ok</gs-button>');GS.openDialog(templateElement);}};/*

var strLink = '/v1/env/action_select?view=wtkv2.ttime&where=user_name%20%3D%20\'michael%40tocci.org\'&offset=0&limit=25&order_by=id%20DESC&header=true';

document.addEventListener('dataready_' + encodeURIComponent(strLink), function (event) {
    console.log(event);
});f

dataFetch(strLink, false);

*/
if(GS.dataLedger===undefined){GS.dataLedger={};}
GS.dataFetch=function(strLink,bolClearPrevious){'use strict';var arrLinkParts=strLink.split('?'),strId=encodeURIComponent(strLink);if(GS.dataLedger[strId]===undefined||bolClearPrevious===true){GS.dataLedger[strId]={'status':'waiting','response':''};GS.ajaxJSON(arrLinkParts[0],arrLinkParts[1]||'',function(data,error){var event;if(document.createEvent){event=document.createEvent('HTMLEvents');event.initEvent('dataready_'+strId,true,true);event.eventName='dataready_'+strId;}else{event=document.createEventObject();event.eventType='dataready_'+strId;event.eventName='dataready_'+strId;}
if(!error){GS.dataLedger[strId].response=(data.dat!==undefined?data.dat:data);GS.dataLedger[strId].status='finished';event.detail={'response':GS.dataLedger[strId].response};}else{GS.dataLedger[strId].data=data;GS.dataLedger[strId].status='error';GS.dataLedger[strId].error='error';event.detail={'response':data,'error':'error'};}
if(document.createEvent){document.dispatchEvent(event);}else{document.fireEvent('on'+event.eventType,event);}});return'';}
if(GS.dataLedger[strId].status==='finished'||GS.dataLedger[strId].status==='error'){return GS.dataLedger[strId];}
return'';};window.addEventListener('design-register-element',function(){'use strict';registerDesignSnippet('GS.findParentTag','GS.findParentTag','GS.findParentTag(${1:element}, \'${0:tag-to-find}\');');registerDesignSnippet('GS.findParentElement','GS.findParentElement','GS.findParentElement(${1:element}, ${0:\'selector, element or function\'});');registerDesignSnippet('GS.insertElementAfter','GS.insertElementAfter','GS.insertElementAfter(${1:elementToInsert}, \'${0:elementToInsertAfter}\');');registerDesignSnippet('GS.getElementOffset','GS.getElementOffset','GS.getElementOffset(${0:element});');registerDesignSnippet('GS.animateStyle','GS.animateStyle','GS.animateStyle(${1:elementToAnimate}, '+'${2:CSSPropertyToAnimate}, '+'${3:startValue}, '+'${4:endValue}, '+'${5:callbackAfterAnimation}, '+'${6:durationInMilliseconds}, '+'${0:numberOfFrames});');registerDesignSnippet('GS.stringToElement','GS.stringToElement','GS.stringToElement(\'${0:<div>your HTML here</div>}\');');registerDesignSnippet('GS.cloneElement','GS.cloneElement','GS.cloneElement(${0:element});');registerDesignSnippet('GS.isElementFocusable','GS.isElementFocusable','GS.isElementFocusable(${0:element});');registerDesignSnippet('GS.scrollParent','GS.scrollParent','GS.scrollParent(${0:element});');registerDesignSnippet('GS.scrollIntoView','GS.scrollIntoView','GS.scrollIntoView(${0:element});');registerDesignSnippet('GS.getInputSelection','GS.getInputSelection','GS.getInputSelection(${0:inputOrTextareaElement});');registerDesignSnippet('GS.setInputSelection','GS.setInputSelection','GS.setInputSelection(${1:inputOrTextareaElement}, ${2:startAtNumber}, ${0:endAtNumber});');registerDesignSnippet('GS.getElementPositionData','GS.getElementPositionData','GS.getElementPositionData(${0:element});');});GS.findParentTag=function(element,strTagName){'use strict';var currentElement=element.parentNode;strTagName=strTagName.toUpperCase();while(currentElement&&currentElement.nodeName!==strTagName&&currentElement.nodeName!=='HTML'){currentElement=currentElement.parentNode;}
if(!currentElement||currentElement.nodeName!==strTagName){return undefined;}
return currentElement;};GS.findParentElement=function(element,checkParameter){'use strict';var currentElement=element;if(typeof checkParameter==='function'){while(currentElement&&!checkParameter(currentElement)&&currentElement.nodeName!=='HTML'){currentElement=currentElement.parentNode;}}else if(typeof checkParameter==='string'){while(currentElement&&!xtag.matchSelector(currentElement,checkParameter)&&currentElement.nodeName!=='HTML'){currentElement=currentElement.parentNode;}}else{while(currentElement&&currentElement===checkParameter&&currentElement.nodeName!=='HTML'){currentElement=currentElement.parentNode;}}
if(!currentElement){return undefined;}
return currentElement;};GS.insertElementAfter=function(elementToInsert,target){if(target.nextElementSibling){target.parentNode.insertBefore(elementToInsert,target.nextElementSibling);}else{target.parentNode.appendChild(elementToInsert);}};GS.getElementOffset=function(element){'use strict';var intX=0,intY=0,ret;if(element.getBoundingClientRect){ret=element.getBoundingClientRect();}else{while(element&&element.nodeName!=='HTML'){intX+=element.offsetLeft-element.scrollLeft;intY+=element.offsetTop-element.scrollTop;element=element.parentNode;}
ret={left:intX,top:intY};}
return ret;};GS.animateStyle=function(element,strStyleProperty,strStart,strEnd,callback,intDuration,intFrames){var intStart=parseInt(strStart,10),intEnd=parseInt(strEnd,10),strStartUnit=strStart.replace(/[0-9\.-]/gi,'').toLowerCase(),intFrameDuration=intDuration/intFrames,i,timeoutFunction,intCurrent,intJump;intCurrent=intStart;intJump=(intEnd-intStart)/intFrames;i=1;element.style[strStyleProperty]=strStart;timeoutFunction=function(){setTimeout(function(){intCurrent+=intJump;if(i<intFrames){element.style[strStyleProperty]=intCurrent+strStartUnit;i+=1;timeoutFunction();}else{element.style[strStyleProperty]=strEnd;callback();}},intFrameDuration);};timeoutFunction();};GS.stringToElement=function(strHTML,optionalTargetDocument){var strFirstTagName,parentElement,indexInElement,parsedElement,targetDocument;if(optionalTargetDocument){targetDocument=optionalTargetDocument;}else{targetDocument=document;}
strFirstTagName=strHTML.substring(strHTML.indexOf('<')+1,strHTML.indexOf('>'));if(strFirstTagName.indexOf(' ')>-1){strFirstTagName=strFirstTagName.substring(0,strFirstTagName.indexOf(' '));}
if(strFirstTagName==='body'){parentElement=targetDocument.createElement('html');indexInElement=1;}else if(strFirstTagName==='thead'||strFirstTagName==='tbody'){parentElement=targetDocument.createElement('table');indexInElement=0;}else if(strFirstTagName==='tr'){parentElement=targetDocument.createElement('tbody');indexInElement=0;}else if(strFirstTagName==='td'||strFirstTagName==='th'){parentElement=targetDocument.createElement('tr');indexInElement=0;}else if(strFirstTagName==='li'){parentElement=targetDocument.createElement('ul');indexInElement=0;}else{parentElement=targetDocument.createElement('div');indexInElement=0;}
parentElement.innerHTML=strHTML;parsedElement=parentElement.children[indexInElement];return parsedElement;};GS.cloneElement=function(element,optionalTargetDocument){if(xtag.query(element,'template').length>0||optionalTargetDocument){return GS.stringToElement(element.outerHTML,optionalTargetDocument);}
return element.cloneNode(true);};/*
// change the tag of an element
GS.changeElementTag = function (element, strNewTag, alterCallback) {
    var strHTML = element.outerHTML.trim(), newElement;
    
    strHTML = '<' + strNewTag + strHTML.substring(strHTML.indexOf(' '), strHTML.lastIndexOf('</')) + '</' + strNewTag + '>';
    
    //console.log(strHTML);
    
    newElement = GS.stringToElement(strHTML);
    
    if (typeof alterCallback === 'function') {
        alterCallback.apply(newElement);
    }
    
    return newElement;
};*/
GS.isElementFocusable=function(element){return(element.nodeName==='INPUT'||element.nodeName==='TEXTAREA'||element.nodeName==='SELECT'||element.nodeName==='BUTTON'||element.nodeName==='IFRAME'||element.hasAttribute('tabindex')||(element.focus&&element.focus.toString().indexOf('[native code]')===-1&&element.focus.toString()!==document.createElement('div').focus.toString())||(element.nodeName==='A'&&element.hasAttribute('href'))||(element.nodeName==='AREA'&&element.hasAttribute('href')))&&!element.hasAttribute('disabled');};GS.scrollParent=function(element){var i=0,currentElement=element,bolFoundScrollable=false,strOverflow;while(currentElement.nodeName!=='HTML'&&bolFoundScrollable===false&&i<75){strOverflow=GS.getStyle(currentElement,'overflow');if(strOverflow==='scroll'||(strOverflow==='auto'&&currentElement.clientHeight<currentElement.scrollHeight)){bolFoundScrollable=true;}else{currentElement=currentElement.parentNode;i+=1;}}
return bolFoundScrollable?currentElement:undefined;};GS.scrollIntoView=function(element){var scrollingContainer=GS.scrollParent(element),arrSiblings,i,len,intScrollTop;if(scrollingContainer){arrSiblings=element.parentNode.children;for(i=0,intScrollTop=0,len=arrSiblings.length;i<len;i+=1){if(arrSiblings[i]===element){intScrollTop+=arrSiblings[i].offsetHeight/2;break;}else{intScrollTop+=arrSiblings[i].offsetHeight;}}
intScrollTop=intScrollTop-(scrollingContainer.offsetHeight/2);scrollingContainer.scrollTop=intScrollTop;}};GS.getInputSelection=function(input){'use strict';var start=0,end=0,normalizedValue,range,textInputRange,len,endRange;if(typeof input.selectionStart==="number"&&typeof input.selectionEnd==="number"){start=input.selectionStart;end=input.selectionEnd;}else{range=(document.createRange()||document.selection.createRange());if(range&&range.parentElement()==input){len=input.value.length;normalizedValue=input.value.replace(/\r\n/g,"\n");textInputRange=input.createTextRange();textInputRange.moveToBookmark(range.getBookmark());endRange=input.createTextRange();endRange.collapse(false);if(textInputRange.compareEndPoints("StartToEnd",endRange)>-1){start=end=len;}else{start=-textInputRange.moveStart("character",-len);start+=normalizedValue.slice(0,start).split("\n").length-1;if(textInputRange.compareEndPoints("EndToEnd",endRange)>-1){end=len;}else{end=-textInputRange.moveEnd("character",-len);end+=normalizedValue.slice(0,end).split("\n").length-1;}}}}
return{start:start,end:end};};GS.setInputSelection=function(input,intStart,intEnd){'use strict';var range;if(intStart===undefined||intStart===''||isNaN(intStart)||intStart===null){intStart=input.value.length;}
if(intEnd===undefined||intEnd===''||isNaN(intEnd)||intEnd===null){intEnd=intStart;}
if(input.createTextRange){range=input.createTextRange();range.collapse();range.moveStart('character',intStart);range.collapse();range.moveEnd('character',intEnd);range.select();}else if(input.setSelectionRange){input.focus();input.setSelectionRange(intStart,intEnd);}};GS.getElementPositionData=function(element){var objElementOffset=GS.getElementOffset(element),intElementWidth=element.offsetWidth,intElementHeight=element.offsetHeight,intElementTop=objElementOffset.top,intElementLeft=objElementOffset.left,intElementBottom=window.innerHeight-(intElementTop+intElementHeight),intElementRight=window.innerWidth-(intElementLeft+intElementWidth),intRoomAbove=window.innerHeight-(intElementBottom+intElementHeight),intRoomBelow=intElementBottom,intRoomLeft=window.innerWidth-(intElementRight+intElementWidth),intRoomRight=intElementRight;/*console.log(element, '\n' +
                'intElementWidth:   ' + intElementWidth + '\n' +
                'intElementHeight:  ' + intElementHeight + '\n' +
                'intElementTop:     ' + intElementTop + '\n' +
                'intElementBottom:  ' + intElementBottom + '\n' +
                'intElementLeft:    ' + intElementLeft + '\n' +
                'intElementRight:   ' + intElementRight + '\n' +
                'intRoomAbove:      ' + intRoomAbove + '\n' +
                'intRoomBelow:      ' + intRoomBelow + '\n' +
                'intRoomLeft:       ' + intRoomLeft + '\n' +
                'intRoomRight:      ' + intRoomRight);*/
return{'element':element,'objElementOffset':objElementOffset,'intElementWidth':intElementWidth,'intElementHeight':intElementHeight,'intElementTop':intElementTop,'intElementLeft':intElementLeft,'intElementBottom':intElementBottom,'intElementRight':intElementRight,'intRoomAbove':intRoomAbove,'intRoomBelow':intRoomBelow,'intRoomLeft':intRoomLeft,'intRoomRight':intRoomRight};};/*                                       ,--- the problem with this code is the DOM we get back is not 100% reliably inert. 
                                         V          To make it reliable I believe I have to change how my elements work.
GS.createDocumentFragment = function (strHTML) {
    'use strict';
    var element = document.createElement('div'),
        fragment = document.createDocumentFragment(),
        arrChildren = element.childNodes;
    
    // fill element with HTML
    element.innerHTML = strHTML;
    
    // append the element to the body (NECCESSARY FOR THE HTML TO BE INERT, I DON'T KNOW WHY -michael)
    document.body.appendChild(element);
    
    // transfer children from element to fragment
    while (arrChildren[0]) {
        fragment.appendChild(arrChildren[0]);
    }
    
    // remove element from the body
    document.body.removeChild(element);
    
    // return inert fragment
    return fragment;
};

GS.getDocumentFragmentHTML = function (fragment) {
    'use strict';
    var strHTML, i, len, arrChildren = fragment.children;
    
    for (strHTML = '', i = 0, len = arrChildren.length; i < len; i += 1) {
        strHTML += arrChildren[i].outerHTML;
    }
    
    return strHTML;
};
*/
/*tell papa if you uncomment
GS.createInertDOM = function (strHTML) {
    'use strict';
    var templateElement = document.createElement('template'), iframeElement;
    
    // if the content property is on a template element: no iframe neccessary
    if ('content' in templateElement) {
        templateElement.innerHTML = strHTML;
        
        return templateElement.content;
        
    // else: use iframe to create inert HTML
    } else {
        if (!document.getElementById('gs-inert-dom-generator')) {
            iframeElement = document.createElement('iframe');
            
            iframeElement.setAttribute('id', 'gs-inert-dom-generator');
            iframeElement.setAttribute('hidden', '');
            
            document.body.appendChild(iframeElement);
            
        } else {
            iframeElement = document.getElementById('gs-inert-dom-generator');
        }
        
        iframeElement.contentWindow.inertDOM = iframeElement.contentWindow.document.createElement('div');
        iframeElement.contentWindow.inertDOM.innerHTML = strHTML;
        
        return iframeElement.contentWindow.inertDOM;
    }
};

GS.getInertDOMHTML = function (inertDOM) {
    'use strict';
    var strHTML, i, len, arrChildren = inertDOM.children;
    
    for (strHTML = '', i = 0, len = arrChildren.length; i < len; i += 1) {
        strHTML += arrChildren[i].outerHTML;
    }
    
    return strHTML;
};
*/
(function(){'use strict';function getCellFromTarget(element){var currentElement=element;while(currentElement.nodeName!=='TD'&&currentElement.nodeName!=='TH'&&currentElement.nodeName!=='HTML'){currentElement=currentElement.parentNode;}
if(currentElement.nodeName!=='TD'&&currentElement.nodeName!=='TH'){return undefined;}
return currentElement;}
function selectHandler(tableElement,dragOrigin,dragCurrentCell,dragMode){var bolThead,bolFirstTh,arrRecords,arrCells,arrRecordsToAffect=[],arrCellsToAffect=[],arrNewSelection=[],arrCellsToRemoveFromSelection=[],i,len,intFrom,intTo;arrRecords=xtag.query(tableElement,'tr');arrCells=xtag.query(tableElement,'td, th');if(arrRecords.length>0){bolThead=Boolean(xtag.queryChildren(tableElement,'thead')[0]);if((bolThead&&arrRecords.length>1)||(!bolThead&&arrRecords>0)){if(bolThead){bolFirstTh=arrRecords[1].children[0].nodeName==='TH';}else{bolFirstTh=arrRecords[0].children[0].nodeName==='TH';}}
if(bolThead&&bolFirstTh&&dragOrigin.parentNode.rowIndex===0&&dragCurrentCell.parentNode.rowIndex===0&&dragOrigin.cellIndex===0&&dragCurrentCell.cellIndex===0){arrCellsToAffect=arrCells;}else if(bolFirstTh&&dragOrigin.cellIndex===0&&dragCurrentCell.cellIndex===0){arrRecordsToAffect=arrRecords.slice(Math.min(dragOrigin.parentNode.rowIndex,dragCurrentCell.parentNode.rowIndex),Math.max(dragOrigin.parentNode.rowIndex,dragCurrentCell.parentNode.rowIndex)+1);for(i=0,len=arrRecordsToAffect.length;i<len;i+=1){Array.prototype.push.apply(arrCellsToAffect,xtag.toArray(arrRecordsToAffect[i].children));}}else if(bolThead&&dragOrigin.parentNode.rowIndex===0&&dragCurrentCell.parentNode.rowIndex===0){intFrom=Math.min(dragOrigin.cellIndex,dragCurrentCell.cellIndex);intTo=Math.max(dragOrigin.cellIndex,dragCurrentCell.cellIndex)+1;for(i=0,len=arrRecords.length;i<len;i+=1){Array.prototype.push.apply(arrCellsToAffect,xtag.toArray(arrRecords[i].children).slice(intFrom,intTo));}}else{arrRecordsToAffect=arrRecords.slice(Math.min(dragOrigin.parentNode.rowIndex,dragCurrentCell.parentNode.rowIndex),Math.max(dragOrigin.parentNode.rowIndex,dragCurrentCell.parentNode.rowIndex)+1);intFrom=Math.min(dragOrigin.cellIndex,dragCurrentCell.cellIndex);intTo=Math.max(dragOrigin.cellIndex,dragCurrentCell.cellIndex)+1;for(i=0,len=arrRecordsToAffect.length;i<len;i+=1){Array.prototype.push.apply(arrCellsToAffect,xtag.toArray(arrRecordsToAffect[i].children).slice(intFrom,intTo));}}
if(dragMode==='select'){for(i=0,len=tableElement.selectionSelectedCells.length;i<len;i+=1){if(arrCellsToAffect.indexOf(tableElement.selectionSelectedCells[i])===-1){arrCellsToRemoveFromSelection.push(tableElement.selectionSelectedCells[i]);}}
tableElement.selectionSelectedCells=arrCellsToAffect;arrNewSelection=tableElement.selectedCells;for(i=0,len=arrCellsToAffect.length;i<len;i+=1){GS.listAdd(arrNewSelection,arrCellsToAffect[i]);}
for(i=0,len=arrCellsToRemoveFromSelection.length;i<len;i+=1){arrNewSelection.splice(arrNewSelection.indexOf(arrCellsToRemoveFromSelection[i]),1);}
tableElement.selectedCells=arrNewSelection;}else{arrNewSelection=tableElement.selectedCells;for(i=0,len=arrCellsToAffect.length;i<len;i+=1){if(arrNewSelection.indexOf(arrCellsToAffect[i])>-1){arrNewSelection.splice(arrNewSelection.indexOf(arrCellsToAffect[i]),1);}}
tableElement.selectedCells=arrNewSelection;}}}
function handleClipboardData(event,strCopyString){var clipboardData=event.clipboardData||window.clipboardData,strMime;if(!clipboardData){return;}
if(!clipboardData.setData){return;}
if(window.clipboardData&&window.clipboardData.getData){strMime='Text';}else if(event.clipboardData&&event.clipboardData.getData){strMime='text/plain';}
if(strCopyString){return clipboardData.setData(strMime,strCopyString)!==false;}else{return clipboardData.getData(strMime);}}
GS.makeTableSelectable=function(tableElement,bolSingleRecord){var copyElement;if(!tableElement||tableElement.nodeName!=='TABLE'){throw'GS.makeTableSelectable Error: you must provide a <table> element as the first parameter.';}
tableElement.setAttribute('prevent-text-selection','');Object.defineProperty(tableElement,'selectedCells',{get:function(){return xtag.query(this,'[selected]');},set:function(newValue){var i,len,intIdIndex,arrCells=this.selectedCells,arrRecords,cell_i,cell_len;for(i=0,len=arrCells.length;i<len;i+=1){arrCells[i].removeAttribute('selected');}
arrCells=xtag.query(this,'[selected-secondary]');for(i=0,len=arrCells.length;i<len;i+=1){arrCells[i].removeAttribute('selected-secondary');}
if(typeof newValue==='object'&&newValue.length===undefined){arrCells=[newValue];}else{arrCells=newValue;}
for(i=0,len=arrCells.length;i<len;i+=1){arrCells[i].setAttribute('selected','');}
arrRecords=this.selectedRecords;for(i=0,len=arrRecords.length;i<len;i+=1){arrCells=arrRecords[i].children;for(cell_i=0,cell_len=arrCells.length;cell_i<cell_len;cell_i+=1){if(!arrCells[cell_i].hasAttribute('selected')){arrCells[cell_i].setAttribute('selected-secondary','');}}}
GS.triggerEvent(this,'after_selection');}});Object.defineProperty(tableElement,'selectedRecords',{get:function(){var i,len,intRecordIndex=-1,arrRecord=[],selected=this.selectedCells;for(i=0,len=selected.length;i<len;i+=1){if(selected[i].parentNode.rowIndex>intRecordIndex&&selected[i].parentNode.parentNode.nodeName!=='THEAD'){intRecordIndex=selected[i].parentNode.rowIndex;arrRecord.push(selected[i].parentNode);}}
return arrRecord;},set:function(newValue){var i,len,cell_i,cell_len,intIdIndex,arrCells=this.selectedCells,arrRecords,arrCellChildren;for(i=0,len=arrCells.length;i<len;i+=1){arrCells[i].removeAttribute('selected');}
arrCells=xtag.query(this,'[selected-secondary]');for(i=0,len=arrCells.length;i<len;i+=1){arrCells[i].removeAttribute('selected-secondary');}
if(typeof newValue==='object'&&newValue.length===undefined){arrRecords=[newValue];}else{arrRecords=newValue;}
for(i=0,len=arrRecords.length,arrCells=[];i<len;i+=1){arrCellChildren=arrRecords[i].children;for(cell_i=0,cell_len=arrCellChildren.length;cell_i<cell_len;cell_i+=1){arrCells.push(arrCellChildren[cell_i]);}}
this.selectedCells=arrCells;GS.triggerEvent(this,'after_selection');}});if(evt.touchDevice||bolSingleRecord===true){tableElement.addEventListener(evt.mousedown,function(event){var target=event.target;if(target.nodeName==='TD'||target.nodeName==='TH'||getCellFromTarget(target)){tableElement.selectedCells=[];if(GS.findParentTag(target,'tr')){tableElement.selectedCells=GS.findParentTag(target,'tr').children;}}});}else{tableElement.addEventListener(evt.mousedown,function(event){var target=event.target,cellFromTarget=getCellFromTarget(target),closestCell,arrSelectedCells,i,len;if(GS.findParentTag(event.target,'table')){if(cellFromTarget){closestCell=cellFromTarget;}
if(closestCell){tableElement.dragAllowed=true;tableElement.dragCurrentCell=closestCell;tableElement.selectionSelectedCells=[];if(event.shiftKey&&tableElement.selectionPreviousOrigin){if(tableElement.selectionPreviousSelectedCells){arrSelectedCells=tableElement.selectedCells;for(i=0,len=tableElement.selectionPreviousSelectedCells.length;i<len;i+=1){arrSelectedCells.splice(arrSelectedCells.indexOf(tableElement.selectionPreviousSelectedCells[i]),1);}
tableElement.selectedCells=arrSelectedCells;}
tableElement.dragOrigin=tableElement.selectionPreviousOrigin;tableElement.dragMode='select';}else if(!event.shiftKey&&(event.metaKey||event.ctrlKey)&&!closestCell.hasAttribute('selected')){tableElement.dragOrigin=closestCell;tableElement.dragMode='select';}else if(!event.shiftKey&&(event.metaKey||event.ctrlKey)&&closestCell.hasAttribute('selected')){tableElement.dragOrigin=closestCell;tableElement.dragMode='deselect';}else{tableElement.selectedCells=[];tableElement.dragOrigin=closestCell;tableElement.dragMode='select';}
selectHandler(tableElement,tableElement.dragOrigin,tableElement.dragCurrentCell,tableElement.dragMode);}}});tableElement.addEventListener(evt.mousemove,function(event){var target,closestCell,cellFromTarget;if(event.which!==0){target=event.target;cellFromTarget=getCellFromTarget(target);if(cellFromTarget){closestCell=cellFromTarget;}
if(tableElement.dragAllowed&&tableElement.dragCurrentCell!==closestCell){tableElement.dragCurrentCell=getCellFromTarget(closestCell);selectHandler(tableElement,tableElement.dragOrigin,tableElement.dragCurrentCell,tableElement.dragMode);}}else{tableElement.dragAllowed=false;tableElement.selectionPreviousOrigin=tableElement.dragOrigin;tableElement.selectionPreviousSelectedCells=tableElement.selectionSelectedCells;}});tableElement.addEventListener(evt.mouseup,function(event){tableElement.dragAllowed=false;if(tableElement.dragMode==='select'){tableElement.selectionPreviousOrigin=tableElement.dragOrigin;tableElement.selectionPreviousSelectedCells=tableElement.selectionSelectedCells;}});}
copyElement=document.createElement('input');copyElement.value='Firefox compatibility input';copyElement.setAttribute('gs-dynamic','');copyElement.setAttribute('style','position: fixed; left: 50%; top: 50%; z-index: -5000; opacity: 0.00000001;');tableElement.appendChild(copyElement);tableElement.tabIndex=0;tableElement.addEventListener('focus',function(event){if(document.activeElement===tableElement){tableElement.focus();GS.setInputSelection(copyElement,0,'Firefox compatibility input'.length);}});document.body.addEventListener('copy',function(event){var elementClosestTable=GS.findParentTag(document.activeElement,'table'),strCopyString,i,len,cell_i,cell_len,arrSelected,intFromRecord=9999999,intFromCell=9999999,intToRecord=0,intToCell=0,strCellText,arrRecords,arrCells,strRecordString;if(elementClosestTable===tableElement&&(document.activeElement.value==='Firefox compatibility input'||document.activeElement.selectionStart===document.activeElement.selectionEnd)){arrSelected=tableElement.selectedCells;if(arrSelected.length>0){for(i=0,len=arrSelected.length;i<len;i+=1){if(arrSelected[i].parentNode.rowIndex<intFromRecord){intFromRecord=arrSelected[i].parentNode.rowIndex;}
if(arrSelected[i].cellIndex<intFromCell){intFromCell=arrSelected[i].cellIndex;}
if(arrSelected[i].parentNode.rowIndex+1>intToRecord){intToRecord=arrSelected[i].parentNode.rowIndex+1;}
if(arrSelected[i].cellIndex+1>intToCell){intToCell=arrSelected[i].cellIndex+1;}}
arrRecords=xtag.query(tableElement,'tr');strCopyString='';for(i=intFromRecord,len=intToRecord;i<len;i+=1){arrCells=arrRecords[i].children;for(cell_i=intFromCell,cell_len=intToCell,strRecordString='';cell_i<cell_len;cell_i+=1){if(arrCells[cell_i].hasAttribute('selected')){if(arrCells[cell_i].nodeName==='TH'&&arrCells[cell_i].firstElementChild){strCellText=arrCells[cell_i].firstElementChild.textValue||arrCells[cell_i].firstElementChild.value||(arrCells[cell_i].firstElementChild.checked||'').toString()||arrCells[cell_i].firstElementChild.textContent.trim();}else if(arrCells[cell_i].lastElementChild){strCellText=arrCells[cell_i].lastElementChild.textValue||arrCells[cell_i].lastElementChild.value||(arrCells[cell_i].lastElementChild.checked||'').toString()||arrCells[cell_i].lastElementChild.textContent.trim();}else{strCellText=arrCells[cell_i].textContent.trim();}}else{strCellText='';}
strRecordString+=(cell_i!==intFromCell?'\t':'')+(strCellText||'');}
if(strRecordString.trim()){strCopyString+=strRecordString;}
if(i+1!==len&&strRecordString.trim()){strCopyString+='\n';}}}
if(strCopyString){if(handleClipboardData(event,strCopyString)){event.preventDefault(event);}}}});};})();window.addEventListener('design-register-element',function(){'use strict';registerDesignSnippet('GS.qryFromJSON','GS.qryFromJSON','GS.qryFromJSON(${0:jsnObjectToConvert});');registerDesignSnippet('GS.qryToJSON','GS.qryToJSON','GS.qryToJSON(${0:strQueryStringToConvert});');registerDesignSnippet('GS.qryToWhere','GS.qryToWhere','GS.qryToWhere(${1:strQueryString}, ${2:strColumnNameInQueryString}, ${0:strColumnNameInTarget});');registerDesignSnippet('GS.qryGetKeys','GS.qryGetKeys','GS.qryGetKeys(${0:queryString});');registerDesignSnippet('GS.qryGetVals','GS.qryGetVals','GS.qryGetVals(${0:queryString});');registerDesignSnippet('GS.qryGetVal','GS.qryGetVal','GS.qryGetVal(${1:queryString}, \'${0:keyToGet}\');');registerDesignSnippet('GS.qrySetVal','GS.qrySetVal','GS.qrySetVal(${1:queryString}, \'${0:newKeyValuePair}\');');registerDesignSnippet('GS.qryDeleteKey','GS.qryDeleteKey','GS.qryDeleteKey(${1:queryString}, \'${0:keyToDelete}\');');registerDesignSnippet('GS.getQueryString','GS.getQueryString','GS.getQueryString();');});GS.qryFromJSON=function(jsnToConvert){'use strict';var key,strRet='',strType,currentValue;for(key in jsnToConvert){currentValue=jsnToConvert[key];strType=typeof currentValue;if(strType==='number'||strType==='string'||strType==='boolean'){strRet+=(strRet===''?'':'&')+key+'='+encodeURIComponent(jsnToConvert[key]);}else if(currentValue===null||currentValue===undefined){strRet+=(strRet===''?'':'&')+key+'=';}else if(typeof currentValue!=='object'){throw'GS.qryFromJSON Error: Invalid value: '+JSON.stringify(currentValue);}}
return strRet;};GS.qryToJSON=function(strQueryString){'use strict';var arrKeyValueList=[],jsnQueryString={},strKeyValue,i,len,strKey,strValue,jsnNavigator,arrSubParts,sub_i,sub_len;if(strQueryString){arrKeyValueList=strQueryString.split('&');for(i=0,len=arrKeyValueList.length;i<len;i+=1){strKeyValue=arrKeyValueList[i];strKey=strKeyValue.substring(0,strKeyValue.indexOf('='));strValue=decodeURIComponent(strKeyValue.substring(strKeyValue.indexOf('=')+1));jsnQueryString[strKey]=strValue;if(strKey.indexOf('.')>-1){arrSubParts=strKey.split('.');jsnNavigator=jsnQueryString;for(sub_i=0,sub_len=arrSubParts.length;sub_i<sub_len;sub_i+=1){if(sub_i<sub_len-1){jsnNavigator[arrSubParts[sub_i]]=jsnNavigator[arrSubParts[sub_i]]||{};}else{jsnNavigator[arrSubParts[sub_i]]=jsnNavigator[arrSubParts[sub_i]]||strValue;}
jsnNavigator=jsnNavigator[arrSubParts[sub_i]];}}}}
return jsnQueryString;};GS.qryToWhere=function(strQueryString,strColumnNameInQueryString,strColumnNameInTarget){'use strict';var strWhere='',key,jsnArgs;if(strColumnNameInQueryString){strColumnNameInTarget=(strColumnNameInTarget||strColumnNameInQueryString);if(!isNaN(GS.qryGetVal(strQueryString,strColumnNameInQueryString))){strWhere=strColumnNameInTarget+'='+GS.qryGetVal(strQueryString,strColumnNameInQueryString);}else{strWhere=strColumnNameInTarget+'::text = \''+encodeURIComponent(GS.qryGetVal(strQueryString,strColumnNameInQueryString))+'\'::text';}}else{jsnArgs=GS.qryToJSON(strQueryString);for(key in jsnArgs){if(jsnArgs.hasOwnProperty(key)){if(!isNaN(jsnArgs[key])){strWhere+=(strWhere===''?'':' AND ')+key+'='+jsnArgs[key];}else{strWhere+=(strWhere===''?'':' AND ')+key+'::text = \''+encodeURIComponent(jsnArgs[key])+'\'::text';}}}}
return strWhere;};GS.qryGetKeys=function(strQueryString){'use strict';var arrKeyValueList=[],arrKeys=[],i,len,strKeyValue;if(strQueryString){arrKeyValueList=strQueryString.split('&');for(i=0,len=arrKeyValueList.length;i<len;i+=1){strKeyValue=arrKeyValueList[i];arrKeys.push(strKeyValue.substring(0,strKeyValue.indexOf('=')));}}
return arrKeys;};GS.qryGetVals=function(strQueryString){'use strict';var arrKeyValueList=[],arrValues=[],i,len,strKeyValue;if(strQueryString){arrKeyValueList=strQueryString.split('&');for(i=0,len=arrKeyValueList.length;i<len;i+=1){strKeyValue=arrKeyValueList[i];arrValues.push(strKeyValue.substring(strKeyValue.indexOf('=')+1));}}
return arrValues;};GS.qryGetVal=function(strQueryString,strKey){'use strict';var arrKeyValueList,strSlice,i,len;if(strQueryString){arrKeyValueList=strQueryString.split('&');for(i=0,len=arrKeyValueList.length;i<len;i=i+1){strSlice=arrKeyValueList[i];if(strSlice.split('=')[0]===strKey){return decodeURIComponent(strSlice.substring(strSlice.indexOf('=')+1));}}}
return'';};GS.qrySetVal=function(strQueryString,strKeyValue){'use strict';strQueryString=GS.qryDeleteKey(strQueryString,strKeyValue.split('=')[0]);strQueryString=strQueryString+(strQueryString?'&':'')+strKeyValue;return strQueryString;};GS.qryDeleteKey=function(strQueryString,strKey){'use strict';var arrKeyValueList,strSlice,i,len;if(strQueryString){arrKeyValueList=strQueryString.split('&');for(i=0,len=arrKeyValueList.length;i<len;i=i+1){strSlice=arrKeyValueList[i];if(strSlice.split('=')[0]===strKey){arrKeyValueList.splice(i,1);break;}}
return arrKeyValueList.join('&');}
return'';};GS.getQueryString=function(){'use strict';return window.location.search.substring(1);};window.addEventListener('design-register-element',function(){'use strict';registerDesignSnippet('GS.userChangePassword','GS.userChangePassword','GS.userChangePassword();');registerDesignSnippet('GS.superChangePassword','GS.superChangePassword','GS.superChangePassword();');registerDesignSnippet('GS.superUserLogin','GS.superUserLogin','GS.superUserLogin(${0:loggedInCallback});');registerDesignSnippet('GS.normalUserLogin','GS.normalUserLogin','GS.normalUserLogin(${0:loggedInCallback});');});(function(){function changePassword(strLink,strRank){var templateElement=document.createElement('template');templateElement.innerHTML=ml(function(){/*
            <gs-page>
                <gs-header><center><h3>Change {{RANK}} Password</h3></center></gs-header>
                <gs-body padded>
                    <div id="pword-error" style="color: #FF0000;"></div>
                    <label for="old-password">Old Password:</label>
                    <gs-text id="old-password" type="password"></gs-text>
                    <label for="new-password">New Password:</label>
                    <gs-text id="new-password" type="password"></gs-text>
                    <label for="new-password-confirm">Confirm New Password:</label>
                    <gs-text id="new-password-confirm" type="password"></gs-text>
                </gs-body>
                <gs-footer>
                    <gs-grid>
                        <gs-block><gs-button dialogclose>Cancel</gs-button></gs-block>
                        <gs-block><gs-button id="button-change-password" disabled>Change {{RANK}} Password</gs-button></gs-block>
                    </gs-grid>
                </gs-footer>
            </gs-page>
        */}).replace(/\{\{RANK\}\}/gim,strRank);GS.openDialog(templateElement,function(){var dialog=this,keydownHandler;keydownHandler=function(event){var intKeyCode=event.which||event.keyCode;if(intKeyCode===13&&document.getElementById('old-password').value&&document.getElementById('new-password').value&&document.getElementById('new-password-confirm').value){GS.triggerEvent(document.getElementById('button-change-password'),'click');}else{if(document.getElementById('old-password').value&&document.getElementById('new-password').value&&document.getElementById('new-password-confirm').value){document.getElementById('button-change-password').removeAttribute('disabled');}else{document.getElementById('button-change-password').setAttribute('disabled');}}};document.getElementById('old-password').addEventListener('keydown',keydownHandler);document.getElementById('new-password').addEventListener('keydown',keydownHandler);document.getElementById('new-password-confirm').addEventListener('keydown',keydownHandler);document.getElementById('button-change-password').addEventListener('click',function(){var newPassword,parameters;if(document.getElementById('new-password').value===document.getElementById('new-password-confirm').value){parameters='action=change_pw'+'&password_old='+encodeURIComponent(document.getElementById('old-password').value)+'&password_new='+encodeURIComponent(document.getElementById('new-password').value);document.getElementById('old-password').value='';document.getElementById('new-password').value='';document.getElementById('new-password-confirm').value='';GS.ajaxJSON('/v1/'+strLink+'/auth',parameters,function(data,error){if(!error){GS.pushMessage('Password Successfully Changed',1000);GS.closeDialog(dialog,'change');}else{document.getElementById('pword-error').textContent=data.error_text;}});}else{document.getElementById('pword-error').textContent='New Password Doesn\'t Match Confirm New Password.';}});});}
GS.userChangePassword=function(){changePassword('env','User');};GS.superChangePassword=function(){changePassword('postage','SUPERUSER');};})();GS.superUserLogin=function(loggedInCallback,strOldError){'use strict';GS.removeAllLoaders();if(!document.getElementById('postage-uname')){GS.ajaxJSON('/v1/env/action_info','',function(data,error){var templateElement=document.createElement('template');if(!error&&data.dat&&data.dat.superusername){if(typeof loggedInCallback==='function'){loggedInCallback(data.dat);}}else{templateElement.innerHTML=ml(function(){/*
                    <gs-page>
                        <gs-header><center><h3>Login as a Superuser</h3></center></gs-header>
                        <gs-body padded>
                            You are not currently logged in as a superuser, please fill in the login form below.
                            <br /><br />
                            <label for="postage-uname">Username:</label>
                            <gs-text id="postage-uname" autocapitalize="off" autocomplete="off" autocorrect="off"></gs-text>
                            <label for="postage-pword">Password:</label>
                            <gs-text id="postage-pword" type="password"></gs-text>
                            {{ERROR}}
                        </gs-body>
                        <gs-footer>
                            <gs-grid>
                                <gs-block><gs-button dialogclose>Cancel</gs-button></gs-block>
                                <gs-block><gs-button id="postage-login" disabled>Log In</gs-button></gs-block>
                            </gs-grid>
                        </gs-footer>
                    </gs-page>
                */}).replace('{{ERROR}}',(strOldError?'<br /><div style="color: #FF0000">'+strOldError+'</div>':''));if(GS.getCookie('postage_uname')){xtag.query(templateElement.content,'#postage-uname')[0].setAttribute('value',decodeURIComponent(GS.getCookie('postage_uname')));xtag.query(templateElement.content,'#postage-pword')[0].setAttribute('autofocus','');}else{xtag.query(templateElement.content,'#postage-uname')[0].setAttribute('autofocus','');}
GS.openDialog(templateElement,function(){var dialog=this;document.getElementById('postage-pword').addEventListener('keydown',function(event){var intKeyCode=event.which||event.keyCode;if(intKeyCode===13){GS.triggerEvent(document.getElementById('postage-login'),'click');}
if(this.value){document.getElementById('postage-login').removeAttribute('disabled');}else{document.getElementById('postage-login').setAttribute('disabled','');}});document.getElementById('postage-pword').addEventListener('keyup',function(){if(this.value){document.getElementById('postage-login').removeAttribute('disabled');}else{document.getElementById('postage-login').setAttribute('disabled','');}});document.getElementById('postage-login').addEventListener('click',function(){var strUserName=document.getElementById('postage-uname').value;if(document.getElementById('postage-pword').value){GS.addLoader('super-log-in','Logging In...');GS.ajaxJSON('/v1/postage/auth/','action=login&session_user='+encodeURIComponent(GS.getCookie('greyspots_uname'))+'&superusername='+encodeURIComponent(strUserName)+'&superpassword='+encodeURIComponent(document.getElementById('postage-pword').value),function(data,error){GS.removeLoader('super-log-in');GS.closeDialog(dialog,'');if(!error){GS.setCookie('postage_uname',strUserName,30);if(typeof loggedInCallback==='function'){GS.superUserLogin(loggedInCallback);}}else{GS.superUserLogin(loggedInCallback,data.error_text);}});}});});}});}};GS.normalUserLogin=function(loggedInCallback,strOldError,strDefaultSubDomain){'use strict';GS.removeAllLoaders();if(!document.getElementById('normal-uname')){GS.ajaxJSON('/v1/env/action_info','',function(data,error){var templateElement=document.createElement('template');if(!error&&data.dat){if(typeof loggedInCallback==='function'){loggedInCallback(data.dat,strDefaultSubDomain);}}else{templateElement.innerHTML=ml(function(){/*
                    <gs-page>
                        <gs-header><center><h3>Login</h3></center></gs-header>
                        <gs-body padded>
                            You are not currently logged in, please fill in the login form below.<br /><br />
                            <label for="normal-uname">Username:</label>
                            <gs-text id="normal-uname" autocapitalize="off" autocomplete="off" autocorrect="off"></gs-text>
                            <label for="normal-pword">Password:</label>
                            <gs-text id="normal-pword" type="password"></gs-text>
                            {{ERROR}}
                        </gs-body>
                        <gs-footer>
                            <gs-grid>
                                <gs-block><gs-button dialogclose>Cancel</gs-button></gs-block>
                                <gs-block><gs-button id="normal-login" disabled>Log In</gs-button></gs-block>
                            </gs-grid>
                        </gs-footer>
                    </gs-page>
                */}).replace('{{ERROR}}',(strOldError?'<br /><div style="color: #FF0000">'+strOldError+'</div>':''));if(GS.getCookie('greyspots_uname')){xtag.query(templateElement.content,'#normal-uname')[0].setAttribute('value',decodeURIComponent(GS.getCookie('greyspots_uname')));xtag.query(templateElement.content,'#normal-pword')[0].setAttribute('autofocus','');}else{xtag.query(templateElement.content,'#normal-uname')[0].setAttribute('autofocus','');}
GS.openDialog(templateElement,function(){var dialog=this;document.getElementById('normal-pword').addEventListener('keydown',function(event){var intKeyCode=event.which||event.keyCode;if(intKeyCode===13){GS.triggerEvent(document.getElementById('normal-login'),'click');}
if(this.value){document.getElementById('normal-login').removeAttribute('disabled');}else{document.getElementById('normal-login').setAttribute('disabled','');}});document.getElementById('normal-pword').addEventListener('keyup',function(){if(this.value){document.getElementById('normal-login').removeAttribute('disabled');}else{document.getElementById('normal-login').setAttribute('disabled','');}});document.getElementById('normal-login').addEventListener('click',function(){var strUserName=document.getElementById('normal-uname').value,strLink;if(document.getElementById('normal-pword').value){GS.addLoader('log-in','Logging In...');GS.ajaxJSON('/v1/env/auth','action=login'+'&username='+encodeURIComponent(document.getElementById('normal-uname').value)+'&password='+encodeURIComponent(document.getElementById('normal-pword').value),function(data,error){GS.removeLoader('log-in');GS.closeDialog(dialog,'');if(!error){GS.setCookie('greyspots_uname',strUserName,30);if(typeof loggedInCallback==='function'){if(window.location.hostname.substring(0,window.location.hostname.indexOf('.'))===strDefaultSubDomain){GS.normalUserLogin(loggedInCallback,'',strDefaultSubDomain);}else{loggedInCallback(data.dat,strDefaultSubDomain);}}}else{GS.normalUserLogin(loggedInCallback,data.error_text,strDefaultSubDomain);}});}});});}});}};window.addEventListener('design-register-element',function(){'use strict';});(function(){'use strict';function webSocketNormalizeError(data){var jsnRet={'error_title':'','error_hint':'','error_text':'','original_data':data};data=data||{};if(data.code===1001){jsnRet.error_title='Going Away';jsnRet.error_hint='The server or client closed the connection because of server shutdown or navigating away from the page.';}else if(data.code===1002){jsnRet.error_title='Protocol';jsnRet.error_hint='The connection was closed because of error related to the protocol used.';}else if(data.code===1003){jsnRet.error_title='Unsupported Data';jsnRet.error_hint='The connection was closed because the data that was received was not it a supported format.';}else if(data.code===1005){jsnRet.error_title='No Status Received';jsnRet.error_hint='The connection was closed because it received an empty status.';}else if(data.code===1006){jsnRet.error_title='Abnormal Closure';jsnRet.error_hint='The connection was closed because of abnormal circumstances.';}else if(data.code===1007){jsnRet.error_title='Invalid Payload Data';jsnRet.error_hint='The connection was closed because the payload type did not match the defined message type.';}else if(data.code===1008){jsnRet.error_title='Policy Violation';jsnRet.error_hint='The connection was closed because policy governing this connection was violated.';}else if(data.code===1009){jsnRet.error_title='Message Too Big';jsnRet.error_hint='The connection was closed because the message was too long for it to proccess.';}else if(data.code===1010){jsnRet.error_title='Mandatory Extenstion';jsnRet.error_hint='The client closed the connection because the server was supposed to negotiate extension(s) but it did not.';}else if(data.code===1011){jsnRet.error_title='Internal Server';jsnRet.error_hint='The server closed the connection because it could not fulfill the request.';}else if(data.code===1015){jsnRet.error_title='TLS handshake';jsnRet.error_hint='The connection was closed because the handshake failed.';}
jsnRet.error_text=data.reason||'';return jsnRet;}
GS.webSocketErrorDialog=function(jsnError,tryAgainCallback,cancelCallback){var templateElement=document.createElement('template'),strHTML;templateElement.setAttribute('data-theme','error');strHTML=ml(function(){/*
            <gs-page>
                <gs-header><center><h3>There was an error!</h3></center></gs-header>
                <gs-body padded>
                    {{HTML}}
                </gs-body>
                <gs-footer>{{BUTTONS}}</gs-footer>
            </gs-page>
        */}).replace('{{HTML}}','<pre style="white-space: pre-wrap;">'+'There was '+(['A','E','I','O','U'].indexOf(jsnError.error_title[0])===-1?'a':'an')+' "'+jsnError.error_title+'" error:'+
(jsnError.error_text?'<br /><br />'+jsnError.error_text:'')+
(jsnError.error_hint?'<br /><br />'+jsnError.error_hint:'')+
(jsnError.error_addin?'<br /><br />'+jsnError.error_addin:'')+'</pre>');if(typeof tryAgainCallback==='function'){templateElement.innerHTML=strHTML.replace('{{BUTTONS}}','<gs-grid>'+'  <gs-block><gs-button dialogclose>Cancel</gs-button></gs-block>'+'  <gs-block><gs-button dialogclose>Try Again</gs-button></gs-block>'+'</gs-grid>');GS.openDialog(templateElement,'',function(event,strAnswer){if(strAnswer==='Try Again'){tryAgainCallback(strAnswer);}else{if(typeof cancelCallback==='function'){cancelCallback(strAnswer);}}});}else{templateElement.innerHTML=strHTML.replace('{{BUTTONS}}','<gs-button dialogclose>Ok</gs-button>');GS.openDialog(templateElement);}};GS.openWebSocket=function(strPath,callback,onMessageCallback,protocol){var socket=new WebSocket('wss://'+window.location.host+strPath,protocol);socket.onopen=function(event){if(typeof callback==='function'){callback.apply(socket,[event]);}};socket.onerror=function(){socket.onclose=function(event){if(typeof callback==='function'){callback.apply(socket,[webSocketNormalizeError(event),'error']);}};};socket.onmessage=function(event){if(typeof onMessageCallback==='function'){onMessageCallback.apply(socket,[event]);}};return socket;};GS.messageWebSocket=function(socket,strParameters){socket.send(strParameters);};GS.closeWebSocket=function(socket,onCloseCallback){socket.onclose=function(){if(typeof onCloseCallback==='function'){onCloseCallback.apply(socket);}};socket.close();};})();window.addEventListener('design-register-element',function(){'use strict';registerDesignSnippet('GS.rightPad','GS.rightPad','GS.rightPad(${1:stringToPad}, \'${2:stringToPadWith}\', ${0:lengthToPadTo});');registerDesignSnippet('GS.leftPad','GS.leftPad','GS.leftPad(${1:stringToPad}, \'${2:stringToPadWith}\', ${0:lengthToPadTo});');registerDesignSnippet('GS.pxToEm','GS.pxToEm','GS.pxToEm(${1:elementToTestIn}, ${0:pxToConvert});');registerDesignSnippet('GS.emToPx','GS.emToPx','GS.emToPx(${1:elementToTestIn}, ${0:emToConvert});');registerDesignSnippet('GS.keyCode','GS.keyCode','GS.keyCode(\'${0:characterToGetTheKeyCodeOf}\');');registerDesignSnippet('GS.getStyle','GS.getStyle','GS.getStyle(${1:element}, \'${0:CSSProperty}\');');registerDesignSnippet('GS.listAdd','GS.listAdd','GS.listAdd(${1:arrayToAddTo}, \'${0:valueToAddIfUnique}\');');registerDesignSnippet('GS.triggerEvent','GS.triggerEvent','GS.triggerEvent(${1:target}, \'${2:eventName}\', ${0:jsnModifiers});');registerDesignSnippet('GS.strToTitle','GS.strToTitle','GS.strToTitle(${0:valueToConvert});');registerDesignSnippet('GS.mousePosition','GS.mousePosition','GS.mousePosition(${0:event});');registerDesignSnippet('GS.GUID','GS.GUID','GS.GUID();');registerDesignSnippet('GS.safeDecodeURIComponent','GS.safeDecodeURIComponent','GS.safeDecodeURIComponent(${0:valueToDecode});');registerDesignSnippet('GS.getTextHeight','GS.getTextHeight','GS.getTextHeight(${1:elementToTestIn}, ${0:bolNormalLineHeight});');registerDesignSnippet('GS.scrollParent','GS.scrollParent','GS.scrollParent(${0:elementToStartFrom});');registerDesignSnippet('GS.scrollIntoView','GS.scrollIntoView','GS.scrollIntoView(${0:elementToScrollIntoView});');registerDesignSnippet('GS.envGetCell','GS.envGetCell','GS.envGetCell(${1:envelopeData}, ${2:recordNumber}, \'${0:columnName}\');');registerDesignSnippet('GS.trim','GS.trim','GS.trim(${1:stringToBeTrimmed}, \'${0:stringToTrimOff}\');');registerDesignSnippet('GS.setCookie','GS.setCookie','GS.setCookie(\'${1:cookieName}\', ${2:newValue}, ${0:daysUntilExpire});');registerDesignSnippet('GS.getCookie','GS.getCookie','GS.getCookie(\'${1:cookieName}\');');registerDesignSnippet('GS.pushState','GS.pushState','GS.pushState(${1:stateObj}, ${2:title}, ${0:newURL});');registerDesignSnippet('GS.replaceState','GS.replaceState','GS.replaceState(${1:stateObj}, ${2:title}, ${0:newURL});');registerDesignSnippet('GS.searchToWhere','GS.searchToWhere','GS.searchToWhere(\'${1:columns}\', ${0:searchClause});');registerDesignSnippet('GS.pushQueryString','GS.pushQueryString','GS.pushQueryString(${0:newQueryString});');registerDesignSnippet('GS.iconList','GS.iconList','GS.iconList();');registerDesignSnippet('GS.lorem','GS.lorem','GS.lorem();');});GS.rightPad=function(str,padString,padToLength){'use strict';str=String(str);while(str.length<padToLength){str+=padString;}
return str;};GS.leftPad=function(str,padString,padToLength){'use strict';str=String(str);while(str.length<padToLength){str=padString+str;}
return str;};GS.pxToEm=function(elementScope,fromPX){'use strict';var intPX=parseFloat(fromPX),heightTestElement=document.createElement('div'),intElementHeight;elementScope=elementScope||document.body;heightTestElement.style.fontSize='1em';heightTestElement.style.margin='0';heightTestElement.style.padding='0';heightTestElement.style.lineHeight='1';heightTestElement.style.border='0';heightTestElement.innerHTML='a';elementScope.appendChild(heightTestElement);intElementHeight=heightTestElement.offsetHeight;elementScope.removeChild(heightTestElement);return parseFloat((intPX/intElementHeight).toFixed(8),10);};GS.emToPx=function(elementScope,fromEM){'use strict';var intEM=parseFloat(fromEM),heightTestElement=document.createElement('div'),intElementHeight;elementScope=elementScope||document.body;heightTestElement.style.fontSize='1em';heightTestElement.style.margin='0';heightTestElement.style.padding='0';heightTestElement.style.lineHeight='1';heightTestElement.style.border='0';heightTestElement.innerHTML='a';elementScope.appendChild(heightTestElement);intElementHeight=heightTestElement.offsetHeight;elementScope.removeChild(heightTestElement);return Math.round(intEM*intElementHeight);};GS.keyCode=function(inChar){"use strict";/*
	Key 	Code
backspace 	8
tab 	9
enter 	13
shift 	16
ctrl 	17
alt 	18
pause/break 	19
caps lock 	20
escape 	27
(space) 	32
page up 	33
page down 	34
end 	35
home 	36
left arrow 	37
up arrow 	38
right arrow 	39
down arrow 	40
insert 	45
delete 	46
0 	48
1 	49
2 	50
3 	51
4 	52
5 	53
6 	54
7 	55
8 	56
9 	57
a 	65
b 	66
c 	67
d 	68

Key 	Code
e 	69
f 	70
g 	71
h 	72
i 	73
j 	74
k 	75
l 	76
m 	77
n 	78
o 	79
p 	80
q 	81
r 	82
s 	83
t 	84
u 	85
v 	86
w 	87
x 	88
y 	89
z 	90
left window key 	91
right window key 	92
select key 	93
numpad 0 	96
numpad 1 	97
numpad 2 	98
numpad 3 	99
numpad 4 	100
numpad 5 	101
numpad 6 	102
numpad 7 	103
*/
inChar=inChar.toLowerCase();return'\b'==inChar?'8':'backspace'==inChar?'8':'\t'==inChar?'9':'tab'==inChar?'9':'\r'==inChar?'13':'\n'==inChar?'13':'enter'==inChar?'13':'return'==inChar?'13':'newline'==inChar?'13':'shift'==inChar?'16':'ctrl'==inChar?'17':'alt'==inChar?'18':'pause/break'==inChar?'19':'caps lock'==inChar?'20':'escape'==inChar?'27':'space'==inChar?'32':' '==inChar?'32':'page up'==inChar?'33':'page down'==inChar?'34':'end'==inChar?'35':'home'==inChar?'36':'left arrow'==inChar?'37':'up arrow'==inChar?'38':'right arrow'==inChar?'39':'down arrow'==inChar?'40':'insert'==inChar?'45':'delete'==inChar?'46':'0'==inChar?'48':'1'==inChar?'49':'2'==inChar?'50':'3'==inChar?'51':'4'==inChar?'52':'5'==inChar?'53':'6'==inChar?'54':'7'==inChar?'55':'8'==inChar?'56':'9'==inChar?'57':'a'==inChar?'65':'b'==inChar?'66':'c'==inChar?'67':'d'==inChar?'68':'e'==inChar?'69':'f'==inChar?'70':'g'==inChar?'71':'h'==inChar?'72':'i'==inChar?'73':'j'==inChar?'74':'k'==inChar?'75':'l'==inChar?'76':'m'==inChar?'77':'n'==inChar?'78':'o'==inChar?'79':'p'==inChar?'80':'q'==inChar?'81':'r'==inChar?'82':'s'==inChar?'83':'t'==inChar?'84':'u'==inChar?'85':'v'==inChar?'86':'w'==inChar?'87':'x'==inChar?'88':'y'==inChar?'89':'z'==inChar?'90':'left window key'==inChar?'91':'right window key'==inChar?'92':'select key'==inChar?'93':'numpad 0'==inChar?'96':'numpad 1'==inChar?'97':'numpad 2'==inChar?'98':'numpad 3'==inChar?'99':'numpad 4'==inChar?'100':'numpad 5'==inChar?'101':'numpad 6'==inChar?'102':'numpad 7'==inChar?'103':'numpad 8'==inChar?'104':'numpad 9'==inChar?'105':'multiply'==inChar?'106':'add'==inChar?'107':'+'==inChar?'107':'subtract'==inChar?'109':'-'==inChar?'109':'decimal point'==inChar?'110':'divide'==inChar?'111':'f1'==inChar?'112':'f2'==inChar?'113':'f3'==inChar?'114':'f4'==inChar?'115':'f5'==inChar?'116':'f6'==inChar?'117':'f7'==inChar?'118':'f8'==inChar?'119':'f9'==inChar?'120':'f10'==inChar?'121':'f11'==inChar?'122':'f12'==inChar?'123':'num lock'==inChar?'144':'scroll lock'==inChar?'145':'semi-colon'==inChar?'186':';'==inChar?'186':'equal sign'==inChar?'187':'='==inChar?'187':'comma'==inChar?'188':','==inChar?'188':'dash'==inChar?'189':'-'==inChar?'189':'period'==inChar?'190':'.'==inChar?'190':'forward slash'==inChar?'191':'/'==inChar?'191':'grave accent'==inChar?'192':'open bracket'==inChar?'219':'['==inChar?'219':'back slash'==inChar?'220':'\\'==inChar?'220':'close bracket'==inChar?'221':']'==inChar?'221':'single quote'==inChar?'222':'\''==inChar?'222':'';/*
Key 	Code
numpad 8 	104
numpad 9 	105
multiply 	106
add 	107
subtract 	109
decimal point 	110
divide 	111
f1 	112
f2 	113
f3 	114
f4 	115
f5 	116
f6 	117
f7 	118
f8 	119
f9 	120
f10 	121
f11 	122
f12 	123
num lock 	144
scroll lock 	145
semi-colon 	186
equal sign 	187
comma 	188
dash 	189
period 	190
forward slash 	191
grave accent 	192
open bracket 	219
back slash 	220
close braket 	221
single quote 	222
*/};GS.getStyle=function(element,style){if(element.currentStyle!==undefined){return element.currentStyle[style];}
return document.defaultView.getComputedStyle(element,null)[style];};GS.listAdd=function(arrArray,newValue){'use strict';if(arrArray.indexOf(newValue)===-1){arrArray.push(newValue);}};GS.triggerEvent=function(target,strEventName,jsnConfig){'use strict';var event,key;if(document.createEvent){event=document.createEvent('HTMLEvents');event.initEvent(strEventName,true,true);}else{event=document.createEventObject();event.eventType=strEventName;}
event.eventName=strEventName;if(jsnConfig){for(key in jsnConfig){event[key]=jsnConfig[key];}}
if(document.createEvent){target.dispatchEvent(event);}else{target.fireEvent("on"+event.eventType,event);}
return event;};GS.strToTitle=function(strInput){'use strict';var i,len,chrCurrent,chrLast='',strRet='';strInput=strInput||'';for(i=0,len=strInput.length;i<len;i+=1){chrCurrent=strInput.charAt(i);if(!(/[a-zA-Z]/).test(chrLast)){strRet+=chrCurrent.toUpperCase();}else if(chrCurrent==='_'){strRet+=' ';}else{strRet+=chrCurrent;}
chrLast=chrCurrent;}
return strRet;};GS.mousePosition=function(event){'use strict';var pageX=(evt.touchDevice?event.touches[0].pageX:event.pageX),pageY=(evt.touchDevice?event.touches[0].pageY:event.pageY);return{'top':pageY,'left':pageX,'bottom':window.innerHeight-pageY,'right':window.innerWidth-pageX,'x':pageX,'y':pageY};};GS.GUID=function(){var strTime=new Date().getTime().toString();function randomString(){return Math.floor((1+Math.random())*0x10000).toString(16).substring(1);}
return randomString()+randomString()+'-'+
randomString()+'-'+
randomString()+'-'+
randomString()+'-'+
strTime.substring(strTime.length-4)+'-'+
randomString()+randomString()+randomString();};/*  ,---- no longer works
//  V
GS.getSelectedText = function () {
    if (window.getSelection) {
        return window.getSelection() + '';
    }
    
    // FireFox
    if (document.getSelection) {
        return document.getSelection() + '';
    }
    
    // IE 6/7
    if (document.selection) {
        return document.selection.createRange().text + '';
    }
    
    console.warn('GS.getSelectedText warning: no selection collection function found (could not find a way to get the selected text)');
    return '';
}*/
GS.safeDecodeURIComponent=function(string){var strRet;try{strRet=decodeURIComponent(string);}catch(error){if(error.toString().indexOf('URI malformed')>-1){strRet=string;}else{throw error;}}
return strRet;};GS.getTextHeight=function(scope,bolNormalLineHeight){var divElement=document.createElement('div'),intHeight;scope=scope||document.body;divElement.style.visibility='invisible';divElement.style.fontSize='1em';divElement.style.margin='0';divElement.style.padding='0';if(bolNormalLineHeight){divElement.style.lineHeight='normal';}else{divElement.style.lineHeight='1';}
divElement.style.border='0';divElement.textContent='a';scope.appendChild(divElement);intHeight=divElement.clientHeight;scope.removeChild(divElement);return intHeight;};GS.scrollParent=function(element){var i=0,currentElement=element,bolFoundScrollable=false,strOverflow;while(currentElement.nodeName!=='HTML'&&bolFoundScrollable===false&&i<75){strOverflow=GS.getStyle(currentElement,'overflow');if(strOverflow==='scroll'||(strOverflow==='auto'&&currentElement.clientHeight<currentElement.scrollHeight)){bolFoundScrollable=true;}else{currentElement=currentElement.parentNode;i+=1;}}
return bolFoundScrollable?currentElement:undefined;};GS.scrollIntoView=function(element){var scrollingContainer=GS.scrollParent(element),arrSiblings,i,len,intScrollTop;if(scrollingContainer){arrSiblings=element.parentNode.children;for(i=0,intScrollTop=0,len=arrSiblings.length;i<len;i+=1){if(arrSiblings[i]===element){intScrollTop+=arrSiblings[i].offsetHeight/2;break;}else{intScrollTop+=arrSiblings[i].offsetHeight;}}
intScrollTop=intScrollTop-(scrollingContainer.offsetHeight/2);scrollingContainer.scrollTop=intScrollTop;}};GS.envGetCell=function(data,record_number,column_name){'use strict';var index;if(data.stat){data=data.dat;}
index=data.arr_column.indexOf(column_name);if(index===-1){console.error(column_name,data);throw'Error in GS.envGetCell: column not found';}
return data.dat[record_number][index];};GS.trim=function(string,strStringToTrim){"use strict";var safeRegexString=strStringToTrim.replace(/([.?*+^$[\]\\(){}|-])/g,'\\$1'),trimRegex=new RegExp('^'+safeRegexString+'+|'+safeRegexString+'+$','g');return string.replace(trimRegex,'');};GS.setCookie=function(c_name,value,exdays){'use strict';var hostname=location.hostname;var exdate=new Date(),c_value;hostname=hostname.substring(hostname.indexOf('.'));exdate.setDate(exdate.getDate()+exdays);c_value=encodeURIComponent(value)+((exdays===null||exdays===undefined)?'':'; expires='+exdate.toUTCString())+'; domain='+hostname+'; path=/';document.cookie=c_name+'='+c_value;};GS.getCookie=function(c_name){'use strict';var c_value=document.cookie,c_end,c_start=c_value.indexOf(" "+c_name+"=");if(c_start===-1){c_start=c_value.indexOf(c_name+"=");}
if(c_start===-1){c_value=null;}else{c_start=c_value.indexOf("=",c_start)+1;c_end=c_value.indexOf(";",c_start);if(c_end===-1){c_end=c_value.length;}
c_value=decodeURIComponent(c_value.substring(c_start,c_end));}
return c_value;};GS.pushState=function(stateObj,title,url){history.pushState(stateObj,title,url);GS.triggerEvent(window,'pushstate');};GS.replaceState=function(stateObj,title,url){history.replaceState(stateObj,title,url);GS.triggerEvent(window,'replacestate');};GS.searchToWhere=function(columns,searchClause){var arrToken,arrNoQuotes=[],strNoQuotes='',arrColumn,arrRequired=[],strRequired='',arrWhere=[],strWhere='',strRet='',token,numTokens,col,numCols,i,len,strSearch;if(!searchClause){return'TRUE';}
arrColumn=columns.split(',');arrToken=searchClause.match(/[\+|\-]?"[^"]*?"/g);if(arrToken){for(token=0,numTokens=arrToken.length;token<numTokens;token+=1){arrToken[token]=GS.trim(arrToken[token],'+');for(col=0,numCols=arrColumn.length;col<numCols;col+=1){if(arrToken[token][0]==='-'){arrToken[token]=GS.trim(arrToken[token],'-');arrRequired[token]=(arrRequired[token]?arrRequired[token]+' AND ':'')+'CASE WHEN '+arrColumn[col]+' IS NOT NULL THEN '+arrColumn[col]+' NOT ILIKE \'%'+GS.trim(arrToken[token],'"')+'%\' ELSE TRUE END';arrToken[token]='-'+arrToken[token];}else{arrRequired[token]=(arrRequired[token]?arrRequired[token]+' OR ':'')+
(arrColumn[col]+' ILIKE \'%'+GS.trim(arrToken[token],'"')+'%\'');}}}
for(i=0,len=arrRequired.length;i<len;i+=1){strRequired=(strRequired?strRequired+' AND ':'')+'('+arrRequired[i]+')';}}
/*
    //NOT CROSS BROWSER
    arrNoQuotes = strSearch.split(/([\+|\-]?"[^"]*?")/);
    strNoQuotes = arrNoQuotes.join(' ');
    arrNoQuotes = strNoQuotes.split(/[ ]+/);
    */
strSearch=searchClause.trim();strSearch=strSearch.replace('-"','"');strSearch=strSearch.replace('+"','"');strSearch=strSearch.replace(/"[^"]*"/,'""');arrNoQuotes=strSearch.split('""');strNoQuotes=arrNoQuotes.join(' ');strNoQuotes=strNoQuotes.replace('  ',' ');strNoQuotes=strNoQuotes.replace('  ',' ');arrNoQuotes=strNoQuotes.split(' ');/*
    //DIDN'T WORK
    strSearch = searchClause.trim();
    strSearch = strSearch.replace('-"', '"');
    strSearch = strSearch.replace('+"', '"');
    arrNoQuotes = strSearch.split('"');
    strSearch = '';
    if (searchClause.trim()[0] === '"') {
        for (i = 1, len = arrNoQuotes.length; i < len; i += 2) {
            strSearch = strSearch + (strSearch === '' ? '' : ' ') + arrNoQuotes[i].trim();
        }
    } else {
        for (i = 0, len = arrNoQuotes.length; i < len; i += 2) {
            strSearch = strSearch + (strSearch === '' ? '' : ' ') + arrNoQuotes[i].trim();
        }
    }
    //console.log(strSearch);
    strSearch = strSearch.replace('  ', ' ');
    strSearch = strSearch.replace('  ', ' ');
    arrNoQuotes = strSearch.split(' ');
    //console.log(arrNoQuotes);
    */
arrRequired=[''];if(arrNoQuotes.length>0){for(token=0,numTokens=arrNoQuotes.length;token<numTokens;token+=1){for(col=0,numCols=arrColumn.length;col<numCols;col+=1){if(arrNoQuotes[token].length>0){if(arrNoQuotes[token][0]==='-'){arrRequired[token]=(arrRequired[token]?arrRequired[token]+' AND ':'')+' CASE WHEN '+arrColumn[col]+' IS NOT NULL THEN '+arrColumn[col]+' NOT ILIKE $$%'+GS.trim(GS.trim(arrNoQuotes[token],'-'),' ')+'%$$ ELSE TRUE END ';}else if(arrNoQuotes[token][0]==='+'){arrRequired[token]=(arrRequired[token]?arrRequired[token]+' OR ':'')+
arrColumn[col]+' ILIKE $$%'+
GS.trim(GS.trim(arrNoQuotes[token],'+'),' ')+'%$$ ';}else{arrWhere[token]=(arrWhere[token]?arrWhere[token]+' OR ':'')+
arrColumn[col]+' ILIKE $$%'+GS.trim(arrNoQuotes[token],' ')+'%$$ ';}}}}}
if(arrRequired.length>0){for(i=0,len=arrRequired.length;i<len;i+=1){if(arrRequired[i]){strRequired=(strRequired?strRequired+' AND ':'')+'('+arrRequired[i]+')';}}}
if(arrWhere.length>0){for(i=0,len=arrWhere.length;i<len;i+=1){if(arrWhere[i]){strWhere=(strWhere?strWhere+' AND ':'')+'('+arrWhere[i]+')';}}}
strRet=(strWhere&&strRequired?'('+strWhere+') AND ('+strRequired+')':strWhere?strWhere:strRequired);return strRet;};GS.pushQueryString=function(QS){var arrNewQS=QS.split('&'),i,len,newQS=GS.getQueryString();for(i=0,len=arrNewQS.length;i<len;i+=1){newQS=GS.qrySetVal(newQS,arrNewQS[i]);}
GS.pushState({},'','?'+newQS);};GS.iconList=function(){return[{'name':'glass','code':'f000'},{'name':'music','code':'f001'},{'name':'search','code':'f002'},{'name':'envelope-o','code':'f003'},{'name':'heart','code':'f004'},{'name':'star','code':'f005'},{'name':'star-o','code':'f006'},{'name':'user','code':'f007'},{'name':'film','code':'f008'},{'name':'th-large','code':'f009'},{'name':'th','code':'f00a'},{'name':'th-list','code':'f00b'},{'name':'check','code':'f00c'},{'name':'times','code':'f00d'},{'name':'search-plus','code':'f00e'},{'name':'search-minus','code':'f010'},{'name':'power-off','code':'f011'},{'name':'signal','code':'f012'},{'name':'cog','code':'f013'},{'name':'trash-o','code':'f014'},{'name':'home','code':'f015'},{'name':'file-o','code':'f016'},{'name':'clock-o','code':'f017'},{'name':'road','code':'f018'},{'name':'download','code':'f019'},{'name':'arrow-circle-o-down','code':'f01a'},{'name':'arrow-circle-o-up','code':'f01b'},{'name':'inbox','code':'f01c'},{'name':'play-circle-o','code':'f01d'},{'name':'repeat','code':'f01e'},{'name':'refresh','code':'f021'},{'name':'list-alt','code':'f022'},{'name':'lock','code':'f023'},{'name':'flag','code':'f024'},{'name':'headphones','code':'f025'},{'name':'volume-off','code':'f026'},{'name':'volume-down','code':'f027'},{'name':'volume-up','code':'f028'},{'name':'qrcode','code':'f029'},{'name':'barcode','code':'f02a'},{'name':'tag','code':'f02b'},{'name':'tags','code':'f02c'},{'name':'book','code':'f02d'},{'name':'bookmark','code':'f02e'},{'name':'print','code':'f02f'},{'name':'camera','code':'f030'},{'name':'font','code':'f031'},{'name':'bold','code':'f032'},{'name':'italic','code':'f033'},{'name':'text-height','code':'f034'},{'name':'text-width','code':'f035'},{'name':'align-left','code':'f036'},{'name':'align-center','code':'f037'},{'name':'align-right','code':'f038'},{'name':'align-justify','code':'f039'},{'name':'list','code':'f03a'},{'name':'outdent','code':'f03b'},{'name':'indent','code':'f03c'},{'name':'video-camera','code':'f03d'},{'name':'picture-o','code':'f03e'},{'name':'pencil','code':'f040'},{'name':'map-marker','code':'f041'},{'name':'adjust','code':'f042'},{'name':'tint','code':'f043'},{'name':'pencil-square-o','code':'f044'},{'name':'share-square-o','code':'f045'},{'name':'check-square-o','code':'f046'},{'name':'arrows','code':'f047'},{'name':'step-backward','code':'f048'},{'name':'fast-backward','code':'f049'},{'name':'backward','code':'f04a'},{'name':'play','code':'f04b'},{'name':'pause','code':'f04c'},{'name':'stop','code':'f04d'},{'name':'forward','code':'f04e'},{'name':'fast-forward','code':'f050'},{'name':'step-forward','code':'f051'},{'name':'eject','code':'f052'},{'name':'chevron-left','code':'f053'},{'name':'chevron-right','code':'f054'},{'name':'plus-circle','code':'f055'},{'name':'minus-circle','code':'f056'},{'name':'times-circle','code':'f057'},{'name':'check-circle','code':'f058'},{'name':'question-circle','code':'f059'},{'name':'info-circle','code':'f05a'},{'name':'crosshairs','code':'f05b'},{'name':'times-circle-o','code':'f05c'},{'name':'check-circle-o','code':'f05d'},{'name':'ban','code':'f05e'},{'name':'arrow-left','code':'f060'},{'name':'arrow-right','code':'f061'},{'name':'arrow-up','code':'f062'},{'name':'arrow-down','code':'f063'},{'name':'share','code':'f064'},{'name':'expand','code':'f065'},{'name':'compress','code':'f066'},{'name':'plus','code':'f067'},{'name':'minus','code':'f068'},{'name':'asterisk','code':'f069'},{'name':'exclamation-circle','code':'f06a'},{'name':'gift','code':'f06b'},{'name':'leaf','code':'f06c'},{'name':'fire','code':'f06d'},{'name':'eye','code':'f06e'},{'name':'eye-slash','code':'f070'},{'name':'exclamation-triangle','code':'f071'},{'name':'plane','code':'f072'},{'name':'calendar','code':'f073'},{'name':'random','code':'f074'},{'name':'comment','code':'f075'},{'name':'magnet','code':'f076'},{'name':'chevron-up','code':'f077'},{'name':'chevron-down','code':'f078'},{'name':'retweet','code':'f079'},{'name':'shopping-cart','code':'f07a'},{'name':'folder','code':'f07b'},{'name':'folder-open','code':'f07c'},{'name':'arrows-v','code':'f07d'},{'name':'arrows-h','code':'f07e'},{'name':'bar-chart-o','code':'f080'},{'name':'twitter-square','code':'f081'},{'name':'facebook-square','code':'f082'},{'name':'camera-retro','code':'f083'},{'name':'key','code':'f084'},{'name':'cogs','code':'f085'},{'name':'comments','code':'f086'},{'name':'thumbs-o-up','code':'f087'},{'name':'thumbs-o-down','code':'f088'},{'name':'star-half','code':'f089'},{'name':'heart-o','code':'f08a'},{'name':'sign-out','code':'f08b'},{'name':'linkedin-square','code':'f08c'},{'name':'thumb-tack','code':'f08d'},{'name':'external-link','code':'f08e'},{'name':'sign-in','code':'f090'},{'name':'trophy','code':'f091'},{'name':'github-square','code':'f092'},{'name':'upload','code':'f093'},{'name':'lemon-o','code':'f094'},{'name':'phone','code':'f095'},{'name':'square-o','code':'f096'},{'name':'bookmark-o','code':'f097'},{'name':'phone-square','code':'f098'},{'name':'twitter','code':'f099'},{'name':'facebook','code':'f09a'},{'name':'github','code':'f09b'},{'name':'unlock','code':'f09c'},{'name':'credit-card','code':'f09d'},{'name':'rss','code':'f09e'},{'name':'hdd-o','code':'f0a0'},{'name':'bullhorn','code':'f0a1'},{'name':'bell','code':'f0f3'},{'name':'certificate','code':'f0a3'},{'name':'hand-o-right','code':'f0a4'},{'name':'hand-o-left','code':'f0a5'},{'name':'hand-o-up','code':'f0a6'},{'name':'hand-o-down','code':'f0a7'},{'name':'arrow-circle-left','code':'f0a8'},{'name':'arrow-circle-right','code':'f0a9'},{'name':'arrow-circle-up','code':'f0aa'},{'name':'arrow-circle-down','code':'f0ab'},{'name':'globe','code':'f0ac'},{'name':'wrench','code':'f0ad'},{'name':'tasks','code':'f0ae'},{'name':'filter','code':'f0b0'},{'name':'briefcase','code':'f0b1'},{'name':'arrows-alt','code':'f0b2'},{'name':'users','code':'f0c0'},{'name':'link','code':'f0c1'},{'name':'cloud','code':'f0c2'},{'name':'flask','code':'f0c3'},{'name':'scissors','code':'f0c4'},{'name':'files-o','code':'f0c5'},{'name':'paperclip','code':'f0c6'},{'name':'floppy-o','code':'f0c7'},{'name':'square','code':'f0c8'},{'name':'bars','code':'f0c9'},{'name':'list-ul','code':'f0ca'},{'name':'list-ol','code':'f0cb'},{'name':'strikethrough','code':'f0cc'},{'name':'underline','code':'f0cd'},{'name':'table','code':'f0ce'},{'name':'magic','code':'f0d0'},{'name':'truck','code':'f0d1'},{'name':'pinterest','code':'f0d2'},{'name':'pinterest-square','code':'f0d3'},{'name':'google-plus-square','code':'f0d4'},{'name':'google-plus','code':'f0d5'},{'name':'money','code':'f0d6'},{'name':'caret-down','code':'f0d7'},{'name':'caret-up','code':'f0d8'},{'name':'caret-left','code':'f0d9'},{'name':'caret-right','code':'f0da'},{'name':'columns','code':'f0db'},{'name':'sort','code':'f0dc'},{'name':'sort-asc','code':'f0dd'},{'name':'sort-desc','code':'f0de'},{'name':'envelope','code':'f0e0'},{'name':'linkedin','code':'f0e1'},{'name':'undo','code':'f0e2'},{'name':'gavel','code':'f0e3'},{'name':'tachometer','code':'f0e4'},{'name':'comment-o','code':'f0e5'},{'name':'comments-o','code':'f0e6'},{'name':'bolt','code':'f0e7'},{'name':'sitemap','code':'f0e8'},{'name':'umbrella','code':'f0e9'},{'name':'clipboard','code':'f0ea'},{'name':'lightbulb-o','code':'f0eb'},{'name':'exchange','code':'f0ec'},{'name':'cloud-download','code':'f0ed'},{'name':'cloud-upload','code':'f0ee'},{'name':'user-md','code':'f0f0'},{'name':'stethoscope','code':'f0f1'},{'name':'suitcase','code':'f0f2'},{'name':'bell-o','code':'f0a2'},{'name':'coffee','code':'f0f4'},{'name':'cutlery','code':'f0f5'},{'name':'file-text-o','code':'f0f6'},{'name':'building-o','code':'f0f7'},{'name':'hospital-o','code':'f0f8'},{'name':'ambulance','code':'f0f9'},{'name':'medkit','code':'f0fa'},{'name':'fighter-jet','code':'f0fb'},{'name':'beer','code':'f0fc'},{'name':'h-square','code':'f0fd'},{'name':'plus-square','code':'f0fe'},{'name':'angle-double-left','code':'f100'},{'name':'angle-double-right','code':'f101'},{'name':'angle-double-up','code':'f102'},{'name':'angle-double-down','code':'f103'},{'name':'angle-left','code':'f104'},{'name':'angle-right','code':'f105'},{'name':'angle-up','code':'f106'},{'name':'angle-down','code':'f107'},{'name':'desktop','code':'f108'},{'name':'laptop','code':'f109'},{'name':'tablet','code':'f10a'},{'name':'mobile','code':'f10b'},{'name':'circle-o','code':'f10c'},{'name':'quote-left','code':'f10d'},{'name':'quote-right','code':'f10e'},{'name':'spinner','code':'f110'},{'name':'circle','code':'f111'},{'name':'reply','code':'f112'},{'name':'github-alt','code':'f113'},{'name':'folder-o','code':'f114'},{'name':'folder-open-o','code':'f115'},{'name':'smile-o','code':'f118'},{'name':'frown-o','code':'f119'},{'name':'meh-o','code':'f11a'},{'name':'gamepad','code':'f11b'},{'name':'keyboard-o','code':'f11c'},{'name':'flag-o','code':'f11d'},{'name':'flag-checkered','code':'f11e'},{'name':'terminal','code':'f120'},{'name':'code','code':'f121'},{'name':'reply-all','code':'f122'},{'name':'mail-reply-all','code':'f122'},{'name':'star-half-o','code':'f123'},{'name':'location-arrow','code':'f124'},{'name':'crop','code':'f125'},{'name':'code-fork','code':'f126'},{'name':'chain-broken','code':'f127'},{'name':'question','code':'f128'},{'name':'info','code':'f129'},{'name':'exclamation','code':'f12a'},{'name':'superscript','code':'f12b'},{'name':'subscript','code':'f12c'},{'name':'eraser','code':'f12d'},{'name':'puzzle-piece','code':'f12e'},{'name':'microphone','code':'f130'},{'name':'microphone-slash','code':'f131'},{'name':'shield','code':'f132'},{'name':'calendar-o','code':'f133'},{'name':'fire-extinguisher','code':'f134'},{'name':'rocket','code':'f135'},{'name':'maxcdn','code':'f136'},{'name':'chevron-circle-left','code':'f137'},{'name':'chevron-circle-right','code':'f138'},{'name':'chevron-circle-up','code':'f139'},{'name':'chevron-circle-down','code':'f13a'},{'name':'html5','code':'f13b'},{'name':'css3','code':'f13c'},{'name':'anchor','code':'f13d'},{'name':'unlock-alt','code':'f13e'},{'name':'bullseye','code':'f140'},{'name':'ellipsis-h','code':'f141'},{'name':'ellipsis-v','code':'f142'},{'name':'rss-square','code':'f143'},{'name':'play-circle','code':'f144'},{'name':'ticket','code':'f145'},{'name':'minus-square','code':'f146'},{'name':'minus-square-o','code':'f147'},{'name':'level-up','code':'f148'},{'name':'level-down','code':'f149'},{'name':'check-square','code':'f14a'},{'name':'pencil-square','code':'f14b'},{'name':'external-link-square','code':'f14c'},{'name':'share-square','code':'f14d'},{'name':'compass','code':'f14e'},{'name':'caret-square-o-down','code':'f150'},{'name':'caret-square-o-up','code':'f151'},{'name':'caret-square-o-right','code':'f152'},{'name':'eur','code':'f153'},{'name':'gbp','code':'f154'},{'name':'usd','code':'f155'},{'name':'inr','code':'f156'},{'name':'jpy','code':'f157'},{'name':'rub','code':'f158'},{'name':'krw','code':'f159'},{'name':'btc','code':'f15a'},{'name':'file','code':'f15b'},{'name':'file-text','code':'f15c'},{'name':'sort-alpha-asc','code':'f15d'},{'name':'sort-alpha-desc','code':'f15e'},{'name':'sort-amount-asc','code':'f160'},{'name':'sort-amount-desc','code':'f161'},{'name':'sort-numeric-asc','code':'f162'},{'name':'sort-numeric-desc','code':'f163'},{'name':'thumbs-up','code':'f164'},{'name':'thumbs-down','code':'f165'},{'name':'youtube-square','code':'f166'},{'name':'youtube','code':'f167'},{'name':'xing','code':'f168'},{'name':'xing-square','code':'f169'},{'name':'youtube-play','code':'f16a'},{'name':'dropbox','code':'f16b'},{'name':'stack-overflow','code':'f16c'},{'name':'instagram','code':'f16d'},{'name':'flickr','code':'f16e'},{'name':'adn','code':'f170'},{'name':'bitbucket','code':'f171'},{'name':'bitbucket-square','code':'f172'},{'name':'tumblr','code':'f173'},{'name':'tumblr-square','code':'f174'},{'name':'long-arrow-down','code':'f175'},{'name':'long-arrow-up','code':'f176'},{'name':'long-arrow-left','code':'f177'},{'name':'long-arrow-right','code':'f178'},{'name':'apple','code':'f179'},{'name':'windows','code':'f17a'},{'name':'android','code':'f17b'},{'name':'linux','code':'f17c'},{'name':'dribbble','code':'f17d'},{'name':'skype','code':'f17e'},{'name':'foursquare','code':'f180'},{'name':'trello','code':'f181'},{'name':'female','code':'f182'},{'name':'male','code':'f183'},{'name':'gittip','code':'f184'},{'name':'sun-o','code':'f185'},{'name':'moon-o','code':'f186'},{'name':'archive','code':'f187'},{'name':'bug','code':'f188'},{'name':'vk','code':'f189'},{'name':'weibo','code':'f18a'},{'name':'renren','code':'f18b'},{'name':'pagelines','code':'f18c'},{'name':'stack-exchange','code':'f18d'},{'name':'arrow-circle-o-right','code':'f18e'},{'name':'arrow-circle-o-left','code':'f190'},{'name':'caret-square-o-left','code':'f191'},{'name':'dot-circle-o','code':'f192'},{'name':'wheelchair','code':'f193'},{'name':'vimeo-square','code':'f194'},{'name':'try','code':'f195'},{'name':'plus-square-o','code':'f196'}];};GS.lorem=function(){return'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.';};window.addEventListener('design-register-element',function(){registerDesignSnippet('Add Loader (to page)','GS.addLoader','addLoader(\'${0:class-name}\', \'${1:Loading...}\');');registerDesignSnippet('Add Loader (to element)','GS.addLoader','addLoader(${0:document.getElementById(\'id\')}, \'${1:Loading...}\');');registerDesignSnippet('Remove Loader (from page)','GS.removeLoader','removeLoader(\'${0:class-name}\');');registerDesignSnippet('Remove Loader (from element)','GS.removeLoader','removeLoader(${0:document.getElementById(\'id\')});');});document.addEventListener('DOMContentLoaded',function(){xtag.register('gs-loader',{lifecycle:{},events:{},accessors:{},methods:{}});});GS.addLoader=function(loaderClassOrTarget,loaderContent){var loaderElement=document.createElement('gs-loader'),loaderClass,loaderTarget;if(typeof loaderClassOrTarget==='string'){loaderClass=loaderClassOrTarget;}else if(typeof loaderClassOrTarget==='object'){loaderTarget=loaderClassOrTarget;}
if(loaderClass){loaderElement.classList.add('loader-'+loaderClass);}
if(!loaderTarget){loaderTarget=document.body;}
loaderElement.innerHTML='<div class="loader-positioning" gs-dynamic>'+'<div class="loader" gs-dynamic></div>'+'<div class="loader-inner spinning" gs-dynamic></div>'+'<div class="loader-inner-inner spinning" gs-dynamic></div>'+'<div class="loader-inner-inner-inner spinning" gs-dynamic></div>'+
(loaderContent?'<div class="loader-content" gs-dynamic>'+loaderContent+'</div>':'')+'</div>';loaderTarget.appendChild(loaderElement);};GS.removeLoader=function(loaderClassOrTarget){var element,i,len,arrLoaders,loaderClass,loaderTarget;if(typeof loaderClassOrTarget==='string'){loaderClass=loaderClassOrTarget;}else if(typeof loaderClassOrTarget==='object'){loaderTarget=loaderClassOrTarget;}
if(loaderClass){element=document.getElementsByClassName('loader-'+loaderClass)[0];}else if(loaderTarget){element=xtag.queryChildren(loaderTarget,'gs-loader')[0];}else{arrLoaders=xtag.queryChildren(document.body,'gs-loader');for(i=0,len=arrLoaders.length;i<len;i+=1){if(!arrLoaders[i].hasAttribute('id')){element=arrLoaders[i];break;}}}
if(element){element.parentNode.removeChild(element);}else{console.warn('GS.removeLoader Error: loader'+(loaderClass?' class: "'+loaderClass+'"':'')+' not found');}};GS.removeAllLoaders=function(){'use strict';var i,len,arrLoaders;arrLoaders=xtag.query(document.body,'gs-loader');for(i=0,len=arrLoaders.length;i<len;i+=1){if(!arrLoaders[i].hasAttribute('id')){arrLoaders[i].parentNode.removeChild(arrLoaders[i]);}}};window.addEventListener('design-register-element',function(){window.designElementProperty_GSBODY=function(selectedElement){addFlexContainerProps(selectedElement);};registerDesignSnippet('<gs-body>','<gs-body>','gs-body>\n'+'    $0\n'+'</gs-body>');designRegisterElement('gs-body','/v1/dev/developer_g/greyspots-'+GS.version()+'/tools/documentation/doc-elem-page.html');});document.addEventListener('DOMContentLoaded',function(){xtag.register('gs-body',{lifecycle:{},events:{},accessors:{},methods:{}});});(function(){'use strict';function defineButton(strTagName,strDocLink,bolDisableWhenNoValue,designAdditionalFunction,clickFunction){strDocLink=strDocLink||'/v1/dev/developer_g/greyspots-'+GS.version()+'/documentation/doc-elem-buttons-toggle.html';designAdditionalFunction=designAdditionalFunction||function(){};clickFunction=clickFunction||function(){};window.addEventListener('design-register-element',function(){registerDesignSnippet('<'+strTagName+'>','<'+strTagName+'>',strTagName+'>${1}</'+strTagName+'>');designRegisterElement(strTagName,strDocLink);window['designElementProperty_'+strTagName.replace(/[^a-z0-9]/gi,'').toUpperCase()]=function(selectedElement){var strIconPos='',strIconRotation='',strVisibilityAttribute='';addProp('Icon',true,'<div flex-horizontal>'+'     <gs-text id="prop-icon-input" class="target" value="'+(selectedElement.getAttribute('icon')||'')+'" mini flex></gs-text>'+'     <gs-button id="prop-icon-picker-button" mini icononly icon="list"></gs-button>'+'     <style>#prop-icon-picker-button:after {font-size: 1em;}</style>'+'</div>',function(){return setOrRemoveTextAttribute(selectedElement,'icon',this.value,false);});document.getElementById('prop-icon-picker-button').addEventListener('click',function(){var i,len,html,arrIcons=GS.iconList(),strName,templateElement;for(i=0,len=arrIcons.length,html='';i<len;i+=1){strName=arrIcons[i].name;html+='<gs-block>'+'<gs-button iconleft icon="'+strName+'" dialogclose>'+strName+'</gs-button>'+'</gs-block>';}
templateElement=document.createElement('template');templateElement.setAttribute('data-max-width','1100px');templateElement.innerHTML='<gs-page>'+'    <gs-header><center><h3>Choose An Icon</h3></center></gs-header>'+'    <gs-body padded><gs-grid widths="1,1,1,1" reflow-at="767px">'+html+'</gs-grid></gs-body>'+'    <gs-footer><gs-button dialogclose>Cancel</gs-button></gs-footer>'+'</gs-page>';GS.openDialog(templateElement,'',function(event,strAnswer){var propInput=document.getElementById('prop-icon-input');if(strAnswer!=='Cancel'){propInput.value=strAnswer;GS.triggerEvent(propInput,'change');}});});if(selectedElement.hasAttribute('iconleft')){strIconPos='iconleft';}else if(selectedElement.hasAttribute('iconright')){strIconPos='iconright';}else if(selectedElement.hasAttribute('icontop')){strIconPos='icontop';}else if(selectedElement.hasAttribute('iconbottom')){strIconPos='iconbottom';}else if(selectedElement.hasAttribute('icononly')){strIconPos='icononly';}
addProp('Icon Position',true,'<gs-select class="target" value="'+strIconPos+'" mini>'+'   <option value="">Default</option>'+'   <option value="iconleft">Left</option>'+'   <option value="iconright">Right</option>'+'   <option value="icontop">Top</option>'+'   <option value="iconbottom">Bottom</option>'+'   <option value="icononly">Icononly</option>'+'</gs-select>',function(){selectedElement.removeAttribute('iconleft');selectedElement.removeAttribute('iconright');selectedElement.removeAttribute('icontop');selectedElement.removeAttribute('iconbottom');selectedElement.removeAttribute('icononly');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});if(selectedElement.hasAttribute('iconrotateright')){strIconRotation='iconrotateright';}else if(selectedElement.hasAttribute('iconrotatedown')){strIconRotation='iconrotatedown';}else if(selectedElement.hasAttribute('iconrotateleft')){strIconRotation='iconrotateleft';}
addProp('Icon&nbsp;Rotation',true,'<gs-select class="target" value="'+strIconRotation+'" mini>'+'   <option value="">None</option>'+'   <option value="iconrotateright">90 degrees</option>'+'   <option value="iconrotatedown">180 degrees</option>'+'   <option value="iconrotateleft">270 degrees</option>'+'</gs-select>',function(){selectedElement.removeAttribute('iconrotateright');selectedElement.removeAttribute('iconrotatedown');selectedElement.removeAttribute('iconrotateleft');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});addProp('Column',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('column')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'column',this.value,false);});addProp('Value',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('value')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'value',this.value,false);});addProp('Column In Querystring',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('qs')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'qs',this.value,false);});addProp('Focusable',true,'<gs-checkbox class="target" value="'+(!selectedElement.hasAttribute('no-focus'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'no-focus',(this.value==='true'),false);});addProp('Emphasis',true,'<gs-checkbox class="target" value="'+(!selectedElement.hasAttribute('emphasis'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'emphasis',(this.value==='true'),true);});addProp('Tabindex',true,'<gs-number class="target" value="'+(selectedElement.getAttribute('tabindex')||'0')+'" mini></gs-number>',function(){return setOrRemoveTextAttribute(selectedElement,'tabindex',this.value);});addProp('Inline',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('inline'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'inline',(this.value==='true'),true);});addProp('Mini',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('mini'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'mini',(this.value==='true'),true);});addProp('Key',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('key')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'key',this.value,false);});addProp('No Modifier Key For Hot Key',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('no-modifier-key')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'no-modifier-key',this.value==='true',true);});addProp('Title',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('title')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'title',this.value);});addProp('Disabled',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('disabled')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'disabled',this.value==='true',true);});addProp('suspend-inserted',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-inserted')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-inserted',this.value==='true',true);});if(selectedElement.hasAttribute('hidden')){strVisibilityAttribute='hidden';}
if(selectedElement.hasAttribute('hide-on-desktop')){strVisibilityAttribute='hide-on-desktop';}
if(selectedElement.hasAttribute('hide-on-tablet')){strVisibilityAttribute='hide-on-tablet';}
if(selectedElement.hasAttribute('hide-on-phone')){strVisibilityAttribute='hide-on-phone';}
if(selectedElement.hasAttribute('show-on-desktop')){strVisibilityAttribute='show-on-desktop';}
if(selectedElement.hasAttribute('show-on-tablet')){strVisibilityAttribute='show-on-tablet';}
if(selectedElement.hasAttribute('show-on-phone')){strVisibilityAttribute='show-on-phone';}
addProp('Visibility',true,'<gs-select class="target" value="'+strVisibilityAttribute+'" mini>'+'<option value="">Visible</option>'+'<option value="hidden">Invisible</option>'+'<option value="hide-on-desktop">Invisible at desktop size</option>'+'<option value="hide-on-tablet">Invisible at tablet size</option>'+'<option value="hide-on-phone">Invisible at phone size</option>'+'<option value="show-on-desktop">Visible at desktop size</option>'+'<option value="show-on-tablet">Visible at tablet size</option>'+'<option value="show-on-phone">Visible at phone size</option>'+'</gs-select>',function(){selectedElement.removeAttribute('hidden');selectedElement.removeAttribute('hide-on-desktop');selectedElement.removeAttribute('hide-on-tablet');selectedElement.removeAttribute('hide-on-phone');selectedElement.removeAttribute('show-on-desktop');selectedElement.removeAttribute('show-on-tablet');selectedElement.removeAttribute('show-on-phone');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});addProp('Corners',true,'<div class="target">'+'<gs-grid>\n'+'    <gs-block>\n'+'        <gs-checkbox value="'+(!(selectedElement.hasAttribute('remove-all')||selectedElement.hasAttribute('remove-top')||selectedElement.hasAttribute('remove-left')||selectedElement.hasAttribute('remove-top-left'))).toString()+'" remove-right remove-bottom id="round-top-left-corner________"></gs-checkbox>'+'        <gs-checkbox value="'+(!(selectedElement.hasAttribute('remove-all')||selectedElement.hasAttribute('remove-bottom')||selectedElement.hasAttribute('remove-left')||selectedElement.hasAttribute('remove-bottom-left'))).toString()+'" remove-right remove-top id="round-bottom-left-corner________"></gs-checkbox>'+'    </gs-block>\n'+'    <gs-block>\n'+'        <gs-checkbox value="'+(!(selectedElement.hasAttribute('remove-all')||selectedElement.hasAttribute('remove-top')||selectedElement.hasAttribute('remove-right')||selectedElement.hasAttribute('remove-top-right'))).toString()+'" remove-left remove-bottom id="round-top-right-corner________"></gs-checkbox>'+'        <gs-checkbox value="'+(!(selectedElement.hasAttribute('remove-all')||selectedElement.hasAttribute('remove-bottom')||selectedElement.hasAttribute('remove-right')||selectedElement.hasAttribute('remove-bottom-right'))).toString()+'" remove-left remove-top id="round-bottom-right-corner________"></gs-checkbox>'+'    </gs-block>\n'+'</gs-grid>\n'+'</div>',function(){var topLeft=document.getElementById('round-top-left-corner________').value==='true',topRight=document.getElementById('round-top-right-corner________').value==='true',bottomLeft=document.getElementById('round-bottom-left-corner________').value==='true',bottomRight=document.getElementById('round-bottom-right-corner________').value==='true',arrStrAttr=[],i,len;selectedElement.removeAttribute('remove-all');selectedElement.removeAttribute('remove-top');selectedElement.removeAttribute('remove-bottom');selectedElement.removeAttribute('remove-left');selectedElement.removeAttribute('remove-right');selectedElement.removeAttribute('remove-top-left');selectedElement.removeAttribute('remove-top-right');selectedElement.removeAttribute('remove-bottom-left');selectedElement.removeAttribute('remove-bottom-right');if(!topLeft&&!topRight&&!bottomLeft&&!bottomRight){arrStrAttr.push('remove-all');}else if(!topLeft&&!topRight){arrStrAttr.push('remove-top');}else if(!bottomLeft&&!bottomRight){arrStrAttr.push('remove-bottom');}else if(!topLeft&&!bottomLeft){arrStrAttr.push('remove-left');}else if(!topRight&&!bottomRight){arrStrAttr.push('remove-right');}
if(!topLeft&&!bottomLeft&&arrStrAttr[0]!=='remove-all'){arrStrAttr.push('remove-left');}else if(!topLeft&&topRight){arrStrAttr.push('remove-top-left');}else if(!bottomLeft&&bottomRight){arrStrAttr.push('remove-bottom-left');}
if(!topRight&&!bottomRight&&arrStrAttr[0]!=='remove-all'){arrStrAttr.push('remove-right');}else if(topLeft&&!topRight){arrStrAttr.push('remove-top-right');}else if(bottomLeft&&!bottomRight){arrStrAttr.push('remove-bottom-right');}
for(i=0,len=arrStrAttr.length;i<len;i+=1){selectedElement.setAttribute(arrStrAttr[i],'');}
return selectedElement;});designAdditionalFunction(selectedElement);};});document.addEventListener('DOMContentLoaded',function(){'use strict';function handleDisable(element){if(bolDisableWhenNoValue){if(element.getAttribute('value')){element.removeAttribute('disabled');}else{element.setAttribute('disabled','');}}}
function pushReplacePopHandler(element){element.setAttribute('value',GS.qryGetVal(GS.getQueryString(),element.getAttribute('qs')));}
function elementCreated(element){if(!element.hasAttribute('suspend-created')){}}
function elementInserted(element){var strKey,strQSValue;if(!element.hasAttribute('suspend-created')&&!element.hasAttribute('suspend-inserted')){if(!element.inserted){element.inserted=true;if(element.getAttribute('qs')){strQSValue=GS.qryGetVal(GS.getQueryString(),element.getAttribute('qs'));if(strQSValue!==''||!element.getAttribute('value')){element.setAttribute('value',strQSValue);}
window.addEventListener('pushstate',function(){pushReplacePopHandler(element);});window.addEventListener('replacestate',function(){pushReplacePopHandler(element);});window.addEventListener('popstate',function(){pushReplacePopHandler(element);});}
if(!element.hasAttribute('no-focus')){if((!element.tabIndex)||element.tabIndex===-1){element.tabIndex=0;}}else{element.removeAttribute('tabindex');}
if(!evt.touchDevice){element.addEventListener(evt.mousedown,function(event){element.classList.add('down');});element.addEventListener(evt.mouseout,function(event){element.classList.remove('down');element.classList.remove('hover');});element.addEventListener(evt.mouseover,function(event){element.classList.remove('down');element.classList.add('hover');});element.addEventListener('keydown',function(event){if(!element.hasAttribute('disabled')&&!element.classList.contains('down')&&(event.keyCode===13||event.keyCode===32)){element.classList.add('down');}});element.addEventListener('keyup',function(event){if(!element.hasAttribute('disabled')&&(event.keyCode===13||event.keyCode===32)){GS.triggerEvent(element,'click');}});}
element.addEventListener('click',function(event){element.classList.remove('down');clickFunction(element);});element.addEventListener('keypress',function(event){if(event.keyCode===13||event.keyCode===32){event.preventDefault();event.stopPropagation();}});if(element.getAttribute('key')){strKey=element.getAttribute('key');if(GS.keyCode(strKey)){if(strKey.match(/[arfcvxzntypq]/gim)){console.warn('gs-skype-button Warning: by setting the hot key of this button to "'+strKey+'" you may be overriding browser functionality.',element);}
window.addEventListener('keydown',function(event){if(String(event.keyCode||event.which)===GS.keyCode(strKey)&&((element.hasAttribute('no-modifier-key')&&!event.metaKey&&!event.ctrlKey)||(!element.hasAttribute('no-modifier-key')&&(event.metaKey||event.ctrlKey)))){event.preventDefault();event.stopPropagation();element.focus();GS.triggerEvent(element,'click');}});}else if(strKey.length>1){console.error('gs-skype-button Error: \'key="'+strKey+'"\' is not a valid hot-key.',element);}}
handleDisable(element);}}}
xtag.register(strTagName,{lifecycle:{created:function(){elementCreated(this);},inserted:function(){elementInserted(this);},attributeChanged:function(strAttrName,oldValue,newValue){if(strAttrName==='suspend-created'&&newValue===null){elementCreated(this);elementInserted(this);}else if(strAttrName==='suspend-inserted'&&newValue===null){elementInserted(this);}else if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){if(strAttrName==='no-focus'){if(!this.hasAttribute('no-focus')){if((!this.tabIndex)||this.tabIndex===-1){this.tabIndex=0;}}else{this.removeAttribute('tabindex');}}else if(strAttrName==='disabled'){this.classList.remove('down');}else if(strAttrName==='value'){handleDisable(this);}}}},accessors:{value:{get:function(){return this.getAttribute('value');},set:function(newValue){this.setAttribute('value',newValue);}}}});});}
defineButton('gs-email-button','',true,'',function(element){var emailAddress=element.getAttribute('value'),linkIframe,mousedownHandler;if(emailAddress){linkIframe=document.createElement('iframe');document.body.appendChild(linkIframe);linkIframe.setAttribute('src','mailto:'+emailAddress);mousedownHandler=function(){document.body.removeChild(linkIframe);window.removeEventListener('mousedown',mousedownHandler);};window.addEventListener('mousedown',mousedownHandler);}});defineButton('gs-facetime-button','',true,'',function(element){var appleID=element.getAttribute('value');if(appleID){window.open('facetime:'+appleID);}});defineButton('gs-map-button','',true,'',function(element){var strLocation=encodeURIComponent(element.getAttribute('value'));if(strLocation){if(element.hasAttribute('google')===true){window.open('https://maps.google.com/maps?q='+strLocation);}else if(element.hasAttribute('bing')===true){window.open('http://www.bing.com/maps/default.aspx?q='+strLocation);}else{window.open('https://maps.google.com/maps?q='+strLocation);}}});defineButton('gs-phone-button','',true,'',function(element){var phoneNumber=element.getAttribute('value');if(phoneNumber){if(evt.deviceType==='phone'){window.open('tel:'+phoneNumber);}else{GS.msgbox('Phone Number','<center>'+phoneNumber+'</center>',['Done']);}}});defineButton('gs-tracking-button','',true,function(selectedElement){var strService='';if(selectedElement.hasAttribute('usps')){strService='usps';}else if(selectedElement.hasAttribute('ups')){strService='ups';}else if(selectedElement.hasAttribute('fedex')){strService='fedex';}
addProp('Service',true,'<gs-select class="target" value="'+strService+'" mini>'+'   <option value="">None</option>'+'   <option value="usps">USPS</option>'+'   <option value="ups">UPS</option>'+'   <option value="fedex">FEDEX</option>'+'</gs-select>',function(){selectedElement.removeAttribute('usps');selectedElement.removeAttribute('ups');selectedElement.removeAttribute('fedex');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});},function(element){var strTrackingNumber=element.getAttribute('value');if(strTrackingNumber){if(element.hasAttribute('usps')===true){window.open(' https://tools.usps.com/go/TrackConfirmAction?tLabels='+strTrackingNumber);}else if(element.hasAttribute('ups')===true){window.open('http://www.ups.com/WebTracking/processInputRequest?tracknum='+strTrackingNumber);}else if(element.hasAttribute('fedex')===true){window.open('https://www.fedex.com/apps/fedextrack/index.html?tracknumbers='+strTrackingNumber);}else{GS.msgbox('Please Choose...','<center>Please Choose UPS, USPS, or Fedex</center>',['UPS','USPS','Fedex'],function(strAnswer){if(strAnswer==='UPS'){window.open('http://www.ups.com/WebTracking/processInputRequest?tracknum='+strTrackingNumber);}else if(strAnswer==='USPS'){window.open('https://tools.usps.com/go/TrackConfirmAction?tLabels='+strTrackingNumber);}else if(strAnswer==='Fedex'){window.open('https://www.fedex.com/apps/fedextrack/index.html?tracknumbers='+strTrackingNumber);}});}}});defineButton('gs-skype-button','',true,'',function(element){if(element.getAttribute('value')){window.open('skype:'+element.getAttribute('value'));}});defineButton('gs-delete-button','/v1/dev/developer_g/greyspots-'+GS.version()+'/tools/documentation/doc-elem-delete-button.html',true,function(selectedElement){addProp('Source',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('src')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'src',this.value,false);});addProp('Delete Action',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('action-delete')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'action-delete',this.value);});},function(element){if(element.getAttribute('value')){GS.msgbox('Are you sure...','<center>Are you sure you want to delete?</center>',['No','Yes'],function(strAnswer){var queryStringTemplateFunction;if(strAnswer==='Yes'){queryStringTemplateFunction=function(template){var strWrapperTemplate='{{##def.snippet:\n'+'    {{ var qs = jo; }} {{# def.template }}\n'+'#}}\n'+'{{#def.snippet}}';return doT.template(strWrapperTemplate,null,{'template':decodeHTML(template)})(GS.qryToJSON(GS.getQueryString())).trim();};GS.addLoader('gs-delete','Deleting Record...');GS.ajaxJSON('/v1/'+(element.getAttribute('action-delete')||'env/action_delete'),'src='+encodeURIComponent(queryStringTemplateFunction(decodeURIComponent(element.getAttribute('src'))))+'&id='+element.getAttribute('value'),function(data,error){GS.removeLoader('gs-delete');if(!error){GS.triggerEvent(element,'success');if(element.hasAttribute('onsuccess')){new Function(element.getAttribute('onsuccess')).apply(element);}}else{GS.ajaxErrorDialog(data);}});}});}});})();window.addEventListener('design-register-element',function(){registerDesignSnippet('<gs-button>','<gs-button>','gs-button>${1}</gs-button>');designRegisterElement('gs-button','/v1/dev/developer_g/greyspots-'+GS.version()+'/documentation/doc-elem-buttons-toggle.html');window.designElementProperty_GSBUTTON=function(selectedElement){var strIconPos,strIconRotation;addProp('Icon',true,'<div flex-horizontal>'+'     <gs-text id="prop-icon-input" class="target" value="'+(selectedElement.getAttribute('icon')||'')+'" mini flex></gs-text>'+'     <gs-button id="prop-icon-picker-button" mini icononly icon="list"></gs-button>'+'     <style>#prop-icon-picker-button:after {font-size: 1em;}</style>'+'</div>',function(){return setOrRemoveTextAttribute(selectedElement,'icon',this.value);});document.getElementById('prop-icon-picker-button').addEventListener('click',function(){var i,len,html,arrIcons=GS.iconList(),strName,templateElement;for(i=0,len=arrIcons.length,html='';i<len;i+=1){strName=arrIcons[i].name;html+='<gs-block>'+'<gs-button iconleft icon="'+strName+'" dialogclose>'+strName+'</gs-button>'+'</gs-block>';}
templateElement=document.createElement('template');templateElement.setAttribute('data-max-width','1100px');templateElement.innerHTML=ml(function(){/*
                <gs-page>
                    <gs-header><center><h3>Choose An Icon</h3></center></gs-header>
                    <gs-body padded>
                        <gs-grid widths="1,1,1,1" reflow-at="767px">{{HTML}}</gs-grid>
                    </gs-body>
                    <gs-footer><gs-button dialogclose>Cancel</gs-button></gs-footer>
                </gs-page>
            */}).replace('{{HTML}}',html);GS.openDialog(templateElement,'',function(event,strAnswer){var propInput=document.getElementById('prop-icon-input');if(strAnswer!=='Cancel'){propInput.value=strAnswer;GS.triggerEvent(propInput,'change');}});});if(selectedElement.hasAttribute('iconleft')){strIconPos='iconleft';}else if(selectedElement.hasAttribute('iconright')){strIconPos='iconright';}else if(selectedElement.hasAttribute('icontop')){strIconPos='icontop';}else if(selectedElement.hasAttribute('iconbottom')){strIconPos='iconbottom';}else if(selectedElement.hasAttribute('icononly')){strIconPos='icononly';}else{strIconPos='';}
addProp('Icon Position',true,'<gs-select class="target" value="'+strIconPos+'" mini>'+'   <option value="">Default</option>'+'   <option value="iconleft">Left</option>'+'   <option value="iconright">Right</option>'+'   <option value="icontop">Top</option>'+'   <option value="iconbottom">Bottom</option>'+'   <option value="icononly">Icononly</option>'+'</gs-select>',function(){selectedElement.removeAttribute('iconleft');selectedElement.removeAttribute('iconright');selectedElement.removeAttribute('icontop');selectedElement.removeAttribute('iconbottom');selectedElement.removeAttribute('icononly');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});if(selectedElement.hasAttribute('iconrotateright')){strIconRotation='iconrotateright';}else if(selectedElement.hasAttribute('iconrotatedown')){strIconRotation='iconrotatedown';}else if(selectedElement.hasAttribute('iconrotateleft')){strIconRotation='iconrotateleft';}else{strIconRotation='';}
addProp('Icon&nbsp;Rotation',true,'<gs-select class="target" value="'+strIconRotation+'" mini>'+'   <option value="">None</option>'+'   <option value="iconrotateright">90 degrees</option>'+'   <option value="iconrotatedown">180 degrees</option>'+'   <option value="iconrotateleft">270 degrees</option>'+'</gs-select>',function(){selectedElement.removeAttribute('iconrotateright');selectedElement.removeAttribute('iconrotatedown');selectedElement.removeAttribute('iconrotateleft');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});addProp('Href',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('href')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'href',this.value,false);});if(selectedElement.getAttribute('href')){addProp('Target',true,'<gs-select class="target" value="'+(selectedElement.getAttribute('target')||'')+'" mini>'+'<option value="">New Window</option>'+'<option value="_self">Current Window</option>'+'</gs-select>',function(){return setOrRemoveTextAttribute(selectedElement,'target',this.value,false);});}
addProp('Focusable',true,'<gs-checkbox class="target" value="'+(!selectedElement.hasAttribute('no-focus'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'no-focus',(this.value==='true'),false);});addProp('Tabindex',true,'<gs-number class="target" value="'+(selectedElement.getAttribute('tabindex')||'0')+'" mini></gs-number>',function(){return setOrRemoveTextAttribute(selectedElement,'tabindex',this.value);});addProp('Inline',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('inline'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'inline',(this.value==='true'),true);});addProp('Mini',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('mini'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'mini',(this.value==='true'),true);});addProp('Emphasis',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('emphasis'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'emphasis',(this.value==='true'),true);});addProp('Key',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('key')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'key',this.value,false);});addProp('No Modifier Key For Hot Key',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('no-modifier-key')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'no-modifier-key',this.value==='true',true);});addProp('Text',true,'<gs-text class="target" value="'+(selectedElement.textContent||'')+'" mini></gs-text>',function(){selectedElement.textContent=this.value;return selectedElement;});addProp('Title',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('title')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'title',this.value);});addProp('Disabled',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('disabled')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'disabled',this.value==='true',true);});addProp('Dialog Close',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('dialogclose')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'dialogclose',this.value==='true',true);});strVisibilityAttribute='';if(selectedElement.hasAttribute('hidden')){strVisibilityAttribute='hidden';}
if(selectedElement.hasAttribute('hide-on-desktop')){strVisibilityAttribute='hide-on-desktop';}
if(selectedElement.hasAttribute('hide-on-tablet')){strVisibilityAttribute='hide-on-tablet';}
if(selectedElement.hasAttribute('hide-on-phone')){strVisibilityAttribute='hide-on-phone';}
if(selectedElement.hasAttribute('show-on-desktop')){strVisibilityAttribute='show-on-desktop';}
if(selectedElement.hasAttribute('show-on-tablet')){strVisibilityAttribute='show-on-tablet';}
if(selectedElement.hasAttribute('show-on-phone')){strVisibilityAttribute='show-on-phone';}
addProp('Visibility',true,'<gs-select class="target" value="'+strVisibilityAttribute+'" mini>'+'<option value="">Visible</option>'+'<option value="hidden">Invisible</option>'+'<option value="hide-on-desktop">Invisible at desktop size</option>'+'<option value="hide-on-tablet">Invisible at tablet size</option>'+'<option value="hide-on-phone">Invisible at phone size</option>'+'<option value="show-on-desktop">Visible at desktop size</option>'+'<option value="show-on-tablet">Visible at tablet size</option>'+'<option value="show-on-phone">Visible at phone size</option>'+'</gs-select>',function(){selectedElement.removeAttribute('hidden');selectedElement.removeAttribute('hide-on-desktop');selectedElement.removeAttribute('hide-on-tablet');selectedElement.removeAttribute('hide-on-phone');selectedElement.removeAttribute('show-on-desktop');selectedElement.removeAttribute('show-on-tablet');selectedElement.removeAttribute('show-on-phone');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});addProp('Corners',true,'<div class="target">'+'<gs-grid>\n'+'    <gs-block>\n'+'        <gs-checkbox value="'+(!(selectedElement.hasAttribute('remove-all')||selectedElement.hasAttribute('remove-top')||selectedElement.hasAttribute('remove-left')||selectedElement.hasAttribute('remove-top-left'))).toString()+'" remove-right remove-bottom id="round-top-left-corner________"></gs-checkbox>'+'        <gs-checkbox value="'+(!(selectedElement.hasAttribute('remove-all')||selectedElement.hasAttribute('remove-bottom')||selectedElement.hasAttribute('remove-left')||selectedElement.hasAttribute('remove-bottom-left'))).toString()+'" remove-right remove-top id="round-bottom-left-corner________"></gs-checkbox>'+'    </gs-block>\n'+'    <gs-block>\n'+'        <gs-checkbox value="'+(!(selectedElement.hasAttribute('remove-all')||selectedElement.hasAttribute('remove-top')||selectedElement.hasAttribute('remove-right')||selectedElement.hasAttribute('remove-top-right'))).toString()+'" remove-left remove-bottom id="round-top-right-corner________"></gs-checkbox>'+'        <gs-checkbox value="'+(!(selectedElement.hasAttribute('remove-all')||selectedElement.hasAttribute('remove-bottom')||selectedElement.hasAttribute('remove-right')||selectedElement.hasAttribute('remove-bottom-right'))).toString()+'" remove-left remove-top id="round-bottom-right-corner________"></gs-checkbox>'+'    </gs-block>\n'+'</gs-grid>\n'+'</div>',function(){var topLeft=document.getElementById('round-top-left-corner________').value==='true',topRight=document.getElementById('round-top-right-corner________').value==='true',bottomLeft=document.getElementById('round-bottom-left-corner________').value==='true',bottomRight=document.getElementById('round-bottom-right-corner________').value==='true',arrStrAttr=[],i,len;selectedElement.removeAttribute('remove-all');selectedElement.removeAttribute('remove-top');selectedElement.removeAttribute('remove-bottom');selectedElement.removeAttribute('remove-left');selectedElement.removeAttribute('remove-right');selectedElement.removeAttribute('remove-top-left');selectedElement.removeAttribute('remove-top-right');selectedElement.removeAttribute('remove-bottom-left');selectedElement.removeAttribute('remove-bottom-right');if(!topLeft&&!topRight&&!bottomLeft&&!bottomRight){arrStrAttr.push('remove-all');}else if(!topLeft&&!topRight){arrStrAttr.push('remove-top');}else if(!bottomLeft&&!bottomRight){arrStrAttr.push('remove-bottom');}else if(!topLeft&&!bottomLeft){arrStrAttr.push('remove-left');}else if(!topRight&&!bottomRight){arrStrAttr.push('remove-right');}
if(!topLeft&&!bottomLeft&&arrStrAttr[0]!=='remove-all'){arrStrAttr.push('remove-left');}else if(!topLeft&&topRight){arrStrAttr.push('remove-top-left');}else if(!bottomLeft&&bottomRight){arrStrAttr.push('remove-bottom-left');}
if(!topRight&&!bottomRight&&arrStrAttr[0]!=='remove-all'){arrStrAttr.push('remove-right');}else if(topLeft&&!topRight){arrStrAttr.push('remove-top-right');}else if(bottomLeft&&!bottomRight){arrStrAttr.push('remove-bottom-right');}
for(i=0,len=arrStrAttr.length;i<len;i+=1){selectedElement.setAttribute(arrStrAttr[i],'');}
return selectedElement;});addFlexProps(selectedElement);addProp('suspend-inserted',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-inserted')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-inserted',this.value==='true',true);});};});document.addEventListener('DOMContentLoaded',function(){'use strict';function refreshAnchor(element){var strLink=element.getAttribute('href')||element.getAttribute('value');if(strLink){element.anchorElement=document.createElement('a');element.anchorElement.setAttribute('gs-dynamic','');element.anchorElement.setAttribute('target',element.getAttribute('target')||'_blank');element.anchorElement.setAttribute('href',strLink);element.appendChild(element.anchorElement);}else if(element.anchorElement){element.removeChild(element.anchorElement);}}
function elementCreated(element){if(!element.hasAttribute('suspend-created')){}}
function elementInserted(element){var strKey;if(!element.hasAttribute('suspend-created')&&!element.hasAttribute('suspend-inserted')){if(!element.inserted){element.inserted=true;if(!element.hasAttribute('no-focus')){if((!element.tabIndex)||element.tabIndex===-1){element.tabIndex=0;}}else{element.removeAttribute('tabindex');}
element.classList.remove('down');element.classList.remove('hover');if(!evt.touchDevice){element.addEventListener(evt.mousedown,function(event){element.classList.add('down');});element.addEventListener(evt.mouseout,function(event){element.classList.remove('down');element.classList.remove('hover');});element.addEventListener(evt.mouseover,function(event){element.classList.remove('down');element.classList.add('hover');});element.addEventListener('keydown',function(event){if(!element.hasAttribute('disabled')&&(event.keyCode===13||event.keyCode===32)){element.classList.add('down');}});element.addEventListener('keyup',function(event){if(!element.hasAttribute('disabled')&&(event.keyCode===13||event.keyCode===32)){GS.triggerEvent(element,'click');}});}
refreshAnchor(element);element.addEventListener('click',function(event){element.classList.remove('down');});element.addEventListener('keypress',function(event){if(event.keyCode===13||event.keyCode===32){event.preventDefault();event.stopPropagation();}});strKey=element.getAttribute('key');if(strKey){if(GS.keyCode(strKey)){if(strKey.match(/[arfcvxzntypq]/gim)){console.warn('gs-button Warning: by setting the hot key of this button to "'+strKey+'" you may be overriding browser functionality.',element);}
window.addEventListener('keydown',function(event){if(String(event.keyCode||event.which)===GS.keyCode(strKey)&&((element.hasAttribute('no-modifier-key')&&!event.metaKey&&!event.ctrlKey)||(!element.hasAttribute('no-modifier-key')&&(event.metaKey||event.ctrlKey)))){event.preventDefault();event.stopPropagation();element.focus();GS.triggerEvent(element,'click');}});}else if(strKey.length>1){console.error('gs-button Error: \'key="'+strKey+'"\' is not a valid hot-key.',element);}}}}}
xtag.register('gs-button',{lifecycle:{created:function(){elementCreated(this);},inserted:function(){elementInserted(this);},attributeChanged:function(strAttrName,oldValue,newValue){if(strAttrName==='suspend-created'&&newValue===null){elementCreated(this);elementInserted(this);}else if(strAttrName==='suspend-inserted'&&newValue===null){elementInserted(this);}else if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){if(strAttrName==='no-focus'){if(!this.hasAttribute('no-focus')&&!this.hasAttribute('tabindex')){this.setAttribute('tabindex',0);}else if(this.hasAttribute('no-focus')){this.removeAttribute('tabindex');}}else if(strAttrName==='disabled'){this.classList.remove('down');}else if(strAttrName==='href'||strAttrName==='target'){refreshAnchor(this);}}}},events:{},accessors:{},methods:{}});});window.addEventListener('design-register-element',function(){'use strict';registerDesignSnippet('<gs-checkbox>','<gs-checkbox>','gs-checkbox value="0" column="${1:ready_to_ship}">${2}</gs-checkbox>');registerDesignSnippet('<gs-checkbox> With Label','<gs-checkbox>','label for="${1:date-insert-ready_to_ship}">${2:Ready To Ship?}:</label>\n'+'<gs-checkbox id="${1:date-insert-ready_to_ship}" value="0" column="${3:ready_to_ship}"></gs-checkbox>');designRegisterElement('gs-checkbox','/v1/dev/developer_g/greyspots-'+GS.version()+'/tools/documentation/doc-elem-checkbox.html');window.designElementProperty_GSCHECKBOX=function(selectedElement){var strVisibilityAttribute;addProp('Column',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('column')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'column',this.value);});addProp('Value',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('value')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'value',this.value);});addProp('Triple State',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('triplestate'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'triplestate',(this.value==='true'),true);});addProp('Column In Querystring',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('qs')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'qs',this.value,false);});addProp('Mini',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('mini'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'mini',(this.value==='true'),true);});addProp('Inline',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('inline'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'inline',(this.value==='true'),true);});addProp('Title',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('title')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'title',this.value);});addProp('Tabindex',true,'<gs-number class="target" value="'+(selectedElement.getAttribute('tabindex')||'')+'" mini></gs-number>',function(){return setOrRemoveTextAttribute(selectedElement,'tabindex',this.value);});strVisibilityAttribute='';if(selectedElement.hasAttribute('hidden')){strVisibilityAttribute='hidden';}
if(selectedElement.hasAttribute('hide-on-desktop')){strVisibilityAttribute='hide-on-desktop';}
if(selectedElement.hasAttribute('hide-on-tablet')){strVisibilityAttribute='hide-on-tablet';}
if(selectedElement.hasAttribute('hide-on-phone')){strVisibilityAttribute='hide-on-phone';}
if(selectedElement.hasAttribute('show-on-desktop')){strVisibilityAttribute='show-on-desktop';}
if(selectedElement.hasAttribute('show-on-tablet')){strVisibilityAttribute='show-on-tablet';}
if(selectedElement.hasAttribute('show-on-phone')){strVisibilityAttribute='show-on-phone';}
addProp('Visibility',true,'<gs-select class="target" value="'+strVisibilityAttribute+'" mini>'+'<option value="">Visible</option>'+'<option value="hidden">Invisible</option>'+'<option value="hide-on-desktop">Invisible at desktop size</option>'+'<option value="hide-on-tablet">Invisible at tablet size</option>'+'<option value="hide-on-phone">Invisible at phone size</option>'+'<option value="show-on-desktop">Visible at desktop size</option>'+'<option value="show-on-tablet">Visible at tablet size</option>'+'<option value="show-on-phone">Visible at phone size</option>'+'</gs-select>',function(){selectedElement.removeAttribute('hidden');selectedElement.removeAttribute('hide-on-desktop');selectedElement.removeAttribute('hide-on-tablet');selectedElement.removeAttribute('hide-on-phone');selectedElement.removeAttribute('show-on-desktop');selectedElement.removeAttribute('show-on-tablet');selectedElement.removeAttribute('show-on-phone');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});addProp('Disabled',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('disabled')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'disabled',this.value==='true',true);});addProp('Corners',true,'<div class="target">'+'<gs-checkbox value="'+(!(selectedElement.hasAttribute('remove-all')||selectedElement.hasAttribute('remove-top')||selectedElement.hasAttribute('remove-left')||selectedElement.hasAttribute('remove-top-left'))).toString()+'" remove-right remove-bottom id="round-top-left-corner________" inline></gs-checkbox>'+'<gs-checkbox value="'+(!(selectedElement.hasAttribute('remove-all')||selectedElement.hasAttribute('remove-top')||selectedElement.hasAttribute('remove-right')||selectedElement.hasAttribute('remove-top-right'))).toString()+'" remove-left remove-bottom id="round-top-right-corner________" inline></gs-checkbox><br />'+'<gs-checkbox value="'+(!(selectedElement.hasAttribute('remove-all')||selectedElement.hasAttribute('remove-bottom')||selectedElement.hasAttribute('remove-left')||selectedElement.hasAttribute('remove-bottom-left'))).toString()+'" remove-right remove-top id="round-bottom-left-corner________" inline></gs-checkbox>'+'<gs-checkbox value="'+(!(selectedElement.hasAttribute('remove-all')||selectedElement.hasAttribute('remove-bottom')||selectedElement.hasAttribute('remove-right')||selectedElement.hasAttribute('remove-bottom-right'))).toString()+'" remove-left remove-top id="round-bottom-right-corner________" inline></gs-checkbox>'+'</div>',function(){var topLeft=document.getElementById('round-top-left-corner________').value==='true',topRight=document.getElementById('round-top-right-corner________').value==='true',bottomLeft=document.getElementById('round-bottom-left-corner________').value==='true',bottomRight=document.getElementById('round-bottom-right-corner________').value==='true',arrStrAttr=[],i,len;selectedElement.removeAttribute('remove-all');selectedElement.removeAttribute('remove-top');selectedElement.removeAttribute('remove-bottom');selectedElement.removeAttribute('remove-left');selectedElement.removeAttribute('remove-right');selectedElement.removeAttribute('remove-top-left');selectedElement.removeAttribute('remove-top-right');selectedElement.removeAttribute('remove-bottom-left');selectedElement.removeAttribute('remove-bottom-right');if(!topLeft&&!topRight&&!bottomLeft&&!bottomRight){arrStrAttr.push('remove-all');}else if(!topLeft&&!topRight){arrStrAttr.push('remove-top');}else if(!bottomLeft&&!bottomRight){arrStrAttr.push('remove-bottom');}else if(!topLeft&&!bottomLeft){arrStrAttr.push('remove-left');}else if(!topRight&&!bottomRight){arrStrAttr.push('remove-right');}
if(!topLeft&&!bottomLeft&&arrStrAttr[0]!=='remove-all'){arrStrAttr.push('remove-left');}else if(!topLeft&&topRight){arrStrAttr.push('remove-top-left');}else if(!bottomLeft&&bottomRight){arrStrAttr.push('remove-bottom-left');}
if(!topRight&&!bottomRight&&arrStrAttr[0]!=='remove-all'){arrStrAttr.push('remove-right');}else if(topLeft&&!topRight){arrStrAttr.push('remove-top-right');}else if(bottomLeft&&!bottomRight){arrStrAttr.push('remove-bottom-right');}
for(i=0,len=arrStrAttr.length;i<len;i+=1){selectedElement.setAttribute(arrStrAttr[i],'');}
return selectedElement;});addFlexProps(selectedElement);addProp('suspend-inserted',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-inserted')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-inserted',this.value==='true',true);});};});document.addEventListener('DOMContentLoaded',function(){'use strict';function pushReplacePopHandler(element){element.value=GS.qryGetVal(GS.getQueryString(),element.getAttribute('qs'));}
function elementCreated(element){if(!element.hasAttribute('suspend-created')){}}
function elementInserted(element){var strQSValue;if(!element.hasAttribute('suspend-created')&&!element.hasAttribute('suspend-inserted')){if(!element.inserted){element.inserted=true;if(element.hasAttribute('qs')){strQSValue=GS.qryGetVal(GS.getQueryString(),element.getAttribute('qs'));if(strQSValue!==''||!element.getAttribute('value')){element.setAttribute('value',strQSValue);}
window.addEventListener('pushstate',function(){pushReplacePopHandler(element);});window.addEventListener('replacestate',function(){pushReplacePopHandler(element);});window.addEventListener('popstate',function(){pushReplacePopHandler(element);});}
element.value=element.getAttribute('value')||false;if(!element.tabIndex){element.tabIndex=0;}}}}
xtag.register('gs-checkbox',{lifecycle:{created:function(){if(!this.getAttribute('value')&&this.value!==null&&this.value!==undefined&&(typeof this.value==='boolean'||this.value==='-1'||this.value==='0'||this.value==='true'||this.value==='false'||this.value==='null'||this.value==='n')){this.setAttribute('value',this.value);delete this.value;}
elementCreated(this);},inserted:function(){elementInserted(this);},attributeChanged:function(strAttrName,oldValue,newValue){if(strAttrName==='suspend-created'&&newValue===null){elementCreated(this);elementInserted(this);}else if(strAttrName==='suspend-inserted'&&newValue===null){elementInserted(this);}else if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){}}},events:{'mousedown':function(){if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){this.classList.add('down');}},'mouseout':function(){if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){if(this.classList.contains('down')){this.classList.remove('down');}}},'click':function(event){var strValue,bolTripleState;if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){strValue=this.getAttribute('value');bolTripleState=this.hasAttribute('triplestate');if(strValue==='false'){this.setAttribute('value','true');}else if(strValue==='true'){if(bolTripleState){this.setAttribute('value','null');}else{this.setAttribute('value','false');}}else if(strValue==='null'){this.setAttribute('value','false');}else if(strValue==='0'){this.setAttribute('value','-1');}else if(strValue==='-1'){if(bolTripleState){this.setAttribute('value','n');}else{this.setAttribute('value','0');}}else if(strValue==='n'){this.setAttribute('value','0');}else if(strValue===0){this.setAttribute('value',-1);}else if(strValue===-1){if(bolTripleState){this.setAttribute('value','n');}else{this.setAttribute('value',0);}}else if(strValue==='n'){this.setAttribute('value',0);}else if(strValue===false){this.setAttribute('value',true);}else if(strValue===true){if(bolTripleState){this.setAttribute('value',null);}else{this.setAttribute('value',false);}}else if(strValue===null){this.setAttribute('value',false);}else{this.setAttribute('value','true');}
this.classList.remove('down');xtag.fireEvent(this,'change',{bubbles:true,cancelable:true});}},'keydown':function(event){if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){if(event.keyCode===13||event.keyCode===32){event.preventDefault();event.stopPropagation();}
if(!this.attributes.disabled&&(event.keyCode===13||event.keyCode===32)){xtag.fireEvent(this,'click',{bubbles:true,cancelable:true});}}}},accessors:{value:{get:function(){return this.getAttribute('value');},set:function(newValue){this.setAttribute('value',newValue);}},textValue:{get:function(){var currentValue=this.getAttribute('value');if(currentValue==='-1'||currentValue==='true'){return'YES';}
if(currentValue==='0'||currentValue==='false'){return'NO';}
return'';},set:function(newValue){if(newValue==='YES'){newValue='true';}
if(newValue==='NO'){newValue='false';}
this.setAttribute('value',newValue);}}},methods:{}});});window.addEventListener('design-register-element',function(){'use strict';registerDesignSnippet('<gs-combo>','<gs-combo>','gs-combo src="${1:test.tpeople}" column="${2}"></gs-combo>');designRegisterElement('gs-combo','/v1/dev/developer_g/greyspots-'+GS.version()+'/tools/documentation/doc-elem-combo.html');window.designElementProperty_GSCOMBO=function(selectedElement){addProp('Source',true,'<gs-memo class="target" value="'+(decodeURIComponent(selectedElement.getAttribute('src')||selectedElement.getAttribute('source')||''))+'" mini></gs-memo>',function(){return setOrRemoveTextAttribute(selectedElement,'src',encodeURIComponent(this.value));});addProp('Columns',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('cols')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'cols',this.value);});addProp('Initialize Source',true,'<gs-memo class="target" value="'+(decodeURIComponent(selectedElement.getAttribute('initialize')||''))+'" mini></gs-memo>',function(){return setOrRemoveTextAttribute(selectedElement,'initialize',encodeURIComponent(this.value));});addProp('Hide Columns',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('hide')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'hide',this.value);});addProp('Where',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('where')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'where',this.value);});addProp('Order By',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('ord')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'ord',this.value);});addProp('Limit',true,'<gs-number class="target" value="'+(selectedElement.getAttribute('limit')||'')+'" mini></gs-number>',function(){return setOrRemoveTextAttribute(selectedElement,'limit',this.value);});addProp('Offset',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('offset')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'offset',this.value);});addProp('Column',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('column')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'column',this.value);});addProp('Value',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('value')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'value',this.value);});addProp('Column In Querystring',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('qs')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'qs',this.value,false);});addProp('Allow Empty',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('allow-empty'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'allow-empty',(this.value==='true'),true);});addProp('Limit&nbsp;To&nbsp;List',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('limit-to-list'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'limit-to-list',(this.value==='true'),true);});addProp('Mini',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('mini'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'mini',(this.value==='true'),true);});addProp('Title',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('title')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'title',this.value);});addProp('Tabindex',true,'<gs-number class="target" value="'+(selectedElement.getAttribute('tabindex')||'')+'" mini></gs-number>',function(){return setOrRemoveTextAttribute(selectedElement,'tabindex',this.value);});strVisibilityAttribute='';if(selectedElement.hasAttribute('hidden')){strVisibilityAttribute='hidden';}
if(selectedElement.hasAttribute('hide-on-desktop')){strVisibilityAttribute='hide-on-desktop';}
if(selectedElement.hasAttribute('hide-on-tablet')){strVisibilityAttribute='hide-on-tablet';}
if(selectedElement.hasAttribute('hide-on-phone')){strVisibilityAttribute='hide-on-phone';}
if(selectedElement.hasAttribute('show-on-desktop')){strVisibilityAttribute='show-on-desktop';}
if(selectedElement.hasAttribute('show-on-tablet')){strVisibilityAttribute='show-on-tablet';}
if(selectedElement.hasAttribute('show-on-phone')){strVisibilityAttribute='show-on-phone';}
addProp('Visibility',true,'<gs-select class="target" value="'+strVisibilityAttribute+'" mini>'+'<option value="">Visible</option>'+'<option value="hidden">Invisible</option>'+'<option value="hide-on-desktop">Invisible at desktop size</option>'+'<option value="hide-on-tablet">Invisible at tablet size</option>'+'<option value="hide-on-phone">Invisible at phone size</option>'+'<option value="show-on-desktop">Visible at desktop size</option>'+'<option value="show-on-tablet">Visible at tablet size</option>'+'<option value="show-on-phone">Visible at phone size</option>'+'</gs-select>',function(){selectedElement.removeAttribute('hidden');selectedElement.removeAttribute('hide-on-desktop');selectedElement.removeAttribute('hide-on-tablet');selectedElement.removeAttribute('hide-on-phone');selectedElement.removeAttribute('show-on-desktop');selectedElement.removeAttribute('show-on-tablet');selectedElement.removeAttribute('show-on-phone');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});addProp('Disabled',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('disabled')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'disabled',this.value==='true',true);});addProp('Refresh On Querystring Columns',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('refresh-on-querystring-values')||'')+'" mini></gs-text>',function(){this.removeAttribute('refresh-on-querystring-change');return setOrRemoveTextAttribute(selectedElement,'refresh-on-querystring-values',this.value);});addProp('Refresh On Querystring Change',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('refresh-on-querystring-change'))+'" mini></gs-checkbox>',function(){this.removeAttribute('refresh-on-querystring-values');return setOrRemoveBooleanAttribute(selectedElement,'refresh-on-querystring-change',this.value==='true',true);});addFlexProps(selectedElement);addProp('suspend-inserted',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-inserted')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-inserted',this.value==='true',true);});};});document.addEventListener('DOMContentLoaded',function(){'use strict';function scrollToSelectedRecord(element){var positioningContainer,scrollingContainer,arrTrs,i,len,intScrollTop,bolFoundSelected=false;if(element.currentDropDownContainer){positioningContainer=xtag.queryChildren(element.currentDropDownContainer,'.gs-combo-positioning-container')[0];scrollingContainer=xtag.queryChildren(positioningContainer,'.gs-combo-scroll-container')[0];arrTrs=xtag.query(element.dropDownTable,'tr');for(i=0,intScrollTop=0,len=arrTrs.length;i<len;i+=1){if(arrTrs[i].hasAttribute('selected')){intScrollTop+=arrTrs[i].offsetHeight/2;bolFoundSelected=true;break;}else{intScrollTop+=arrTrs[i].offsetHeight;}}
if(bolFoundSelected){intScrollTop=intScrollTop-scrollingContainer.offsetHeight/2;}else{intScrollTop=0;}
scrollingContainer.scrollTop=intScrollTop;}}
function clearSelection(element){var i,len,arrSelectedTrs;arrSelectedTrs=xtag.queryChildren(xtag.queryChildren(element.dropDownTable,'tbody')[0],'tr[selected]');for(i=0,len=arrSelectedTrs.length;i<len;i+=1){arrSelectedTrs[i].removeAttribute('selected');}}
function highlightRecord(element,record){clearSelection(element);record.setAttribute('selected','');}
function findRecordFromString(element,strSearchString,bolPartialMatchAllowed){var i,len,matchedRecord,arrTrs=xtag.queryChildren(xtag.queryChildren(element.dropDownTable,'tbody')[0],'tr');if(bolPartialMatchAllowed===true){strSearchString=strSearchString.toLowerCase();for(i=0,len=arrTrs.length;i<len;i+=1){if(xtag.queryChildren(arrTrs[i],'td')[0].textContent.toLowerCase().indexOf(strSearchString)===0){matchedRecord=arrTrs[i];break;}}}else{for(i=0,len=arrTrs.length;i<len;i+=1){if(arrTrs[i].getAttribute('value')===strSearchString||xtag.queryChildren(arrTrs[i],'td')[0].textContent===strSearchString){matchedRecord=arrTrs[i];break;}}}
return matchedRecord;}
function selectRecord(element,record,bolChange){highlightRecord(element,record);handleChange(element,bolChange);}
function selectRecordFromValue(element,strValue,bolChange){var record=findRecordFromString(element,strValue,false);if(record){selectRecord(element,record,bolChange);}else if(element.hasAttribute('limit-to-list')&&bolChange){if(strValue===''&&element.hasAttribute('allow-empty')){handleChange(element,bolChange);}else{alert('The text you entered is not in the list');openDropDown(element);GS.setInputSelection(element.control,0,strValue.length);}}else{clearSelection(element);if(!element.hasAttribute('limit-to-list')){element.control.value=strValue;element.innerValue=strValue;}
handleChange(element,bolChange);}}
function handleChange(element,bolChange){var arrSelectedTrs,strHiddenValue='',strTextValue='',beforechangeevent,oldRecord,oldInnerValue=element.innerValue,oldControlValue=element.control.value;if(element.dropDownTable){arrSelectedTrs=xtag.queryChildren(xtag.queryChildren(element.dropDownTable,'tbody')[0],'tr[selected]');if(arrSelectedTrs.length>0){strHiddenValue=arrSelectedTrs[0].getAttribute('value');var firstTd=xtag.queryChildren(arrSelectedTrs[0],'td')[0],lastChild=firstTd.lastElementChild;if(lastChild&&lastChild.tagName.substring(0,3)==='GS-'){strTextValue=lastChild.textValue||lastChild.value||lastChild.textContent;}else{strTextValue=firstTd.textContent;}}else{strTextValue=element.control.value;}}else{strTextValue=element.control.value;}
element.innerValue=strHiddenValue||strTextValue;element.control.value=strTextValue||strHiddenValue;if(bolChange){if(document.createEvent){beforechangeevent=document.createEvent('HTMLEvents');beforechangeevent.initEvent('beforechange',true,true);}else{beforechangeevent=document.createEventObject();beforechangeevent.eventType='beforechange';}
beforechangeevent.eventName='beforechange';if(document.createEvent){element.dispatchEvent(beforechangeevent);}else{element.fireEvent("on"+beforechangeevent.eventType,beforechangeevent);}
if(beforechangeevent.defaultPrevented!==true){xtag.fireEvent(element,'change',{bubbles:true,cancelable:true});}else{element.innerValue=oldInnerValue;element.control.value=oldControlValue;oldRecord=findRecordFromString(element,oldInnerValue,false);if(oldRecord){highlightRecord(element,oldRecord);}else{clearSelection(element);}}
element.ignoreChange=false;}}
function openDropDown(element){if(!element.droppingDown){if(element.getAttribute('src')||element.getAttribute('source')){getData(element,false,true,function(){dropDown(element);});}else{dropDown(element);}
element.droppingDown=true;}}
function dropDown(element){var dropDownContainer=document.createElement('div'),overlay,positioningContainer,scrollContainer,observer;element.control.focus();dropDownContainer.classList.add('gs-combo-dropdown-container');dropDownContainer.setAttribute('gs-dynamic','');dropDownContainer.innerHTML='<div class="gs-combo-positioning-container" gs-dynamic>'+'    <div class="gs-combo-scroll-container" gs-dynamic></div>'+'</div>';document.body.appendChild(dropDownContainer);positioningContainer=xtag.queryChildren(dropDownContainer,'.gs-combo-positioning-container')[0];scrollContainer=xtag.queryChildren(positioningContainer,'.gs-combo-scroll-container')[0];element.currentDropDownContainer=dropDownContainer;if(element.dropDownTable){scrollContainer.appendChild(element.dropDownTable);}else{scrollContainer.innerHTML=element.initalHTML;}
observer=new MutationObserver(function(mutations){dropDownSize(element);});observer.observe(scrollContainer,{childList:true,subtree:true});dropDownSize(element);}
function dropDownSize(element){var dropDownContainer=element.currentDropDownContainer,positioningContainer=xtag.queryChildren(dropDownContainer,'.gs-combo-positioning-container')[0],scrollContainer=xtag.queryChildren(positioningContainer,'.gs-combo-scroll-container')[0],overlay,jsnComboOffset,intComboHeight,intComboWidth,intViewportWidth,intViewportHeight,intFromControlToBottomHeight,intFromControlToTopHeight,intContentHeight,intNewWidth,strWidth='',strHeight='',strLeft='',strTop='',strBottom='';intComboHeight=element.offsetHeight;intComboWidth=element.offsetWidth;intViewportHeight=window.innerHeight;intViewportWidth=window.innerWidth;jsnComboOffset=GS.getElementOffset(element);intContentHeight=scrollContainer.scrollHeight;intFromControlToBottomHeight=intViewportHeight-(jsnComboOffset.top+intComboHeight);intFromControlToTopHeight=jsnComboOffset.top;if(!evt.touchDevice){if(window.innerHeight<500&&intContentHeight>intFromControlToTopHeight&&intContentHeight>intFromControlToBottomHeight){strHeight=window.innerHeight+'px';strTop='0px';}else if(intContentHeight<500){strHeight='200px';if(intFromControlToBottomHeight>intFromControlToTopHeight||intFromControlToBottomHeight>200){strTop=(intFromControlToTopHeight+intComboHeight)+'px';}else{strBottom=(intFromControlToBottomHeight+intComboHeight)+'px';}}else if(intFromControlToBottomHeight>=intFromControlToTopHeight){strHeight=intFromControlToBottomHeight+'px';strTop=(intFromControlToTopHeight+intComboHeight)+'px';}else{strHeight=intFromControlToTopHeight+'px';strBottom=(intFromControlToBottomHeight+intComboHeight)+'px';}}else{if(intFromControlToBottomHeight>200&&intContentHeight<500){strHeight=intFromControlToBottomHeight+'px';strTop=(intFromControlToTopHeight+intComboHeight)+'px';}else if(intFromControlToTopHeight>200&&intContentHeight<500){strHeight=intFromControlToTopHeight+'px';strBottom=(intFromControlToBottomHeight+intComboHeight)+'px';}else{strHeight=window.innerHeight+'px';strTop='0px';}}
if(scrollContainer.scrollWidth<=scrollContainer.offsetWidth){if(intComboWidth<150){intNewWidth=(window.innerWidth-jsnComboOffset.left)-20;if(intNewWidth<300){strWidth=intNewWidth+'px';}else{strWidth='300px';}}else{strWidth=intComboWidth+'px';}
strLeft=jsnComboOffset.left+'px';}else{strWidth='100%';strLeft='0px';}
positioningContainer.style.left=strLeft;positioningContainer.style.top=strTop;positioningContainer.style.bottom=strBottom;positioningContainer.style.width=strWidth;positioningContainer.style.height=strHeight;if(strTop){dropDownContainer.classList.add('below');}else{dropDownContainer.classList.add('above');}
if(scrollContainer.clientWidth<scrollContainer.scrollWidth){scrollContainer.classList.add('reflow');}
if(intContentHeight<scrollContainer.clientHeight){positioningContainer.style.height=intContentHeight+'px';}
element.classList.add('open');element.open=true;bindDropDown(element);scrollToSelectedRecord(element);}
function bindDropDown(element){var selectableTrs,closeDropDownHandler,selectRecordHandler,i,len,unbindSelectRecordHandler,unbindDropDownEvents,wheelHandler;wheelHandler=function(event){var tableElement=GS.findParentElement(event.target,'.gs-combo-dropdown-container');if(tableElement!==element.currentDropDownContainer){closeDropDownHandler();}};unbindDropDownEvents=function(){var i,len;for(i=0,len=selectableTrs.length;i<len;i+=1){selectableTrs[i].removeEventListener('click',selectRecordHandler);}
window.removeEventListener('resize',closeDropDownHandler);window.removeEventListener('orientationchange',closeDropDownHandler);window.removeEventListener('mousewheel',wheelHandler);window.removeEventListener('click',closeDropDownHandler);};selectableTrs=xtag.queryChildren(xtag.queryChildren(element.dropDownTable,'tbody')[0],'tr');selectRecordHandler=function(event){selectRecord(element,GS.findParentTag(event.target,'tr'),true);closeDropDownHandler();};for(i=0,len=selectableTrs.length;i<len;i+=1){selectableTrs[i].addEventListener('click',selectRecordHandler);}
closeDropDownHandler=function(event){closeDropDown(element);unbindDropDownEvents();};window.addEventListener('resize',closeDropDownHandler);window.addEventListener('orientationchange',closeDropDownHandler);window.addEventListener('mousewheel',wheelHandler);window.addEventListener('click',closeDropDownHandler);}
function closeDropDown(element){if(element.currentDropDownContainer){document.body.removeChild(element.currentDropDownContainer);element.currentDropDownContainer=undefined;element.classList.remove('open');element.open=false;element.droppingDown=false;}}
function handleKeyDown(element,event){var intKeyCode=event.keyCode||event.which,selectedTr,trs,i,len,selectedRecordIndex,firstTd,lastChild,strTextValue;if(!element.hasAttribute('disabled')){if((intKeyCode===40||intKeyCode===38)&&!event.shiftKey&&!event.metaKey&&!event.ctrlKey&&!element.error){if(!element.open){openDropDown(element);}else{trs=xtag.queryChildren(xtag.queryChildren(element.dropDownTable,'tbody')[0],'tr');for(i=0,len=trs.length;i<len;i+=1){if(trs[i].hasAttribute('selected')){selectedRecordIndex=i;selectedTr=trs[i];trs[i].removeAttribute('selected');break;}}
if(intKeyCode===40){if(!selectedTr||selectedRecordIndex===trs.length-1){highlightRecord(element,trs[0]);selectedTr=trs[0];}else{highlightRecord(element,trs[selectedRecordIndex+1]);selectedTr=trs[selectedRecordIndex+1];}}else if(intKeyCode===38){if(!selectedTr||selectedRecordIndex===0){highlightRecord(element,trs[trs.length-1]);selectedTr=trs[trs.length-1];}else{highlightRecord(element,trs[selectedRecordIndex-1]);selectedTr=trs[selectedRecordIndex-1];}}
scrollToSelectedRecord(element);}
if(selectedTr){element.control.value=xtag.queryChildren(selectedTr,'td')[0].textContent;}
GS.setInputSelection(element.control,0,element.control.value.length);event.preventDefault();event.stopPropagation();}else if((intKeyCode===39)&&!event.shiftKey&&!event.metaKey&&!event.ctrlKey&&!element.error){selectedTr=xtag.queryChildren(xtag.queryChildren(element.dropDownTable,'tbody')[0],'tr[selected]')[0];if(selectedTr){firstTd=xtag.queryChildren(selectedTr,'td')[0];lastChild=firstTd.lastElementChild;if(lastChild&&lastChild.tagName.substring(0,3)==='GS-'){strTextValue=lastChild.textValue||lastChild.value||lastChild.textContent;}else{strTextValue=firstTd.textContent;}
selectRecord(element,selectedTr,element.innerValue!==(selectedTr.getAttribute('value')||strTextValue));}
event.stopPropagation();}else if(event.keyCode===13||event.keyCode===9){if(element.dropDownTable&&xtag.queryChildren(xtag.queryChildren(element.dropDownTable,'tbody')[0],'tr[selected]').length>0){selectRecordFromValue(element,element.control.value,true);element.ignoreChange=true;}
closeDropDown(element);}else if(!event.metaKey&&!event.ctrlKey&&event.keyCode!==37&&event.keyCode!==38&&event.keyCode!==39&&event.keyCode!==40&&event.keyCode!==46&&event.keyCode!==8){element.attemptSearchOnNextKeyup=true;}}else{if(event.keyCode!==9){event.preventDefault();event.stopPropagation();}}}
function handleKeyUp(element,event){var intKeyCode=event.keyCode||event.which,strSearch=element.control.value,matchRecord;if(element.attemptSearchOnNextKeyup===true&&strSearch&&GS.getInputSelection(element.control).start===strSearch.length){matchRecord=findRecordFromString(element,strSearch,true);if(matchRecord){highlightRecord(element,matchRecord);element.control.value=xtag.queryChildren(matchRecord,'td')[0].textContent;GS.setInputSelection(element.control,strSearch.length,element.control.value.length);scrollToSelectedRecord(element);}else{clearSelection(element);}}
if(element.attemptSearchOnNextKeyup===true){element.attemptSearchOnNextKeyup=false;}}
function getData(element,bolInitalLoad,bolClearPrevious,callback){var data,strLink,dataFunction,strInitalize=queryStringTemplate(element,decodeURIComponent(element.getAttribute('initialize')||'')),strSource=queryStringTemplate(element,decodeURIComponent(element.getAttribute('src')||element.getAttribute('source')||'')),strCols=element.getAttribute('cols')||'';if(strInitalize&&bolInitalLoad){strLink='/v1/'+(element.getAttribute('action-select')||'env/action_select')+'?src='+encodeURIComponent(strInitalize);}else{strLink='/v1/'+(element.getAttribute('action-select')||'env/action_select')+'?src='+encodeURIComponent(strSource);}
strLink+='&where='+encodeURIComponent(queryStringTemplate(element,decodeURIComponent(element.getAttribute('where')||'')))+'&limit='+encodeURIComponent(queryStringTemplate(element,decodeURIComponent(element.getAttribute('limit')||'')))+'&offset='+encodeURIComponent(queryStringTemplate(element,decodeURIComponent(element.getAttribute('offset')||'')))+'&order_by='+encodeURIComponent(queryStringTemplate(element,decodeURIComponent(element.getAttribute('ord')||'')))+'&cols='+encodeURIComponent(strCols);if(GS.dataFetch(strLink,bolClearPrevious)){data=GS.dataFetch(strLink,bolClearPrevious);handleData(element,bolInitalLoad,data.response,data.error);}else{dataFunction=function(event){document.removeEventListener('dataready_'+encodeURIComponent(strLink),dataFunction);handleData(element,bolInitalLoad,event.detail.response,event.detail.error);if(typeof callback==='function'){callback();}};document.addEventListener('dataready_'+encodeURIComponent(strLink),dataFunction);}}
function handleData(element,bolInitalLoad,data,error){var divElement,tableElement,theadElement,theadCellElements,tbodyElement,tbodyCellElements,lastRecordElement,currentCellLabelElement,template,i,len,arrHeaders=[],strTemplate,arrHide,strHeaderCells,strRecordCells,tableTemplateElement,recordElements,recordElement;element.classList.remove('error');element.dropDownButton.setAttribute('title','');element.dropDownButton.setAttribute('icon','angle-down');if(!error){element.error=false;if(element.tableTemplate){strTemplate=element.tableTemplate;}else{arrHide=(element.getAttribute('hide')||'').split(/[\s]*,[\s]*/);for(i=0,len=data.arr_column.length,strHeaderCells='',strRecordCells='';i<len;i+=1){if(arrHide.indexOf((i+1)+'')===-1&&arrHide.indexOf(data.arr_column[i])===-1){strHeaderCells+='<th gs-dynamic>'+encodeHTML(data.arr_column[i])+'</th> ';strRecordCells+='<td gs-dynamic>{{! row[\''+data.arr_column[i]+'\'] }}</td> ';}}
strTemplate='<table gs-dynamic>'+'<thead gs-dynamic>'+'<tr gs-dynamic>'+
strHeaderCells+'</tr>'+'</thead>'+'<tbody gs-dynamic>'+'<tr value="{{! row[\''+data.arr_column[0]+'\'] }}" gs-dynamic>'+
strRecordCells+'</tr>'+'</tbody>'+'<table>';}
divElement=document.createElement('div');divElement.innerHTML=strTemplate;tableElement=xtag.queryChildren(divElement,'table')[0];theadElement=xtag.queryChildren(tableElement,'thead')[0];tbodyElement=xtag.queryChildren(tableElement,'tbody')[0];if(tbodyElement){recordElement=xtag.queryChildren(tbodyElement,'tr')[0];if(recordElement){if(theadElement){theadCellElements=xtag.query(theadElement,'td, th');tbodyCellElements=xtag.query(tbodyElement,'td, th');for(i=0,len=theadCellElements.length;i<len;i+=1){currentCellLabelElement=document.createElement('b');currentCellLabelElement.classList.add('cell-label');currentCellLabelElement.setAttribute('data-text',(theadCellElements[i].textContent||'')+':');currentCellLabelElement.setAttribute('gs-dynamic','');if(tbodyCellElements[i].childNodes){tbodyCellElements[i].insertBefore(currentCellLabelElement,tbodyCellElements[i].childNodes[0]);}else{tbodyCellElements[i].insertChild(currentCellLabelElement);}}}
tbodyElement.innerHTML=doT.template(ml(function(){/*
                        {{##def.snippet:
                            {{ var row, row_number, i, len, col_i, col_len, qs = jo.qs, intAddToRowNumber = 0;
                            
                            if (!isNaN(jo.i)) {
                                i = jo.i;
                                len = jo.len || jo.i + 1;
                                
                            } else {
                                i = 0;
                                len = jo.data.dat.length;
                            }
                            
                            for (; i < len; i += 1) {
                                row = {};
                                row_number = i + 1;
                                row.row_number = row_number;
                                
                                for (col_i = 0, col_len = jo.data.arr_column.length; col_i < col_len; col_i += 1) {
                                    if (jo.data.dat[i][col_i] === undefined || jo.data.dat[i][col_i] === null) {
                                        row[jo.data.arr_column[col_i]] = '';
                                    } else {
                                        row[jo.data.arr_column[col_i]] = jo.data.dat[i][col_i];
                                    }
                                } }}{{# def.record }}
                            {{ } }}
                        #}}
                        {{#def.snippet}}*/ console.log}),null,{"record":tbodyElement.innerHTML})({'data':data,'qs':GS.qryToJSON(GS.getQueryString())});element.dropDownTable=tableElement;element.ready=true;}}
if(bolInitalLoad&&element.getAttribute('value')){selectRecordFromValue(element,element.getAttribute('value'),false);}else if(element.value){selectRecordFromValue(element,element.value,false);}}else{console.error(data);element.error=true;element.ready=false;element.classList.add('error');element.dropDownButton.setAttribute('title','This combobox has failed to load.');element.dropDownButton.setAttribute('icon','exclamation-circle');if(element.hasAttribute('limit-to-list')){element.setAttribute('disabled','');}}}
function refreshControl(element){var i,len,divElement,arrPassThroughAttributes=['placeholder','name','maxlength','autocorrect','autocapitalize','autocomplete','autofocus'];if(element.hasAttribute('tabindex')){element.savedTabIndex=element.getAttribute('tabindex');element.removeAttribute('tabindex');}
element.innerHTML='';divElement=document.createElement('div');divElement.setAttribute('gs-dynamic','');divElement.classList.add('root');element.appendChild(divElement);element.root=divElement;element.root.innerHTML='<input gs-dynamic class="control" type="text" />'+'<gs-button gs-dynamic class="drop_down_button" icononly icon="angle-down" no-focus></gs-button>';element.control=xtag.query(element,'.control')[0];element.dropDownButton=xtag.query(element,'.drop_down_button')[0];for(i=0,len=arrPassThroughAttributes.length;i<len;i+=1){if(element.hasAttribute(arrPassThroughAttributes[i])){element.control.setAttribute(arrPassThroughAttributes[i],element.getAttribute(arrPassThroughAttributes[i])||'');}}
if(element.savedTabIndex!==undefined&&element.savedTabIndex!==null){element.control.setAttribute('tabindex',element.savedTabIndex);}
element.control.addEventListener('change',function(event){event.preventDefault();event.stopPropagation();if(!element.ignoreChange){selectRecordFromValue(element,this.value,true);}
element.ignoreChange=false;});}
function queryStringTemplate(element,template){var strWrapperTemplate='{{##def.snippet:\n'+'    {{ var qs = jo; }} {{# def.template }}\n'+'#}}\n'+'{{#def.snippet}}';return doT.template(strWrapperTemplate,null,{'template':template})(GS.qryToJSON(GS.getQueryString())).trim();}
function pushReplacePopHandler(element){var i,len,arrPopKeys,currentValue,bolRefresh=false,strQueryString=GS.getQueryString();if(element.getAttribute('qs')){element.value=GS.qryGetVal(strQueryString,element.getAttribute('qs'));}
if(element.hasAttribute('refresh-on-querystring-values')){arrPopKeys=element.getAttribute('refresh-on-querystring-values').split(/\s*,\s*/gim);for(i=0,len=arrPopKeys.length;i<len;i+=1){currentValue=GS.qryGetVal(strQueryString,arrPopKeys[i]);if(element.popValues[arrPopKeys[i]]!==currentValue){bolRefresh=true;}
element.popValues[arrPopKeys[i]]=currentValue;}}else if(element.hasAttribute('refresh-on-querystring-change')){bolRefresh=true;}
if(bolRefresh){getData(element);}}
function elementCreated(element){if(!element.hasAttribute('suspend-created')){}}
function elementInserted(element){var tableTemplateElement,tableTemplateElementCopy,oldRootElement,i,len,recordElement,strQueryString=GS.getQueryString(),arrElement,currentElement,strQSValue;if(!element.hasAttribute('suspend-created')&&!element.hasAttribute('suspend-inserted')){if(!element.inserted){element.inserted=true;element.open=false;element.error=false;element.ready=false;if(element.getAttribute('qs')||element.getAttribute('refresh-on-querystring-values')||element.hasAttribute('refresh-on-querystring-change')){strQSValue=GS.qryGetVal(GS.getQueryString(),element.getAttribute('qs'));if(strQSValue!==''||!element.getAttribute('value')){element.setAttribute('value',strQSValue);}
element.popValues={};window.addEventListener('pushstate',function(){pushReplacePopHandler(element);});window.addEventListener('replacestate',function(){pushReplacePopHandler(element);});window.addEventListener('popstate',function(){pushReplacePopHandler(element);});}
tableTemplateElement=xtag.queryChildren(element,'template')[0];if(tableTemplateElement){tableTemplateElementCopy=document.createElement('template');tableTemplateElementCopy.innerHTML=tableTemplateElement.innerHTML;recordElement=xtag.query(xtag.query(tableTemplateElementCopy.content,'tbody')[0],'tr')[0];if(recordElement){arrElement=xtag.query(recordElement,'[column]');for(i=0,len=arrElement.length;i<len;i+=1){currentElement=arrElement[i];if((!currentElement.getAttribute('value'))&&currentElement.getAttribute('column')){currentElement.setAttribute('value','{{! row.'+currentElement.getAttribute('column')+' }}');}}
element.tableTemplate=tableTemplateElementCopy.innerHTML;if(!element.getAttribute('src')&&!element.getAttribute('source')&&!element.getAttribute('initalize')){element.dropDownTable=GS.cloneElement(tableTemplateElementCopy.content.children[0]);}}}
refreshControl(element);element.addEventListener('click',function(event){var clickHandler;if(event.target.classList.contains('drop_down_button')){if(!element.open&&!element.error){clickHandler=function(){openDropDown(element);window.removeEventListener('click',clickHandler);};window.addEventListener('click',clickHandler);}else{}}});element.addEventListener('keydown',function(event){if(event.target.classList.contains('control')){handleKeyDown(element,event);}});element.addEventListener('keyup',function(event){if(event.target.classList.contains('control')){handleKeyUp(element,event);}});if(xtag.queryChildren(element,'.root').length<1){refreshControl(element);}
if(element.getAttribute('src')||element.getAttribute('source')||element.getAttribute('initalize')){getData(element,true);}else{element.ready=true;if(element.getAttribute('value')){selectRecordFromValue(element,element.getAttribute('value'),false);}else if(element.value){selectRecordFromValue(element,element.value,false);}}}}}
xtag.register('gs-combo',{lifecycle:{created:function(){if(this.value&&!this.hasAttribute('value')){this.setAttribute('value',this.value);delete this.value;}
elementCreated(this);},inserted:function(){elementInserted(this);},attributeChanged:function(strAttrName,oldValue,newValue){if(strAttrName==='suspend-created'&&newValue===null){elementCreated(this);elementInserted(this);}else if(strAttrName==='suspend-inserted'&&newValue===null){elementInserted(this);}else if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){}}},events:{},accessors:{value:{get:function(){if(this.control||this.innerValue){return this.innerValue||this.control.value;}else if(this.getAttribute('value')){return this.getAttribute('value');}
return undefined;},set:function(newValue){if(this.ready===false){this.setAttribute('value',newValue);}else if(newValue===''&&this.hasAttribute('allow-empty')){this.innerValue='';this.control.value='';}else{selectRecordFromValue(this,newValue,false);}}},textValue:{get:function(){return this.control.value;},set:function(newValue){if(this.ready===false){this.setAttribute('value',newValue);}else{selectRecordFromValue(this,newValue,false);}}}},methods:{focus:function(){this.control.focus();},'getData':function(){getData(this);}}});});window.addEventListener('design-register-element',function(){registerDesignSnippet('<gs-date>','<gs-date>','gs-date column="${1:name}"></gs-date>');registerDesignSnippet('<gs-date> With Label','<gs-date>','label for="${1:date-insert-start_date}">${2:Start Date}:</label>\n'+'<gs-date id="${1:date-insert-start_date}" column="${3:start_date}"></gs-date>');designRegisterElement('gs-date','/v1/dev/developer_g/greyspots-'+GS.version()+'/tools/documentation/doc-elem-date.html');window.designElementProperty_GSDATE=function(selectedElement){addProp('Column',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('column')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'column',this.value);});addProp('Value',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('value')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'value',this.value);});addProp('Column In Querystring',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('qs')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'qs',this.value,false);});addProp('Placeholder',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('placeholder')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'placeholder',this.value);});addProp('Mini',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('mini'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'mini',(this.value==='true'),true);});addProp('Date Picker',true,'<gs-checkbox class="target" value="'+(!selectedElement.hasAttribute('no-picker'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'no-picker',(this.value==='true'),false);});addProp('Format',true,'<gs-combo class="target" value="'+(selectedElement.getAttribute('format')||'')+'" mini>'+
ml(function(){/*<template>
                                            <table>
                                                <tbody>
                                                    <tr value="">
                                                        <td hidden>Default</td>
                                                        <td><center>Default<br /> (01/01/2015)</center></td>
                                                    </tr>
                                                    <tr value="shortdate">
                                                        <td hidden>shortdate</td>
                                                        <td><center>shortdate<br /> (1/1/15)</center></td>
                                                    </tr>
                                                    <tr value="mediumdate">
                                                        <td hidden>mediumdate</td>
                                                        <td><center>mediumdate<br /> (Jan 1, 2015)</center></td>
                                                    </tr>
                                                    <tr value="longdate">
                                                        <td hidden>longdate</td>
                                                        <td><center>longdate<br /> (January 1, 2015)</center></td>
                                                    </tr>
                                                    <tr value="fulldate">
                                                        <td hidden>fulldate</td>
                                                        <td><center>fulldate<br /> (Thursday, January 1, 2015)</center></td>
                                                    </tr>
                                                    <tr value="isodate">
                                                        <td hidden>isodate</td>
                                                        <td><center>isodate<br /> (2015-01-01)</center></td>
                                                    </tr>
                                                    <tr value="isodatetime">
                                                        <td hidden>isodatetime</td>
                                                        <td><center>isodatetime<br /> (2015-01-01T00:00:00)</center></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </template>
                                    </gs-combo>
                                */}),function(){return setOrRemoveTextAttribute(selectedElement,'format',this.value);});addProp('Title',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('title')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'title',this.value);});addProp('Tabindex',true,'<gs-number class="target" value="'+(selectedElement.getAttribute('tabindex')||'')+'" mini></gs-number>',function(){return setOrRemoveTextAttribute(selectedElement,'tabindex',this.value);});strVisibilityAttribute='';if(selectedElement.hasAttribute('hidden')){strVisibilityAttribute='hidden';}
if(selectedElement.hasAttribute('hide-on-desktop')){strVisibilityAttribute='hide-on-desktop';}
if(selectedElement.hasAttribute('hide-on-tablet')){strVisibilityAttribute='hide-on-tablet';}
if(selectedElement.hasAttribute('hide-on-phone')){strVisibilityAttribute='hide-on-phone';}
if(selectedElement.hasAttribute('show-on-desktop')){strVisibilityAttribute='show-on-desktop';}
if(selectedElement.hasAttribute('show-on-tablet')){strVisibilityAttribute='show-on-tablet';}
if(selectedElement.hasAttribute('show-on-phone')){strVisibilityAttribute='show-on-phone';}
addProp('Visibility',true,'<gs-select class="target" value="'+strVisibilityAttribute+'" mini>'+'<option value="">Visible</option>'+'<option value="hidden">Invisible</option>'+'<option value="hide-on-desktop">Invisible at desktop size</option>'+'<option value="hide-on-tablet">Invisible at tablet size</option>'+'<option value="hide-on-phone">Invisible at phone size</option>'+'<option value="show-on-desktop">Visible at desktop size</option>'+'<option value="show-on-tablet">Visible at tablet size</option>'+'<option value="show-on-phone">Visible at phone size</option>'+'</gs-select>',function(){selectedElement.removeAttribute('hidden');selectedElement.removeAttribute('hide-on-desktop');selectedElement.removeAttribute('hide-on-tablet');selectedElement.removeAttribute('hide-on-phone');selectedElement.removeAttribute('show-on-desktop');selectedElement.removeAttribute('show-on-tablet');selectedElement.removeAttribute('show-on-phone');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});addProp('Disabled',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('disabled')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'disabled',this.value==='true',true);});addFlexProps(selectedElement);addProp('suspend-inserted',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-inserted')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-inserted',this.value==='true',true);});};});document.addEventListener('DOMContentLoaded',function(){'use strict';var singleLineTemplateElement=document.createElement('template'),singleLineTemplate;singleLineTemplateElement.innerHTML='<input class="control" gs-dynamic type="text" />'+'<gs-button class="date-picker-button" gs-dynamic inline icononly icon="calendar" no-focus></gs-button>';singleLineTemplate=singleLineTemplateElement.content;function changeFunction(event){event.preventDefault();event.stopPropagation();GS.triggerEvent(event.target.parentNode,'change');handleFormat(event.target.parentNode,event);}
function focusFunction(event){GS.triggerEvent(event.target.parentNode,'focus');}
function buttonClickFunction(event){openDatePicker(event.target.parentNode);}
function pushReplacePopHandler(element){element.value=GS.qryGetVal(GS.getQueryString(),element.getAttribute('qs'));}
function refresh(element){var arrPassThroughAttributes,i,len;element.control=xtag.query(element,'.control')[0];element.datePickerButton=xtag.query(element,'.date-picker-button')[0];if(element.control){element.control.removeEventListener('change',changeFunction);element.control.addEventListener('change',changeFunction);element.control.removeEventListener('focus',focusFunction);element.control.addEventListener('focus',focusFunction);}
if(element.datePickerButton){element.datePickerButton.addEventListener('click',buttonClickFunction);}
if(element.control&&element.hasAttribute('value')){element.control.value=element.getAttribute('value');handleFormat(element,undefined,false);}
if(element.control){arrPassThroughAttributes=['placeholder','name','maxlength','autocorrect','autocapitalize','autocomplete','autofocus'];for(i=0,len=arrPassThroughAttributes.length;i<len;i+=1){if(element.hasAttribute(arrPassThroughAttributes[i])){element.control.setAttribute(arrPassThroughAttributes[i],element.getAttribute(arrPassThroughAttributes[i])||'');}}}}
function syncView(element){if(element.control){element.setAttribute('value',element.control.value);}}
function openDatePicker(element,dteDate){var divElement=document.createElement('div'),jsnOffset=GS.getElementOffset(element.datePickerButton),datePickerContainer,datePicker,strHTML='',intTop,bolSelectOrigin,i,len,dateClickHandler,arrDateButtons,dteCurrent,strInputValue=element.control.value;if(strInputValue.match(/monday|tuesday|wednesday|thursday|friday|saturday|sunday/gim)){strInputValue=strInputValue.replace(/monday|tuesday|wednesday|thursday|friday|saturday|sunday/gim,'').replace(/  /gim,' ').trim();}
strInputValue=strInputValue.replace(/-/,'/').replace(/-/,'/');dteCurrent=new Date(strInputValue);element.datePickerButton.setAttribute('selected','');if(!dteDate){if(element.control.value){dteDate=dteCurrent;bolSelectOrigin=true;}else{dteDate=new Date();}}
if(dteDate.getMonth()===dteCurrent.getMonth()&&dteDate.getYear()===dteCurrent.getYear()){bolSelectOrigin=true;}
strHTML=getContentForDatePicker(dteDate,bolSelectOrigin);divElement.innerHTML='<div class="gs-date-date-picker-container" gs-dynamic>'+'<div class="gs-date-date-picker" gs-dynamic>'+strHTML+'</div>'+'</div>';datePickerContainer=divElement.children[0];element.datePickerContainer=datePickerContainer;datePicker=datePickerContainer.children[0];document.body.appendChild(datePickerContainer);intTop=jsnOffset.top+element.offsetHeight;if(intTop+datePicker.offsetHeight>window.innerHeight){intTop-=datePicker.offsetHeight;intTop-=element.offsetHeight;if(intTop<0){intTop=0;}}
datePicker.style.top=intTop+'px';if(window.innerWidth>450&&jsnOffset.left>450){datePicker.style.width='450px';datePicker.style.right=window.innerWidth-(jsnOffset.left+element.datePickerButton.offsetWidth)+'px';}else{datePicker.style.width='96%';datePicker.style.right='2%';}
datePickerContainer.getElementsByClassName('prev-month')[0].addEventListener('click',function(){dteDate.setMonth((dteDate.getMonth()-1<0?11:dteDate.getMonth()-1));closeDatePicker(element);openDatePicker(element,dteDate);});datePickerContainer.getElementsByClassName('next-month')[0].addEventListener('click',function(){var i,oldMonth;oldMonth=dteDate.getMonth();dteDate.setMonth((oldMonth+1>11?0:oldMonth+1));if(dteDate.getMonth()===oldMonth+2){i=0;while(dteDate.getMonth()===oldMonth+2&&i<20){dteDate.setDate(dteDate.getDate()-1);i+=1;}}
closeDatePicker(element);openDatePicker(element,dteDate);});datePickerContainer.getElementsByClassName('prev-year')[0].addEventListener('click',function(){dteDate.setFullYear(dteDate.getFullYear()-1);closeDatePicker(element);openDatePicker(element,dteDate);});datePickerContainer.getElementsByClassName('next-year')[0].addEventListener('click',function(){dteDate.setFullYear(dteDate.getFullYear()+1);closeDatePicker(element);openDatePicker(element,dteDate);});datePickerContainer.addEventListener('click',function(event){if(event.target.classList.contains('gs-date-date-picker-container')){closeDatePicker(element);}});dateClickHandler=function(){var dteNewDate=new Date(this.getAttribute('data-date'));closeDatePicker(element);element.control.value=(dteNewDate.getMonth()+1)+'/'+dteNewDate.getDate()+'/'+dteNewDate.getFullYear();handleFormat(element);xtag.fireEvent(element,'change',{bubbles:true,cancelable:true});};arrDateButtons=datePickerContainer.getElementsByClassName('day-marker');for(i=0,len=arrDateButtons.length;i<len;i+=1){arrDateButtons[i].addEventListener('click',dateClickHandler);}}
function closeDatePicker(element){element.datePickerButton.removeAttribute('selected');document.body.removeChild(element.datePickerContainer);}
function getContentForDatePicker(originDate,bolSelectOrigin){var strHTML='',i,looperDate,lookaheadDate,intFirstDayOfWeek=0,dteToday=new Date(),arrDays=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],arrShortDays=['S','M','T','W','T','F','S'],arrMonths=['January','February','March','April','May','June','July','August','September','October','November','December'];looperDate=new Date(originDate);looperDate.setDate(1);strHTML='<div class="month-marker" flex-horizontal gs-dynamic>'+'<gs-button class="prev-month" inline icononly icon="arrow-left" gs-dynamic>Prev</gs-button>'+'<span flex gs-dynamic>'+arrMonths[originDate.getMonth()]+'</span>'+'<gs-button class="next-month" inline icononly icon="arrow-right" gs-dynamic>Next</gs-button>'+'</div>'+'<div class="year-marker" flex-horizontal gs-dynamic>'+'<gs-button class="prev-year" inline icononly icon="arrow-left" gs-dynamic>Prev</gs-button>'+'<span flex gs-dynamic>'+originDate.getFullYear()+'</span>'+'<gs-button class="next-year" inline icononly icon="arrow-right" gs-dynamic>Next</gs-button>'+'</div>';if(!isNaN(looperDate.getTime())){i=0;while(looperDate.getDay()!==intFirstDayOfWeek&&i<20){looperDate.setDate(looperDate.getDate()-1);i+=1;}
strHTML+='<div class="date-picker-divider" gs-dynamic></div><div class="day-of-week-markers-container" gs-dynamic>';for(i=0;i<7;i+=1){strHTML+='<div class="day-of-week-marker" gs-dynamic>'+arrShortDays[i]+'</div>';}
strHTML+='</div>';i=0;lookaheadDate=new Date(looperDate);lookaheadDate.setDate(lookaheadDate.getDate()+1);while(!(looperDate.getDay()===intFirstDayOfWeek&&(looperDate.getMonth()!==originDate.getMonth()&&i>0)&&lookaheadDate.getFullYear()>=originDate.getFullYear())&&i<50){strHTML+='<gs-button inline class="day-marker';if(looperDate.getMonth()!==originDate.getMonth()){strHTML+=' other-month';}
if(looperDate.getFullYear()===dteToday.getFullYear()&&looperDate.getMonth()===dteToday.getMonth()&&looperDate.getDate()===dteToday.getDate()){strHTML+=' today';}
strHTML+='"';if(looperDate.getTime()===originDate.getTime()&&bolSelectOrigin){strHTML+=' selected ';}
strHTML+='data-date="'+looperDate+'" gs-dynamic>';if(looperDate.getFullYear()===dteToday.getFullYear()&&looperDate.getMonth()===dteToday.getMonth()&&looperDate.getDate()===dteToday.getDate()){strHTML+='T';}else{strHTML+=looperDate.getDate();}
strHTML+='</gs-button>';lookaheadDate.setDate(lookaheadDate.getDate()+1);looperDate.setDate(looperDate.getDate()+1);i+=1;}}
return strHTML;}
function handleFormat(element,event,bolAlertOnError){var strFormat,dteValue,strValueToFormat=element.value;if(element.hasAttribute('format')){strFormat=element.getAttribute('format');}
if(strValueToFormat.match(/monday|tuesday|wednesday|thursday|friday|saturday|sunday/gim)){strValueToFormat=strValueToFormat.replace(/monday|tuesday|wednesday|thursday|friday|saturday|sunday/gim,'').replace(/  /gim,' ').trim();}
if(strValueToFormat.length===6&&strValueToFormat.match(/[0-9]/g).join('')===element.value){dteValue=new Date(strValueToFormat.substring(0,2)+'/'+
strValueToFormat.substring(2,4)+'/'+
strValueToFormat.substring(4,6));}else{dteValue=new Date(strValueToFormat.replace(/-/,'/').replace(/-/,'/').replace(/-.*/,''));}
if(isNaN(dteValue.getTime())){if(bolAlertOnError!==undefined&&bolAlertOnError!==false){alert('Invalid Date: '+element.value);}
GS.setInputSelection(element.control,0,element.value.length);if(event){event.stopPropagation();event.preventDefault();}}else{if(element.control){element.control.value=formatDate(dteValue,strFormat);}else{element.innerHTML=formatDate(dteValue,strFormat);}}}
function formatDate(dteValue,strFormat){'use strict';/* (this function contains a (modified) substantial portion of code from another source
            here is the copyright for sake of legality) (Uses code by Matt Kruse)
        Copyright (c) 2006-2009 Rostislav Hristov, Asual DZZD
        
        Permission is hereby granted, free of charge, to any person obtaining a 
        copy of this software and associated documentation files 
        (the "Software"), to deal in the Software without restriction, 
        including without limitation the rights to use, copy, modify, merge, 
        publish, distribute, sublicense, and/or sell copies of the Software, 
        and to permit persons to whom the Software is furnished to do so, 
        subject to the following conditions:
        
        The above copyright notice and this permission notice shall be included 
        in all copies or substantial portions of the Software.
        
        THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS 
        OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF 
        MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. 
        IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY 
        CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, 
        TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE 
        SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.*/
var i=0,j=0,l=0,c='',token='',x,y,formatNumber=function(n,s){if(typeof s=='undefined'||s==2){return(n>=0&&n<10?'0':'')+n;}else{if(n>=0&&n<10){return'00'+n;}
if(n>=10&&n<100){return'0'+n;}
return n;}},locale={monthsFull:['January','February','March','April','May','June','July','August','September','October','November','December'],monthsShort:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],daysFull:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],daysShort:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],shortDateFormat:'M/d/yyyy h:mm a',longDateFormat:'EEEE, MMMM dd, yyyy h:mm:ss a'};if(!strFormat){strFormat='MM/dd/yyyy';}else if(strFormat.toLowerCase()==='shortdate'){strFormat='M/d/yy';}else if(strFormat.toLowerCase()==='mediumdate'){strFormat='MMM d, yyyy';}else if(strFormat.toLowerCase()==='longdate'){strFormat='MMMM d, yyyy';}else if(strFormat.toLowerCase()==='fulldate'){strFormat='EEEE, MMMM d, yyyy';}else if(strFormat.toLowerCase()==='shorttime'){strFormat='h:mm a';}else if(strFormat.toLowerCase()==='mediumtime'){strFormat='h:mm:ss a';}else if(strFormat.toLowerCase()==='isodate'){strFormat='yyyy-MM-dd';}else if(strFormat.toLowerCase()==='isotime'){strFormat='HH:mm:ss';}else if(strFormat.toLowerCase()==='isodatetime'){strFormat='yyyy-MM-dd\'T\'HH:mm:ss';}
y=dteValue.getYear();if(y<1000){y=String(y+1900);}
var M=dteValue.getMonth()+1,d=dteValue.getDate(),E=dteValue.getDay(),H=dteValue.getHours(),m=dteValue.getMinutes(),s=dteValue.getSeconds(),S=dteValue.getMilliseconds();dteValue={y:y,yyyy:y,yy:String(y).substring(2,4),M:M,MM:formatNumber(M),MMM:locale.monthsShort[M-1],MMMM:locale.monthsFull[M-1],d:d,dd:formatNumber(d),EEE:locale.daysShort[E],EEEE:locale.daysFull[E],H:H,HH:formatNumber(H)};if(H===0){dteValue.h=12;}else if(H>12){dteValue.h=H-12;}else{dteValue.h=H;}
dteValue.hh=formatNumber(dteValue.h);dteValue.k=H!==0?H:24;dteValue.kk=formatNumber(dteValue.k);if(H>11){dteValue.K=H-12;}else{dteValue.K=H;}
dteValue.KK=formatNumber(dteValue.K);if(H>11){dteValue.a='PM';}else{dteValue.a='AM';}
dteValue.m=m;dteValue.mm=formatNumber(m);dteValue.s=s;dteValue.ss=formatNumber(s);dteValue.S=S;dteValue.SS=formatNumber(S);dteValue.SSS=formatNumber(S,3);var result='';i=0;c='';token='';s=false;while(i<strFormat.length){token='';c=strFormat.charAt(i);if(c=='\''){i++;if(strFormat.charAt(i)==c){result=result+c;i++;}else{s=!s;}}else{while(strFormat.charAt(i)==c){token+=strFormat.charAt(i++);}
if(token.indexOf('MMMM')!=-1&&token.length>4){token='MMMM';}
if(token.indexOf('EEEE')!=-1&&token.length>4){token='EEEE';}
if(typeof dteValue[token]!='undefined'&&!s){result=result+dteValue[token];}else{result=result+token;}}}
return result;}
function elementCreated(element){if(!element.hasAttribute('suspend-created')){if(element.value&&new Date(element.value).getTime()){element.setAttribute('value',element.value);delete element.value;}}}
function elementInserted(element){var today,strQSValue;if(!element.hasAttribute('suspend-created')&&!element.hasAttribute('suspend-inserted')){if(!element.inserted){element.inserted=true;if(element.hasAttribute('tabindex')){element.oldTabIndex=element.getAttribute('tabindex');element.removeAttribute('tabindex');}
if(element.hasAttribute('value')&&element.getAttribute('value').trim().toLowerCase()==='today'){today=new Date();element.setAttribute('value',GS.leftPad(today.getFullYear(),'0',4)+'/'+GS.leftPad(today.getMonth()+1,'0',2)+'/'+GS.leftPad(today.getDate(),'0',2));}
if(element.getAttribute('qs')){strQSValue=GS.qryGetVal(GS.getQueryString(),element.getAttribute('qs'));if(strQSValue!==''||!element.getAttribute('value')){element.setAttribute('value',strQSValue);}
window.addEventListener('pushstate',function(){pushReplacePopHandler(element);});window.addEventListener('replacestate',function(){pushReplacePopHandler(element);});window.addEventListener('popstate',function(){pushReplacePopHandler(element);});}
element.innerHTML='';element.appendChild(singleLineTemplate.cloneNode(true));if(element.oldTabIndex){xtag.query(element,'.control')[0].setAttribute('tabindex',element.oldTabIndex);}
element.refresh();}}}
xtag.register('gs-date',{lifecycle:{created:function(){elementCreated(this);},inserted:function(){elementInserted(this);},attributeChanged:function(strAttrName,oldValue,newValue){if(strAttrName==='suspend-created'&&newValue===null){elementCreated(this);elementInserted(this);}else if(strAttrName==='suspend-inserted'&&newValue===null){elementInserted(this);}else if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){if(strAttrName==='disabled'&&newValue!==null){this.innerHTML=this.getAttribute('value')||this.getAttribute('placeholder');}else if(strAttrName==='disabled'&&newValue===null){this.innerHTML='';this.appendChild(singleLineTemplate.cloneNode(true));if(this.oldTabIndex){xtag.query(this,'.control')[0].setAttribute('tabindex',this.oldTabIndex);}
refresh(this);}}}},events:{keydown:function(event){var element=this,currentDate,currentSelectionRange,currentSelectionText,currentSelectionNumber,currentSelectionFormatText,currentValue,newValue,strDateFormat,formatDivider,daysOfTheWeek=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];if(!element.hasAttribute('suspend-created')&&!element.hasAttribute('suspend-inserted')){if(this.getAttribute('disabled')!==null&&event.keyCode!==9){event.preventDefault();event.stopPropagation();}else{if(event.keyCode===GS.keyCode('left arrow')||event.keyCode===GS.keyCode('up arrow')||event.keyCode===GS.keyCode('right arrow')||event.keyCode===GS.keyCode('down arrow')){currentSelectionRange=GS.getInputSelection(this.control);event.preventDefault();event.stopPropagation();strDateFormat=this.getAttribute('format');if(!strDateFormat){strDateFormat='MM/dd/yyyy';}else if(strDateFormat.toLowerCase()==='shortdate'){strDateFormat='M/d/yy';}else if(strDateFormat.toLowerCase()==='mediumdate'){strDateFormat='MMM d, yyyy';}else if(strDateFormat.toLowerCase()==='longdate'){strDateFormat='MMMM d, yyyy';}else if(strDateFormat.toLowerCase()==='fulldate'){strDateFormat='EEEE, MMMM d, yyyy';}else if(strDateFormat.toLowerCase()==='shorttime'){strDateFormat='h:mm a';}else if(strDateFormat.toLowerCase()==='mediumtime'){strDateFormat='h:mm:ss a';}else if(strDateFormat.toLowerCase()==='isodate'){strDateFormat='yyyy-MM-dd';}else if(strDateFormat.toLowerCase()==='isotime'){strDateFormat='HH:mm:ss';}else if(strDateFormat.toLowerCase()==='isodatetime'){strDateFormat='yyyy-MM-dd\'T\'HH:mm:ss';}
formatDivider=strDateFormat.match(/[^mdyehmsa]/gi).join('');currentValue=element.control.value;currentDate=new Date(currentValue.replace('\'T\'',' ').replace(/-/g,'/'));if(strDateFormat.indexOf('M')===-1){currentDate=new Date('2015/6/15 '+currentValue);}
if(strDateFormat.substring(0,4)==='EEEE'||strDateFormat.substring(0,4)==='MMMM'){strDateFormat=strDateFormat.replace('EEEE',new Array(daysOfTheWeek[currentDate.getDay()].length+1).join('E'));strDateFormat=strDateFormat.replace('MMMM',new Array(daysOfTheWeek[currentDate.getDay()].length+1).join('M'));}
while(currentSelectionRange.start>=0&&formatDivider.indexOf(currentValue[currentSelectionRange.start-1])<0){currentSelectionRange.start-=1;}
currentSelectionRange.end=currentSelectionRange.start;while(currentSelectionRange.end<currentValue.length&&formatDivider.indexOf(currentValue[currentSelectionRange.end])<0){currentSelectionRange.end+=1;}
GS.setInputSelection(element.control,currentSelectionRange.start,currentSelectionRange.end);currentSelectionText=currentValue.substring(currentSelectionRange.start,currentSelectionRange.end);currentSelectionFormatText=strDateFormat.substring(currentSelectionRange.start,currentSelectionRange.end);if(event.keyCode===arrowCodes.up||event.keyCode===arrowCodes.down){var increment=event.keyCode===arrowCodes.up?1:-1;if(currentSelectionFormatText[0]==='M'){currentDate.setMonth(currentDate.getMonth()+increment);if((currentSelectionRange.end-currentSelectionRange.start)>2){currentSelectionRange.end=currentSelectionRange.start+currentSelectionText.indexOf(' ');}else{currentSelectionRange.end=currentSelectionRange.start+currentDate.getMonth().toString().length;}}else if(currentSelectionFormatText[0]==='d'){currentDate.setDate(currentDate.getDate()+increment);currentSelectionRange.end=currentSelectionRange.start+currentDate.getDate().toString().length;}else if(currentSelectionFormatText[0]==='y'){currentDate.setFullYear(currentDate.getFullYear()+increment);currentSelectionRange.end=currentSelectionRange.start+currentDate.getFullYear().toString().length;}else if(currentSelectionFormatText[0]==='E'){currentDate.setDate(currentDate.getDate()+increment);currentSelectionRange.start=0;currentSelectionRange.end=daysOfTheWeek[currentDate.getDay()].length;}else if(currentSelectionFormatText[0]==='h'||currentSelectionFormatText[0]==='H'){currentDate.setHours(currentDate.getHours()+increment);currentSelectionRange.end=currentSelectionRange.start+currentDate.getHours().toString().length;}else if(currentSelectionFormatText[0]==='m'){currentDate.setMinutes(currentDate.getMinutes()+increment);currentSelectionRange.end=currentSelectionRange.start+currentDate.getMinutes().toString().length;}else if(currentSelectionFormatText[0]==='s'){currentDate.setSeconds(currentDate.getSeconds()+increment);currentSelectionRange.end=currentSelectionRange.start+currentDate.getSeconds().toString().length;}else if(currentSelectionFormatText[0]==='a'){currentDate.setHours(currentDate.getHours()+12);}
newValue=formatDate(this,currentDate,strDateFormat);this.control.value=newValue;currentValue=newValue;}else if(event.keyCode===arrowCodes.left||event.keyCode===arrowCodes.right){if(event.keyCode===arrowCodes.left){currentSelectionRange.end=currentSelectionRange.start-2;currentSelectionRange.start=currentSelectionRange.end;}else if(event.keyCode===arrowCodes.right){currentSelectionRange.end=currentSelectionRange.end+2;currentSelectionRange.start=currentSelectionRange.end;}}
if(strDateFormat[0]==='E'||strDateFormat[0]==='M'){strDateFormat=strDateFormat.replace(/E+/g,new Array(daysOfTheWeek[currentDate.getDay()].length+1).join('E'));strDateFormat=strDateFormat.replace(/M+/g,new Array(daysOfTheWeek[currentDate.getDay()].length+1).join('M'));}
while(currentSelectionRange.start>=0&&formatDivider.indexOf(currentValue[currentSelectionRange.start-1])<0){currentSelectionRange.start-=1;}
currentSelectionRange.end=currentSelectionRange.start;while(currentSelectionRange.end<currentValue.length&&formatDivider.indexOf(currentValue[currentSelectionRange.end])<0){currentSelectionRange.end+=1;}
GS.setInputSelection(element.control,currentSelectionRange.start,currentSelectionRange.end);}
syncView(element);}}},keyup:function(){var element=this;if(!element.hasAttribute('suspend-created')&&!element.hasAttribute('suspend-inserted')){syncView(element);}}},accessors:{value:{get:function(){if(this.control){return this.control.value;}else if(this.hasAttribute('disabled')){return this.innerHTML;}
return undefined;},set:function(newValue){if(this.control){if(typeof newValue==='object'){this.control.value=newValue.toLocaleDateString();}else{this.control.value=newValue;}}else if(this.hasAttribute('disabled')){this.innerHTML=newValue;}else{this.setAttribute('value',newValue);}
handleFormat(this);syncView(this);}}},methods:{refresh:function(){var element=this,arrPassThroughAttributes,i,len;element.control=xtag.query(element,'.control')[0];element.datePickerButton=xtag.query(element,'.date-picker-button')[0];if(element.control){element.control.removeEventListener('change',changeFunction);element.control.addEventListener('change',changeFunction);element.control.removeEventListener('focus',focusFunction);element.control.addEventListener('focus',focusFunction);}
if(element.datePickerButton){element.datePickerButton.addEventListener('click',buttonClickFunction);}
if(element.control&&element.hasAttribute('value')){element.control.value=element.getAttribute('value');handleFormat(element,undefined,false);}
if(element.control){arrPassThroughAttributes=['placeholder','name','maxlength','autocorrect','autocapitalize','autocomplete','autofocus'];for(i=0,len=arrPassThroughAttributes.length;i<len;i+=1){if(element.hasAttribute(arrPassThroughAttributes[i])){element.control.setAttribute(arrPassThroughAttributes[i],element.getAttribute(arrPassThroughAttributes[i])||'');}}}},focus:function(){this.control.focus();}}});});window.addEventListener('design-register-element',function(){'use strict';registerDesignSnippet('Dialog From Template','Dialog From Template','GS.openDialog(\'${1:templateID}\', function () {\n'+'    // after dialog open \n'+'}, function (event, strAnswer) {\n'+'    if (strAnswer === \'${2:Ok}\') {\n'+'        // before dialog close\n'+'        $0\n'+'    }\n'+'});');registerDesignSnippet('GS.openDialog','GS.openDialog','GS.openDialog(\'${1:templateID}\', function () {\n'+'    // after dialog open \n'+'}, function (event, strAnswer) {\n'+'    if (strAnswer === \'${2:Ok}\') {\n'+'        // beforedialog close\n'+'        $0\n'+'    }\n'+'});');registerDesignSnippet('GS.closeDialog','GS.closeDialog','GS.closeDialog(${1:dialog}, ${2:\'Ok\'});');registerDesignSnippet('Close Dialog','Close Dialog','GS.closeDialog(${1:dialog}, ${2:\'Ok\'});');registerDesignSnippet('GS.msgbox','GS.msgbox','GS.msgbox(${1:\'Are you sure...\'}, ${2:\'Are you sure you want to do this?\'}, '+'${3:[\'Cancel\', \'Ok\']}, function (strAnswer) {\n'+'    if (strAnswer === ${4:\'Ok\'}) {\n'+'        // before dialog close\n'+'        $0\n'+'    }\n'+'});');registerDesignSnippet('Message Box','Message Box','GS.msgbox(${1:\'Are you sure...\'}, ${2:\'Are you sure you want to do this?\'}, '+'${3:[\'Cancel\', \'Ok\']}, function (strAnswer) {\n'+'    if (strAnswer === ${4:\'Ok\'}) {\n'+'        // before dialog close\n'+'        $0\n'+'    }\n'+'});');registerDesignSnippet('GS.inputbox','GS.inputbox','GS.inputbox(${1:\'Are you sure...\'}, ${2:\'Are you sure you want to do this?\'}, '+'function (strInputValue) {\n'+'    // before dialog close\n'+'    $0\n'+'});');registerDesignSnippet('Input Box','Input Box','GS.inputbox(${1:\'Are you sure...\'}, ${2:\'Are you sure you want to do this?\'}, '+'function (strInputValue) {\n'+'    // before dialog close\n'+'    $0\n'+'});');registerDesignSnippet('GS.openDialogToElement','GS.openDialogToElement','GS.openDialogToElement(${1:document.getElementById(\'target\')}, \'${2:templateID}\', '+'\'${3:right}\', function () {\n'+'    // after dialog open \n'+'}, function (event, strAnswer) {\n'+'    if (strAnswer === \'${4:Ok}\') {\n'+'        // beforedialog close\n'+'        $0\n'+'    }\n'+'});');registerDesignSnippet('Dialog For Element','Dialog For Element','GS.openDialogToElement(${1:document.getElementById(\'target\')}, \'${2:templateID}\', '+'\'${3:right}\', function () {\n'+'    // after dialog open \n'+'}, function (event, strAnswer) {\n'+'    if (strAnswer === \'${4:Ok}\') {\n'+'        // beforedialog close\n'+'        $0\n'+'    }\n'+'});');});(function(){'use strict';function buttonHTML(buttons){var strHTML,i,len;if(typeof buttons==='string'){if(buttons==='okcancel'||buttons==='cancelok'){buttons=['Cancel','Ok'];}else if(buttons==='ok'||buttons==='okonly'){buttons=['Ok'];}else if(buttons==='cancel'||buttons==='cancelonly'){buttons=['Cancel'];}else if(buttons==='yesno'||buttons==='noyes'){buttons=['No','Yes'];}else if(buttons==='Yes'||buttons==='yesonly'){buttons=['Yes'];}else if(buttons==='No'||buttons==='noonly'){buttons=['No'];}}
if(typeof buttons==='object'){if(buttons.length>0){strHTML='<gs-grid gs-dynamic>';for(i=0,len=buttons.length;i<len;i+=1){strHTML+='<gs-block gs-dynamic>'+'<gs-button dialogclose '+(i===len-1?'emphasis':'')+' gs-dynamic>'+
encodeHTML(buttons[i])+'</gs-button>'+'</gs-block>';}
strHTML+='</gs-grid>';}else{strHTML='<gs-button dialogclose>Done</gs-button>';}}else{strHTML=buttons;}
return strHTML;}
GS.msgbox=function(strTitle,strMessage,buttons,callback){var templateElement=document.createElement('template');templateElement.innerHTML='<gs-page>'+'    <gs-header><center><h3>'+strTitle+'</h3></center></gs-header>'+'    <gs-body padded>'+'        '+strMessage+'    </gs-body>'+'    <gs-footer>'+buttonHTML(buttons)+'</gs-footer>'+'</gs-page>';GS.openDialog(templateElement,'',function(event,strAnswer){if(typeof callback==='function'){callback(strAnswer);}});};GS.inputbox=function(strTitle,strMessage,callback){var templateElement=document.createElement('template');templateElement.innerHTML='<gs-page>'+'    <gs-header><center><h3>'+strTitle+'</h3></center></gs-header>'+'    <gs-body padded>'+'        '+strMessage+'        <gs-text id="dialog-inputbox-control"></gs-text>'+'    </gs-body>'+'    <gs-footer>'+buttonHTML(['Cancel','Ok'])+'</gs-footer>'+'</gs-page>';GS.openDialog(templateElement,'',function(event,strAnswer){if(strAnswer==='Ok'){callback(document.getElementById('dialog-inputbox-control').value);}else{callback('');}});};})();GS.dialogClose=function(dialog,strAnswer){'use strict';console.warn('Please use "GS.closeDialog" instead of "GS.dialogClose".');dialog.destroy(strAnswer);};GS.closeDialog=function(dialog,strAnswer){'use strict';dialog.destroy(strAnswer);};(function(){'use strict';function bindDialogKeydown(dialog,target){}
GS.dialog=function(options){var strHTML,dialogOverlay,dialog,strContent='',strButtons='',i,len,gridEach,arrElements,tapHandler,strHeader,sizingFunction,observer,returnTarget;if(typeof options.buttons==='string'){if(options.buttons==='okcancel'||options.buttons==='cancelok'){options.buttons=['Cancel','Ok'];}else if(options.buttons==='ok'||options.buttons==='okonly'){options.buttons=['Ok'];}else if(options.buttons==='cancel'||options.buttons==='cancelonly'){options.buttons=['Cancel'];}else if(options.buttons==='yesno'||options.buttons==='noyes'){options.buttons=['No','Yes'];}else if(options.buttons==='Yes'||options.buttons==='yesonly'){options.buttons=['Yes'];}else if(options.buttons==='No'||options.buttons==='noonly'){options.buttons=['No'];}}
options.theme=options.theme||'regular';options.type=options.type||'html';options.header=options.header||'';options.content=options.content||'';options.buttons=options.buttons||['Ok'];options.max_width=options.max_width||'700px';options.max_height=options.max_height||'700px';options.mode=options.mode||'detect';options.padded=options.padded||false;options.autofocus=(options.autofocus===undefined?true:false);if(options.type==='html'){strContent=options.content;strHeader=options.header;}else if(options.type==='formatted-html'){strContent='<pre gs-dynamic>'+options.content+'</pre>';strHeader='<pre gs-dynamic>'+options.header+'</pre>';}else if(options.type==='text'){strContent=encodeHTML(options.content);strHeader=encodeHTML(options.header);}else if(options.type==='formatted-text'){strContent='<pre gs-dynamic>'+encodeHTML(options.content)+'</pre>';strHeader='<pre gs-dynamic>'+encodeHTML(options.header)+'</pre>';}else{console.warn('Dialog type not recognized... Defaulting to \'html\'.');strContent=options.content;strHeader=options.header;}
if(typeof options.buttons==='object'){if(options.buttons.length>0){strButtons='<gs-grid gs-dynamic>';for(i=0,len=options.buttons.length;i<len;i+=1){strButtons+='<gs-block gs-dynamic>'+'<gs-button dialogclose '+(i===len-1?'emphasis':'')+' gs-dynamic>'+
encodeHTML(options.buttons[i])+'</gs-button>'+'</gs-block>';}
strButtons+='</gs-grid>';}else{strButtons='';}}else{strButtons=options.buttons;}
dialogOverlay=GS.stringToElement('<gs-dialog-overlay gs-dynamic></gs-dialog-overlay>');document.body.appendChild(dialogOverlay);dialogOverlay.addEventListener(evt.mousedown,function(event){event.preventDefault();});dialogOverlay.addEventListener(evt.mousemove,function(event){event.preventDefault();});strHTML='<gs-dialog class="'+encodeHTML(options.theme)+'" gs-dynamic ';if((options.mode==='touch'&&!evt.touchDevice)||(options.mode==='phone'&&evt.deviceType!=='phone')){options.mode='detect';}
if((options.mode==='touch'&&evt.touchDevice)||(options.mode==='phone'&&evt.deviceType==='phone')||options.mode==='full'){strHTML+='style="width: 100%; height: 100%; top: 0;">';}else if(options.mode==='constrained'){strHTML+='style="max-width: '+options.max_width+'; max-height: '+options.max_height+'; width: 94%; height: 90%;">';}else{strHTML+='style="max-width: '+options.max_width+'; width: 94%;">';}
strHTML+='<gs-page gs-dynamic>'+
(options.header?'<gs-header gs-dynamic>'+strHeader+'</gs-header>':'')+'<gs-body'+(options.padded?' padded':'')+' gs-dynamic>'+strContent+'</gs-body>'+
(strButtons?'<gs-footer gs-dynamic>'+strButtons+'</gs-footer>':'')+'</gs-page>'+'</gs-dialog>';dialog=GS.stringToElement(strHTML);document.body.appendChild(dialog);document.body.parentNode.classList.add('no-scroll-except-for-dialog');dialog.addEventListener('beforeclose',function(event){if(typeof options.before_close==='function'){options.before_close.apply(dialog,[event.originalEvent,event.data]);}});dialog.addEventListener('afterclose',function(event){if(typeof options.after_close==='function'){options.after_close.apply(dialog,[event.originalEvent,event.data]);}});arrElements=xtag.query(dialog,'[autofocus]');if(arrElements.length>0){arrElements[0].focus();}
arrElements=xtag.query(dialog,'[listen-for-return]');if(arrElements.length>0){returnTarget=arrElements[0];dialog.addEventListener('keydown',function(event){if(event.target!==returnTarget&&(event.keyCode===13||event.which===13)){GS.triggerEvent(returnTarget,'click');}});if(arrElements.length>1){console.warn('dialog Warning: Too many [listen-for-return] elements, defaulting to the first one. Please have only one [listen-for-return] element per dialog.');}}
if(options.mode==='detect'){sizingFunction=function(){if(dialog.parentNode!==document.body){window.removeEventListener('resize',sizingFunction);window.removeEventListener('orientationchange',sizingFunction);observer.disconnect();return;}
if(dialog.offsetHeight>((window.innerHeight/100)*98)){dialog.style.height='98%';dialog.style.maxHeight=options.max_height;}};sizingFunction();window.addEventListener('resize',sizingFunction);window.addEventListener('orientationchange',sizingFunction);observer=new MutationObserver(sizingFunction);observer.observe(dialog,{childList:true,subtree:true});}
if(typeof options.after_open==='function'){options.after_open.apply(dialog,[]);}
return dialog;};GS.openDialog=function(templateLink,afterOpenFunction,beforeCloseFunction){var template,strHTML,dialogOverlay,dialog,i,len,arrCloseButtons,clickHandler,sizingFunction,observer,arrElements,strTag,returnTarget,strTheme,strMaxWidth,strMaxHeight,strMode;if(typeof templateLink==='string'){template=document.getElementById(templateLink);}else{template=templateLink;}
arrElements=xtag.query(template.content,'[autofocus]');if(arrElements.length===0){arrElements=xtag.query(template.content,'*');if(arrElements.length>0){for(i=0,len=arrElements.length;i<len;i+=1){strTag=arrElements[i].nodeName.toLowerCase();if(GS.isElementFocusable(arrElements[i])||(xtag.tags[strTag]&&xtag.tags[strTag].methods.focus)){arrElements[i].setAttribute('autofocus','');break;}}}}else if(arrElements.length>1){for(i=1,len=arrElements.length;i<len;i+=1){arrElements[i].removeAttribute('autofocus');}
console.warn('dialog Warning: Too many [autofocus] elements, defaulting to the first one. Please have only one [autofocus] element per dialog.');}
strTheme=(template.getAttribute('data-theme')==='error'?'error':'regular');strMaxWidth=template.getAttribute('data-max-width')||'700px';strMaxHeight=template.getAttribute('data-max-height')||'700px';strMode=template.getAttribute('data-mode')||'detect';strHTML='<gs-dialog class="'+strTheme+'" gs-dynamic ';if((strMode==='touch'&&!evt.touchDevice)||(strMode==='phone'&&evt.deviceType!=='phone')){strMode='detect';}
if((strMode==='touch'&&evt.touchDevice)||(strMode==='phone'&&evt.deviceType==='phone')||strMode==='full'){strHTML+='style="width: 100%; height: 100%; top: 0;">';}else if(strMode==='constrained'){strHTML+='style="max-width: '+strMaxWidth+'; max-height: '+strMaxHeight+'; width: 94%; height: 90%;">';}else{strHTML+='style="max-width: '+strMaxWidth+'; width: 94%;">';}
strHTML+='<gs-page gs-dynamic>'+
template.innerHTML+'</gs-page>'+'</gs-dialog>';dialogOverlay=GS.stringToElement('<gs-dialog-overlay gs-dynamic></gs-dialog-overlay>');dialog=GS.stringToElement(strHTML);document.body.appendChild(dialogOverlay);dialogOverlay.addEventListener(evt.mousedown,function(event){event.preventDefault();});dialogOverlay.addEventListener(evt.mousemove,function(event){event.preventDefault();});document.body.appendChild(dialog);document.body.parentNode.classList.add('no-scroll-except-for-dialog');dialog.addEventListener('beforeclose',function(event){if(typeof beforeCloseFunction==='function'){beforeCloseFunction.apply(dialog,[event.originalEvent,event.data]);}});arrElements=xtag.query(dialog,'[autofocus]');if(arrElements.length>0){arrElements[0].focus();}
arrElements=xtag.query(dialog,'[listen-for-return]');if(arrElements.length>0){returnTarget=arrElements[0];dialog.addEventListener('keydown',function(event){if(event.target!==returnTarget&&(event.keyCode===13||event.which===13)){GS.triggerEvent(returnTarget,'click');}});if(arrElements.length>1){console.warn('dialog Warning: Too many [listen-for-return] elements, defaulting to the first one. Please have only one [listen-for-return] element per dialog.');}}
if(strMode==='detect'){sizingFunction=function(){if(dialog.parentNode!==document.body){window.removeEventListener('resize',sizingFunction);window.removeEventListener('orientationchange',sizingFunction);observer.disconnect();return;}
if(dialog.offsetHeight>((window.innerHeight/100)*98)){dialog.style.height='98%';dialog.style.maxHeight=strMaxHeight;}};sizingFunction();window.addEventListener('resize',sizingFunction);window.addEventListener('orientationchange',sizingFunction);observer=new MutationObserver(sizingFunction);observer.observe(dialog,{childList:true,subtree:true});}
if(typeof afterOpenFunction==='function'){afterOpenFunction.apply(dialog,[]);}
return dialog;};GS.openDialogToElement=function(elementTarget,templateLink,strDirectionRequest,afterOpenFunction,beforeCloseFunction){'use strict';var positionHandlingFunction,jsnPositionData,divElement=document.createElement('div'),dialogElement,observer,intDialogResolvedWidth,intDialogResolvedHeight,strResolvedDirection,intMargin=5,intElementMidPoint,intDialogMidPoint,i,len,arrTests,arrCloseButtons,clickHandler,arrElements,template,strTheme,strMaxWidth,strMaxHeight,strTag;if(typeof templateLink==='string'){template=document.getElementById(templateLink);}else{template=templateLink;}
arrElements=xtag.query(template.content,'[autofocus]');if(arrElements.length===0){arrElements=xtag.query(template.content,'*');if(arrElements.length>0){for(i=0,len=arrElements.length;i<len;i+=1){strTag=arrElements[i].nodeName.toLowerCase();if(GS.isElementFocusable(arrElements[i])||(xtag.tags[strTag]&&xtag.tags[strTag].methods.focus)){arrElements[i].setAttribute('autofocus','');break;}}}}else if(arrElements.length>1){for(i=1,len=arrElements.length;i<len;i+=1){arrElements[i].removeAttribute('autofocus');}
console.warn('dialog Warning: Too many [autofocus] elements, defaulting to the first one. Please have only one [autofocus] element per dialog.');}
strTheme=(template.getAttribute('data-theme')==='error'?'error':'regular');strMaxWidth=template.getAttribute('data-max-width')||'700px';strMaxHeight=template.getAttribute('data-max-height')||'700px';divElement.innerHTML='<gs-dialog class="'+strTheme+'" style="width: 94%; max-width: '+strMaxWidth+';" no-window-listen gs-dynamic>'+'<gs-page gs-dynamic>'+
template.innerHTML+'</gs-page>'+'</gs-dialog>';dialogElement=divElement.children[0];document.body.appendChild(GS.stringToElement('<gs-dialog-overlay gs-dynamic></gs-dialog-overlay>'));document.body.appendChild(dialogElement);dialogElement.addEventListener('beforeclose',function(event){if(typeof beforeCloseFunction==='function'){beforeCloseFunction.apply(dialogElement,[event.originalEvent,event.data]);}});arrElements=xtag.query(dialogElement,'[autofocus]');if(arrElements.length>0){arrElements[0].focus();}
arrElements=xtag.query(dialogElement,'[listen-for-return]');if(arrElements.length>0){returnTarget=arrElements[0];dialogElement.addEventListener('keydown',function(event){if(event.target!==returnTarget&&(event.keyCode===13||event.which===13)){GS.triggerEvent(returnTarget,'click');}});if(arrElements.length>1){console.warn('dialog Warning: Too many [listen-for-return] elements, defaulting to the first one. Please have only one [listen-for-return] element per dialog.');}}
strDirectionRequest=strDirectionRequest||'down';strDirectionRequest.toLowerCase();if(!strDirectionRequest.match(/^up$|^down$|^left$|^right$|^full$/)){console.warn('GS.openDialogToElement Error: '+'Direction \''+strDirectionRequest+'\' not recognized. '+'Please use \'up\', \'down\', \'left\', \'right\' or \'full\'.');strDirectionRequest='down';}
positionHandlingFunction=function(){var intDialogTop='',intDialogLeft='',intDialogMarginTop='',intDialogMarginLeft='';if(dialogElement.parentNode!==document.body){window.removeEventListener('resize',positionHandlingFunction);window.removeEventListener('orientationchange',positionHandlingFunction);observer.disconnect();return;}
dialogElement.style.top='';dialogElement.style.left='';dialogElement.style.marginTop='';dialogElement.style.marginLeft='';dialogElement.style.width='94%';dialogElement.style.height='';dialogElement.style.maxHeight='';if(dialogElement.clientHeight>((window.innerHeight/100)*94)){dialogElement.style.height='94%';dialogElement.style.maxHeight=strMaxHeight;}
intDialogResolvedWidth=dialogElement.offsetWidth;intDialogResolvedHeight=dialogElement.offsetHeight;dialogElement.style.width=intDialogResolvedWidth+'px';dialogElement.style.height=intDialogResolvedHeight+'px';jsnPositionData=GS.getElementPositionData(elementTarget);if(strDirectionRequest==='up'){arrTests=['up','down','left','right'];}else if(strDirectionRequest==='down'){arrTests=['down','up','left','right'];}else if(strDirectionRequest==='left'){arrTests=['left','right','down','up'];}else if(strDirectionRequest==='right'){arrTests=['right','left','down','up'];}else{arrTests=[];}
for(i=0,len=arrTests.length;i<len;i+=1){if((arrTests[i]==='up'&&(intDialogResolvedHeight+intMargin)<=jsnPositionData.intRoomAbove)||(arrTests[i]==='down'&&(intDialogResolvedHeight+intMargin)<=jsnPositionData.intRoomBelow)||(arrTests[i]==='left'&&(intDialogResolvedWidth+intMargin)<=jsnPositionData.intRoomLeft)||(arrTests[i]==='right'&&(intDialogResolvedWidth+intMargin)<=jsnPositionData.intRoomRight)){strResolvedDirection=arrTests[i];break;}}
strResolvedDirection=strResolvedDirection||'full';if(strResolvedDirection==='up'||strResolvedDirection==='down'){intElementMidPoint=(jsnPositionData.intElementLeft+(jsnPositionData.intElementWidth/2));intDialogMidPoint=(intDialogResolvedWidth/2);if(intElementMidPoint-intDialogMidPoint<intMargin){intDialogLeft=intMargin;}else if(intElementMidPoint+intDialogMidPoint>window.innerWidth-intMargin){intDialogLeft=((window.innerWidth-intDialogResolvedWidth)-intMargin);}else{intDialogLeft=(intElementMidPoint-intDialogMidPoint);}}else if(strResolvedDirection==='left'||strResolvedDirection==='right'){intElementMidPoint=(jsnPositionData.intElementTop+(jsnPositionData.intElementHeight/2));intDialogMidPoint=(intDialogResolvedHeight/2);if(intElementMidPoint-intDialogMidPoint<intMargin){intDialogTop=intMargin;}else if(intElementMidPoint+intDialogMidPoint>window.innerHeight-intMargin){intDialogTop=((window.innerHeight-intDialogResolvedHeight)-intMargin);}else{intDialogTop=(intElementMidPoint-intDialogMidPoint);}}else{intDialogTop='50%';intDialogLeft='50%';intDialogMarginTop='-'+(intDialogResolvedHeight/2)+'px';intDialogMarginLeft='-'+(intDialogResolvedWidth/2)+'px';}
if(strResolvedDirection==='up'){intDialogTop=(jsnPositionData.intElementTop-intDialogResolvedHeight);}else if(strResolvedDirection==='down'){intDialogTop=(jsnPositionData.intElementTop+jsnPositionData.intElementHeight);}else if(strResolvedDirection==='left'){intDialogLeft=(jsnPositionData.intElementLeft-intDialogResolvedWidth);}else if(strResolvedDirection==='right'){intDialogLeft=(jsnPositionData.intElementLeft+jsnPositionData.intElementWidth);}
if(intDialogTop+intDialogResolvedHeight>window.innerHeight){intDialogTop-=(intDialogTop+intDialogResolvedHeight)-window.innerHeight;}
if(intDialogLeft+intDialogResolvedWidth>window.innerWidth){intDialogLeft-=(intDialogLeft+intDialogResolvedWidth)-window.innerWidth;}
dialogElement.style.top=intDialogTop+'px';dialogElement.style.left=intDialogLeft+'px';dialogElement.style.marginTop=intDialogMarginTop+'px';dialogElement.style.marginLeft=intDialogMarginLeft+'px';};positionHandlingFunction();window.addEventListener('resize',positionHandlingFunction);window.addEventListener('orientationchange',positionHandlingFunction);observer=new MutationObserver(positionHandlingFunction);observer.observe(dialogElement,{childList:true,subtree:true});if(typeof afterOpenFunction==='function'){afterOpenFunction.apply(dialogElement,[]);}
return dialogElement;};})();(function(){'use strict';xtag.register('gs-dialog',{lifecycle:{created:function(){document.body.focus();document.body.parentNode.classList.add('no-scroll-except-for-dialog');},inserted:function(){if(!this.hasAttribute('no-window-listen')){this.bind();this.windowResizeHandler();}},removed:function(){this.unbind();}},events:{'click:delegate([dialogclose])':function(event){var dialogcloseElement=GS.findParentElement(event.target,'[dialogclose]');GS.findParentTag(event.target,'gs-dialog').destroy(dialogcloseElement.textContent,event);}},accessors:{},methods:{bind:function(){var element=this;if(!element.hasAttribute('no-window-listen')){element.windowResizeHandler=function(){element.style.left=(window.innerWidth/2)-(element.offsetWidth/2)+'px';};window.addEventListener('resize',element.windowResizeHandler);window.addEventListener('orientationchange',element.windowResizeHandler);}},unbind:function(){window.removeEventListener('resize',this.windowResizeHandler);window.removeEventListener('orientationchange',this.windowResizeHandler);GS.triggerEvent(window,'resize');},destroy:function(strAnswer,originalEvent){var beforeCloseEvent;if(this.parentNode===document.body){beforeCloseEvent=GS.triggerEvent(this,'beforeclose',{'data':strAnswer,'originalEvent':originalEvent});if(!beforeCloseEvent.defaultPrevented&&(!originalEvent||!originalEvent.defaultPrevented)){document.body.removeChild(this.previousElementSibling);document.body.removeChild(this);GS.triggerEvent(this,'afterclose',{'data':strAnswer,'originalEvent':originalEvent});if(document.getElementsByTagName('gs-dialog').length===0){document.body.parentNode.classList.remove('no-scroll-except-for-dialog');}}}}}});xtag.register('gs-dialog-overlay',{lifecycle:{},events:{},accessors:{},methods:{}});})();window.addEventListener('design-register-element',function(event){'use strict';registerDesignSnippet('<gs-envelope>','<gs-envelope>','gs-envelope src="${1:test.tpeople}">\n'+'    <template for="hud"></template>\n'+'    <template for="table">\n'+'        <table>\n'+'            <tbody>\n'+'                <tr>\n'+'                    <th heading="#"><gs-static column="row_number"></gs-static></th>\n'+'                    <td heading="">$0</td>\n'+'                </tr>\n'+'            </tbody>\n'+'        </table>\n'+'    </template>\n'+'    <template for="insert"></template>\n'+'</gs-envelope>');designRegisterElement('gs-envelope','/v1/dev/developer_g/greyspots-'+GS.version()+'/tools/documentation/doc-elem-envelope.html');window.designElementProperty_GSENVELOPE=function(selectedElement){var intIdNumber=(Math.floor(Math.random()*1000))+(Math.floor(new Date().getTime()/(Math.random()*100000)));addProp('Source',true,'<gs-memo class="target" autoresize rows="1" value="'+decodeURIComponent(selectedElement.getAttribute('src')||selectedElement.getAttribute('source')||'')+'" mini></gs-memo>',function(){return setOrRemoveTextAttribute(selectedElement,'src',encodeURIComponent(this.value));});addProp('Columns',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('cols')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'cols',this.value);});addProp('Where',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('where')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'where',(this.value));});addProp('Order By',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('ord')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'ord',this.value);});addProp('Limit',true,'<gs-number class="target" value="'+(selectedElement.getAttribute('limit')||'')+'" mini></gs-number>',function(){return setOrRemoveTextAttribute(selectedElement,'limit',this.value);});addProp('Offset',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('offset')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'offset',this.value);});addProp('Column In Querystring',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('qs')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'qs',this.value,false);});addProp('Parent&nbsp;Column',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('column')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'column',this.value);});addProp('Line Column',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('child-column')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'child-column',this.value);});addProp('Reflow At',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('reflow-at')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'reflow-at',this.value);});addProp('Scroll To Bottom',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('scroll-to-bottom')||'')+'" mini></gs-text>',function(){return setOrRemoveBooleanAttribute(selectedElement,'scroll-to-bottom',(this.value==='true'),false);});addProp('HUD Orderby',true,'<gs-checkbox class="target" value="'+(!selectedElement.hasAttribute('no-hudorderby'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'no-hudorderby',(this.value==='true'),false);});addProp('HUD Limit',true,'<gs-checkbox class="target" value="'+(!selectedElement.hasAttribute('no-hudlimit'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'no-hudlimit',(this.value==='true'),false);});addProp('HUD Refresh',true,'<gs-checkbox class="target" value="'+(!selectedElement.hasAttribute('no-hudrefresh'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'no-hudrefresh',(this.value==='true'),false);});addProp('HUD Delete',true,'<gs-checkbox class="target" value="'+(!selectedElement.hasAttribute('no-huddelete'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'no-huddelete',(this.value==='true'),false);});addProp('Expand&nbsp;To&nbsp;Content',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('expand-to-content'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'expand-to-content',(this.value==='true'),true);});addProp('Primary Keys',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('primary-keys')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'primary-keys',this.value);});addProp('Select Action',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('action-select')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'action-select',this.value);});addProp('Insert Action',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('action-insert')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'action-insert',this.value);});addProp('Update Action',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('action-update')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'action-update',this.value);});addProp('Delete Action',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('action-delete')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'action-delete',this.value);});addProp('Title',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('title')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'title',this.value);});strVisibilityAttribute='';if(selectedElement.hasAttribute('hidden')){strVisibilityAttribute='hidden';}
if(selectedElement.hasAttribute('hide-on-desktop')){strVisibilityAttribute='hide-on-desktop';}
if(selectedElement.hasAttribute('hide-on-tablet')){strVisibilityAttribute='hide-on-tablet';}
if(selectedElement.hasAttribute('hide-on-phone')){strVisibilityAttribute='hide-on-phone';}
if(selectedElement.hasAttribute('show-on-desktop')){strVisibilityAttribute='show-on-desktop';}
if(selectedElement.hasAttribute('show-on-tablet')){strVisibilityAttribute='show-on-tablet';}
if(selectedElement.hasAttribute('show-on-phone')){strVisibilityAttribute='show-on-phone';}
addProp('Visibility',true,'<gs-select class="target" value="'+strVisibilityAttribute+'" mini>'+'<option value="">Visible</option>'+'<option value="hidden">Invisible</option>'+'<option value="hide-on-desktop">Invisible at desktop size</option>'+'<option value="hide-on-tablet">Invisible at tablet size</option>'+'<option value="hide-on-phone">Invisible at phone size</option>'+'<option value="show-on-desktop">Visible at desktop size</option>'+'<option value="show-on-tablet">Visible at tablet size</option>'+'<option value="show-on-phone">Visible at phone size</option>'+'</gs-select>',function(){selectedElement.removeAttribute('hidden');selectedElement.removeAttribute('hide-on-desktop');selectedElement.removeAttribute('hide-on-tablet');selectedElement.removeAttribute('hide-on-phone');selectedElement.removeAttribute('show-on-desktop');selectedElement.removeAttribute('show-on-tablet');selectedElement.removeAttribute('show-on-phone');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});addProp('Refresh On Querystring Columns',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('refresh-on-querystring-values')||'')+'" mini></gs-text>',function(){this.removeAttribute('refresh-on-querystring-change');return setOrRemoveTextAttribute(selectedElement,'refresh-on-querystring-values',this.value);});addProp('Refresh On Querystring Change',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('refresh-on-querystring-change'))+'" mini></gs-checkbox>',function(){this.removeAttribute('refresh-on-querystring-values');return setOrRemoveBooleanAttribute(selectedElement,'refresh-on-querystring-change',this.value==='true',true);});addProp('suspend-inserted',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-inserted')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-inserted',this.value==='true',true);});};});document.addEventListener('DOMContentLoaded',function(){'use strict';function addLoader(element,strText){element.loaderContainer=GS.stringToElement('<div class="loader-container" style="top: '+element.scrollContainerElement.scrollTop+'px;"></div>');element.scrollContainerElement.appendChild(element.loaderContainer);GS.addLoader(element.loaderContainer,strText);}
function removeLoader(element){if(element.loaderContainer&&element.loaderContainer.parentNode===element.scrollContainerElement){element.scrollContainerElement.removeChild(element.loaderContainer);}
GS.removeLoader(element.loaderContainer);}
function selectHandler(element,dragOrigin,dragCurrentCell,dragMode){var bolThead,bolFirstTh,arrRecords,arrCells,arrRecordsToAffect=[],arrCellsToAffect=[],arrNewSelection=[],arrCellsToRemoveFromSelection=[],i,len,intFrom,intTo;arrRecords=xtag.query(element.scrollContainerElement,'tr');arrCells=xtag.query(element.scrollContainerElement,'td, th');if(arrRecords.length>0){bolThead=Boolean(element.theadElement);if((bolThead&&arrRecords.length>1)||(!bolThead&&arrRecords>0)){if(bolThead){bolFirstTh=arrRecords[1].children[0].nodeName==='TH';}else{bolFirstTh=arrRecords[0].children[0].nodeName==='TH';}}
if(bolThead&&bolFirstTh&&dragOrigin.parentNode.rowIndex===0&&dragCurrentCell.parentNode.rowIndex===0&&dragOrigin.cellIndex===0&&dragCurrentCell.cellIndex===0){arrCellsToAffect=arrCells;}else if(bolFirstTh&&dragOrigin.cellIndex===0&&dragCurrentCell.cellIndex===0){arrRecordsToAffect=arrRecords.slice(Math.min(dragOrigin.parentNode.rowIndex,dragCurrentCell.parentNode.rowIndex),Math.max(dragOrigin.parentNode.rowIndex,dragCurrentCell.parentNode.rowIndex)+1);for(i=0,len=arrRecordsToAffect.length;i<len;i+=1){Array.prototype.push.apply(arrCellsToAffect,xtag.toArray(arrRecordsToAffect[i].children));}}else if(bolThead&&dragOrigin.parentNode.rowIndex===0&&dragCurrentCell.parentNode.rowIndex===0){intFrom=Math.min(dragOrigin.cellIndex,dragCurrentCell.cellIndex);intTo=Math.max(dragOrigin.cellIndex,dragCurrentCell.cellIndex)+1;for(i=0,len=arrRecords.length;i<len;i+=1){Array.prototype.push.apply(arrCellsToAffect,xtag.toArray(arrRecords[i].children).slice(intFrom,intTo));}}else if(dragOrigin===dragCurrentCell){arrRecordsToAffect=arrRecords.slice(dragOrigin.parentNode.rowIndex,dragOrigin.parentNode.rowIndex+1);for(i=0,len=arrRecordsToAffect.length;i<len;i+=1){Array.prototype.push.apply(arrCellsToAffect,xtag.toArray(arrRecordsToAffect[i].children));}}else{arrRecordsToAffect=arrRecords.slice(Math.min(dragOrigin.parentNode.rowIndex,dragCurrentCell.parentNode.rowIndex),Math.max(dragOrigin.parentNode.rowIndex,dragCurrentCell.parentNode.rowIndex)+1);intFrom=Math.min(dragOrigin.cellIndex,dragCurrentCell.cellIndex);intTo=Math.max(dragOrigin.cellIndex,dragCurrentCell.cellIndex)+1;for(i=0,len=arrRecordsToAffect.length;i<len;i+=1){Array.prototype.push.apply(arrCellsToAffect,xtag.toArray(arrRecordsToAffect[i].children).slice(intFrom,intTo));}}
if(dragMode==='select'){for(i=0,len=element.selectionSelectedCells.length;i<len;i+=1){if(arrCellsToAffect.indexOf(element.selectionSelectedCells[i])===-1){arrCellsToRemoveFromSelection.push(element.selectionSelectedCells[i]);}}
element.selectionSelectedCells=arrCellsToAffect;arrNewSelection=element.selectedCells;for(i=0,len=arrCellsToAffect.length;i<len;i+=1){GS.listAdd(arrNewSelection,arrCellsToAffect[i]);}
for(i=0,len=arrCellsToRemoveFromSelection.length;i<len;i+=1){arrNewSelection.splice(arrNewSelection.indexOf(arrCellsToRemoveFromSelection[i]),1);}
element.selectedCells=arrNewSelection;}else{arrNewSelection=element.selectedCells;for(i=0,len=arrCellsToAffect.length;i<len;i+=1){if(arrNewSelection.indexOf(arrCellsToAffect[i])>-1){arrNewSelection.splice(arrNewSelection.indexOf(arrCellsToAffect[i]),1);}}
element.selectedCells=arrNewSelection;}}}
function getData(element){var data,strLink,strOrderBy='',strWhere,strWhereColumn,strSelectAction,strWhereAttribute=queryStringTemplate((element.getAttribute('where')||'')),strSource=queryStringTemplate(decodeURIComponent(element.getAttribute('src')||element.getAttribute('source')||'')),strCols=queryStringTemplate(element.getAttribute('cols')||''),callbackFunction,i,len;strLink='/v1/'+(element.getAttribute('action-select')||'env/action_select')+'?src='+encodeURIComponent(strSource);if((element.getAttribute('column')||element.getAttribute('qs'))&&element.value){strWhereColumn=element.getAttribute('child-column')||element.getAttribute('column')||element.getAttribute('qs');if(isNaN(element.value)){strWhere=strWhereColumn+'::text=\''+(element.value)+'\'::text'+(strWhereAttribute!==''?' AND ('+strWhereAttribute+')':'');}else{strWhere=strWhereColumn+'='+(element.value)+(strWhereAttribute!==''?' AND ('+strWhereAttribute+')':'');}}else{strWhere=strWhereAttribute;}
if(element.user_order_bys&&element.user_order_bys.columns.length>0){for(i=0,len=element.user_order_bys.columns.length,strOrderBy='';i<len;i+=1){strOrderBy+=(strOrderBy!==''?', ':'')+element.user_order_bys.columns[i]+' '+element.user_order_bys.directions[i].toUpperCase();}}else{strOrderBy=queryStringTemplate(decodeURIComponent(element.getAttribute('ord')||''));}
strLink+='&where='+encodeURIComponent(strWhere)+'&limit='+encodeURIComponent(queryStringTemplate(decodeURIComponent(element.getAttribute('limit')||'')))+'&offset='+encodeURIComponent(queryStringTemplate(decodeURIComponent(element.getAttribute('offset')||'')))+'&order_by='+encodeURIComponent(strOrderBy)+'&cols='+encodeURIComponent(strCols);element.oldScrollTop=element.scrollContainerElement.scrollTop;GS.dataFetch(strLink,true);callbackFunction=function(event){handleData(element,event.detail.response,event.detail.error);removeLoader(element);document.removeEventListener('dataready_'+encodeURIComponent(strLink),callbackFunction);};addLoader(element,'Loading...');document.addEventListener('dataready_'+encodeURIComponent(strLink),callbackFunction);}
function handleData(element,data,error){var strHeaderHTML,strFixedHeaderHTML,tableElement,theadElement,tbodyElement,strBodyHTML,tableTemplateElement,arrCells,i,len,bolHeaderTextFound=false,strCurrentHeadingText,bolInitalSuccess;if(!error){bolInitalSuccess=!element.lastSuccessData;element.classList.remove('error');element.lastSuccessData=data;tableTemplateElement=document.createElement('template');tableTemplateElement.innerHTML=element.tableTemplate;tableElement=xtag.query(tableTemplateElement.content,'table')[0];theadElement=xtag.queryChildren(tableElement,'thead')[0];tbodyElement=xtag.queryChildren(tableElement,'tbody')[0];if(element.limitButtonElement){element.limitButtonElement.textContent=data.dat.length+' of '+data.row_count;}
if(!theadElement){arrCells=tbodyElement.getElementsByTagName('tr')[0].children;for(i=0,len=arrCells.length,strHeaderHTML='',strFixedHeaderHTML='';i<len;i+=1){strCurrentHeadingText=encodeHTML(queryStringTemplate(arrCells[i].getAttribute('heading')||''));if(strCurrentHeadingText){bolHeaderTextFound=true;}
strHeaderHTML+='<th gs-dynamic>'+strCurrentHeadingText+'</th>';strFixedHeaderHTML+='<div class="fixed-header-cell" gs-dynamic>'+strCurrentHeadingText+'</div>';}
if(bolHeaderTextFound){strHeaderHTML='<thead gs-dynamic><tr gs-dynamic>'+strHeaderHTML+'</tr></thead>';}else{strHeaderHTML='';strFixedHeaderHTML='';}}else{strHeaderHTML=theadElement.outerHTML;arrCells=theadElement.getElementsByTagName('tr')[0].children;for(i=0,len=arrCells.length,strFixedHeaderHTML='';i<len;i+=1){strFixedHeaderHTML+='<div class="fixed-header-cell" gs-dynamic>'+encodeHTML(arrCells[i].textContent||'')+'</div>';}}
element.fixedHeaderContainerElement.innerHTML=strFixedHeaderHTML;strBodyHTML='<tbody gs-dynamic>'+dataTemplateRecords(element,data)+'</tbody>';element.scrollContainerElement.innerHTML='<table gs-dynamic>'+
strHeaderHTML+
strBodyHTML+'</table>';element.theadElement=xtag.query(element.scrollContainerElement,'thead')[0];element.tbodyElement=xtag.query(element.scrollContainerElement,'tbody')[0];element.refreshFixedHeader();element.refreshHeight();element.refreshReflow();element.scrollContainerElement.scrollTop=element.oldScrollTop;if(element.hasAttribute('scroll-to-bottom')){element.scrollContainerElement.scrollTop=element.scrollContainerElement.scrollHeight;}
GS.triggerEvent(element,'after_select');}else{element.classList.add('error');GS.ajaxErrorDialog(data,function(){getData(element);});}}
function updateRecord(element,record,strColumn,newValue){var data,strLink,strWhere='',len,i,strUpdateAction,callbackFunction,strSource=queryStringTemplate(decodeURIComponent(element.getAttribute('src')||element.getAttribute('source')||''));for(i=0,len=element.arrWhereColumns.length;i<len;i+=1){if(strWhere.length>0){strWhere=strWhere+'&';}
strWhere=strWhere+element.arrWhereColumns[i]+'='+record.getAttribute('data-'+element.arrWhereColumns[i]);}
strLink='/v1/'+(element.getAttribute('action-update')||'env/action_update')+'?src='+encodeURIComponent(strSource);strLink+='&where='+encodeURIComponent(strWhere)+'&column='+strColumn+'&value='+encodeURIComponent(newValue);addLoader(element,'Updating Record...');GS.dataFetch(strLink,true);callbackFunction=function(event){var jsnData,i,len,idIndex,tbodyElement,recordIndex,focusElement=document.activeElement,focusElementTag,focusElementRecord,focusElementCell,focusElementRecordIndex,focusElementCellIndex,focusElementIndex,focusElementCell,elementWalkResult;removeLoader(element);focusElementCell=getCellFromTarget(focusElement);if(focusElementCell){focusElementTag=focusElement.nodeName.toLowerCase();focusElementRecord=GS.findParentTag(focusElementCell,'tr');focusElementRecordIndex=focusElementRecord.rowIndex;focusElementCellIndex=focusElementCell.cellIndex;focusElementIndex=xtag.query(focusElementRecord,focusElement.nodeName.toLowerCase()).indexOf(focusElement);}
if(!event.detail.error){GS.triggerEvent(element,'after_update');idIndex=element.lastSuccessData.arr_column.indexOf('id');for(i=0,len=element.lastSuccessData.dat.length;i<len;i+=1){if(String(element.lastSuccessData.dat[i][idIndex])===String(record.getAttribute('data-id'))){recordIndex=i;element.lastSuccessData.dat[i]=JSON.parse(JSON.stringify(event.detail.response));break;}}
tbodyElement=document.createElement('tbody');tbodyElement.innerHTML=dataTemplateRecords(element,element.lastSuccessData,recordIndex,1);record.parentNode.replaceChild(xtag.queryChildren(tbodyElement,'tr')[0],record);if(focusElementCell){elementWalkResult=xtag.query(element.scrollContainerElement,'tr')[focusElementRecordIndex];if(elementWalkResult){elementWalkResult=xtag.query(elementWalkResult,focusElementTag)[focusElementIndex];if(elementWalkResult){elementWalkResult.focus();}}}
element.refreshFixedHeader();element.refreshHeight();}else{event.detail.response.error_addin='<b gs-dynamic>Your Unsaved Value:</b> "'+newValue+'"';GS.ajaxErrorDialog(event.detail.response,function(){updateRecord(element,record,strColumn,newValue);},function(){idIndex=element.lastSuccessData.arr_column.indexOf('id');for(i=0,len=element.lastSuccessData.dat.length;i<len;i+=1){if(String(element.lastSuccessData.dat[i][idIndex])===String(record.getAttribute('data-id'))){recordIndex=i;break;}}
tbodyElement=document.createElement('tbody');tbodyElement.innerHTML=dataTemplateRecords(element,element.lastSuccessData,recordIndex,1);record.parentNode.replaceChild(xtag.queryChildren(tbodyElement,'tr')[0],record);});}
document.removeEventListener('dataready_'+encodeURIComponent(strLink),callbackFunction);};document.addEventListener('dataready_'+encodeURIComponent(strLink),callbackFunction);}
function deleteRecords(element,arrID,arrRecord){var strIDs=arrID.join(','),strDeleteAction,callbackFunction,strLink,strSource=queryStringTemplate(decodeURIComponent(element.getAttribute('src')||element.getAttribute('source')||''));strLink='/v1/'+(element.getAttribute('action-delete')||'env/action_delete')+'?src='+encodeURIComponent(strSource)+'&id='+strIDs;addLoader(element,'Deleting Record...');GS.dataFetch(strLink,true);callbackFunction=function(event){var i,len,idColIndex,response=event.detail.response,error=event.detail.error,deleteIndex;removeLoader(element);if(!error){GS.triggerEvent(element,'after_delete');for(i=0,len=arrRecord.length;i<len;i+=1){arrRecord[i].parentNode.removeChild(arrRecord[i]);}
idColIndex=element.lastSuccessData.arr_column.indexOf('id');if(element.hasAttribute('limit')||element.lastSuccessData.dat.length===arrID.length){element.refresh();}else{for(i=0,len=element.lastSuccessData.dat.length;i<len;i+=1){deleteIndex=arrID.indexOf(String(element.lastSuccessData.dat[i][idColIndex]));if(deleteIndex>-1){element.lastSuccessData.dat.splice(i,1);arrID.splice(deleteIndex,1);len-=1;i-=1;}
if(arrID.length===0){break;}}
handleData(element,element.lastSuccessData);}}else{GS.ajaxErrorDialog(response,function(){deleteRecords(element,arrID,arrRecord);});}
document.removeEventListener('dataready_'+encodeURIComponent(strLink),callbackFunction);};document.addEventListener('dataready_'+encodeURIComponent(strLink),callbackFunction);}
function insertRecord(element,strInsertString){var strInsertAction,callbackFunction,strLink,strSource=queryStringTemplate(decodeURIComponent(element.getAttribute('src')||element.getAttribute('source')||''));if(element.getAttribute('column')||element.getAttribute('qs')){strInsertString+=(strInsertString?'&':'')+(element.getAttribute('child-column')||element.getAttribute('column')||element.getAttribute('qs'))+'='+(element.value);}
strLink='/v1/'+(element.getAttribute('action-insert')||'env/action_insert')+'?src='+encodeURIComponent(strSource)+'&data='+encodeURIComponent(strInsertString);addLoader(element,'Inserting Record...');GS.dataFetch(strLink,true);callbackFunction=function(event){var response=event.detail.response,error=event.detail.error;removeLoader(element);if(!error){GS.triggerEvent(element,'after_insert');getData(element,true);}else{GS.ajaxErrorDialog(response,function(){var errorCallbackFunction;errorCallbackFunction=function(){var arrKey=GS.qryGetKeys(strInsertString);function setValues(){for(var i=0,len=arrKey.length;i<len;i+=1){var elem=document.querySelector('#insert-dialog-content-container [column="'+arrKey[i]+'"]');elem.value=GS.qryGetVal(strInsertString,arrKey[i]);}}
for(var i=0,len=arrKey.length;i<len;i+=1){var elem=document.querySelector('#insert-dialog-content-container [column="'+arrKey[i]+'"]');/*if (elem.getData) {
                                // Callback sets all the values for the inputs
                                elem.getData(true, true, setValues);
                            } else */ if(elem.refresh){elem.refresh(true,true,setValues);}}
element.removeEventListener('insert_dialog_open',errorCallbackFunction);};element.addEventListener('insert_dialog_open',errorCallbackFunction);GS.triggerEvent(element.hudTopElement.children[0],'click');});}
document.removeEventListener('dataready_'+encodeURIComponent(strLink),callbackFunction);};document.addEventListener('dataready_'+encodeURIComponent(strLink),callbackFunction);}
function refreshHud(element){var elementHudTopContainer,elementHudBottomContainer,divElement=document.createElement('div'),hudInsertButton,hudRefreshButton,hudDeleteButton,hudOrderbyButton,hudLimitButton,intOffset,intLimit,jsnOrderByCopy,i,len,customHudTemplate,customHudElements;elementHudTopContainer=element.hudTopElement;elementHudBottomContainer=element.hudBottomElement;elementHudTopContainer.innerHTML='';elementHudBottomContainer.innerHTML='';if(element.insertTemplate){divElement.innerHTML='<gs-button inline icononly icon="plus" no-focus gs-dynamic>Insert</gs-button>';hudInsertButton=divElement.childNodes[0];elementHudTopContainer.appendChild(hudInsertButton);}
if(!element.hasAttribute('no-hudrefresh')){divElement.innerHTML='<gs-button inline icononly icon="refresh" no-focus gs-dynamic>Refresh</gs-button>';hudRefreshButton=divElement.childNodes[0];elementHudTopContainer.appendChild(hudRefreshButton);}
if(!element.hasAttribute('no-huddelete')){divElement.innerHTML='<gs-button inline icononly icon="times" no-focus gs-dynamic>Delete</gs-button>';hudDeleteButton=divElement.childNodes[0];elementHudTopContainer.appendChild(hudDeleteButton);}
if(element.hudTemplate&&element.hudTemplate.trim()){customHudTemplate=document.createElement('template');customHudTemplate.innerHTML=element.hudTemplate;customHudElements=customHudTemplate.content.childNodes;for(i=0,len=customHudElements.length;i<len;i+=1){elementHudTopContainer.appendChild(customHudElements[0]);}}
if(!element.hasAttribute('no-hudorderby')){divElement.innerHTML='<gs-button inline icononly icon="sort-amount-asc" no-focus gs-dynamic>Order By</gs-button>';hudOrderbyButton=divElement.childNodes[0];elementHudBottomContainer.appendChild(hudOrderbyButton);}
element.limitButtonElement='';if(!element.hasAttribute('no-hudlimit')){divElement.innerHTML='<span flex></span><gs-button inline no-focus>Limit</gs-button>';hudLimitButton=divElement.childNodes[1];element.limitButtonElement=hudLimitButton;elementHudBottomContainer.appendChild(divElement.childNodes[0]);elementHudBottomContainer.appendChild(divElement.childNodes[0]);}
if(elementHudTopContainer.innerHTML===''){elementHudTopContainer.style.display='none';}else{elementHudTopContainer.style.display='';}
if(elementHudBottomContainer.innerHTML===''){elementHudBottomContainer.style.display='none';}else{elementHudBottomContainer.style.display='';}
if(hudInsertButton){hudInsertButton.addEventListener('click',function(event){var templateElement=document.createElement('template');templateElement.innerHTML=ml(function(){/*
                    <gs-page gs-dynamic>
                        <gs-header gs-dynamic><center gs-dynamic><h3 gs-dynamic>Insert</h3></center></gs-header>
                        <gs-body padded gs-dynamic>
                            <div id="insert-dialog-content-container" gs-dynamic>{{HTML}}</div>
                        </gs-body>
                        <gs-footer gs-dynamic>
                            <gs-grid gs-dynamic widths="1,1" class="width-2">
                                <gs-block gs-dynamic width="1">
                                    <gs-button dialogclose gs-dynamic>Cancel</gs-button>
                                </gs-block>
                                <gs-block gs-dynamic width="1">
                                    <gs-button dialogclose listen-for-return emphasis gs-dynamic>Ok</gs-button>
                                </gs-block>
                            </gs-grid>
                        </gs-footer>
                    </gs-page>
                */}).replace('{{HTML}}',element.insertTemplate);GS.openDialog(templateElement,function(){GS.triggerEvent(element,'insert_dialog_open');},function(event,strAnswer){var insertContainer=document.getElementById('insert-dialog-content-container'),controls,i,len,strInsertString,currentValue;if(strAnswer==='Ok'){controls=xtag.query(insertContainer,'[column]');for(i=0,len=controls.length,strInsertString='';i<len;i+=1){currentValue=controls.checked!==undefined?controls.checked:controls[i].value;if(currentValue===undefined||currentValue===null){currentValue='';}
currentValue=encodeURIComponent(currentValue);if(currentValue!==undefined&&currentValue!==null&&currentValue!==''){strInsertString+=(strInsertString===''?'':'&')+
controls[i].getAttribute('column')+'='+currentValue;}}
insertRecord(element,strInsertString);}});});}
if(hudRefreshButton){element.hudRefreshButton=hudRefreshButton;hudRefreshButton.addEventListener('click',function(event){getData(element,true);});}
if(hudDeleteButton){element.hudDeleteButton=hudDeleteButton;hudDeleteButton.addEventListener('click',function(event){var i,len,arrRecord=element.selectedRecords,arrID=[];for(i=0,len=arrRecord.length;i<len;i+=1){arrID.push(String(arrRecord[i].dataset.id));}
if(arrID.length>0){GS.msgbox('Are you sure...','<br gs-dynamic />'+'<center gs-dynamic>'+'Are you sure you want to delete '+(arrID.length>1?'these records':'this record')+'?'+'</center>'+'<br gs-dynamic />',['No','Yes'],function(strAnswer){if(strAnswer==='Yes'){deleteRecords(element,arrID,arrRecord);}});}else{GS.msgbox('Nothing Selected.','<br gs-dynamic /><center gs-dynamic>Nothing is selected. Please select something to delete.</center><br />',['Ok']);}});}
if(hudOrderbyButton){element.hudOrderbyButton=hudOrderbyButton;hudOrderbyButton.addEventListener('click',function(event){var templateElement=document.createElement('template');jsnOrderByCopy=JSON.parse(JSON.stringify(element.user_order_bys));templateElement.setAttribute('data-mode','touch');templateElement.innerHTML=ml(function(){/*
                    <gs-page gs-dynamic>
                        <gs-header gs-dynamic>
                            <center gs-dynamic><h3 gs-dynamic>Sorted Columns</h3></center>
                            <gs-button id="order-by-dialog-add-column" gs-dynamic>Add A Column To Sort</gs-button>
                        </gs-header>
                        <gs-body padded gs-dynamic>
                            <div id="order-by-dialog-ghost-container" gs-dynamic></div>
                            <div id="order-by-dialog-used-columns" gs-dynamic></div>
                        </gs-body>
                        <gs-footer gs-dynamic>
                            <gs-grid>
                                <gs-block><gs-button gs-dynamic dialogclose>Cancel</gs-button></gs-block>
                                <gs-block><gs-button gs-dynamic dialogclose>Ok</gs-button></gs-block>
                            </gs-grid>
                        </gs-footer>
                    </gs-page>
                */});GS.openDialog(templateElement,function(){document.getElementById('order-by-dialog-add-column').addEventListener('click',function(event){var dialog,dialogButtons,templateElement=document.createElement('template');templateElement.innerHTML=ml(function(){/*
                            <gs-page gs-dynamic>
                                <gs-header gs-dynamic>
                                    <center gs-dynamic><h3 gs-dynamic>Unsorted Columns</h3></center>
                                </gs-header>
                                <gs-body padded gs-dynamic>
                                    <div id="order-by-dialog-unused-columns" gs-dynamic></div>
                                </gs-body>
                                <gs-footer gs-dynamic>
                                    <gs-button dialogclose gs-dynamic>Cancel</gs-button>
                                </gs-footer>
                            </gs-page>
                        */});dialog=GS.openDialog(templateElement,function(){var unusedColumnsContainer=document.getElementById('order-by-dialog-unused-columns'),unusedColumnTapHandler,columnElements,i,len,strHTML;for(i=0,len=element.lastSuccessData.arr_column.length,strHTML='';i<len;i+=1){if(jsnOrderByCopy.columns.indexOf(element.lastSuccessData.arr_column[i])===-1){strHTML+='<div class="order_by_column" dialogclose data-column="'+element.lastSuccessData.arr_column[i]+'" gs-dynamic>'+'<div class="column_name" gs-dynamic>'+GS.strToTitle(element.lastSuccessData.arr_column[i])+'</div>'+'</div>';}}
unusedColumnsContainer.innerHTML=strHTML;unusedColumnTapHandler=function(event){if(event.target.classList.contains('column_name')){jsnOrderByCopy.columns.push(event.target.parentNode.getAttribute('data-column'));}else{jsnOrderByCopy.columns.push(event.target.getAttribute('data-column'));}
jsnOrderByCopy.directions.push('asc');refreshOrderBys();};columnElements=unusedColumnsContainer.getElementsByClassName('order_by_column');for(i=0,len=columnElements.length;i<len;i+=1){columnElements[i].addEventListener('click',unusedColumnTapHandler);}});dialogButtons=dialog.getElementsByTagName('gs-button');});var refreshOrderBys=function(){var usedColumnsElement=document.getElementById('order-by-dialog-used-columns'),ghostContainerElement=document.getElementById('order-by-dialog-ghost-container'),strHTML,i,len,sortButtons,sortMousedownHandler,deleteButtons,deleteTapHandler,directionButtons,directionTapHandler;for(i=0,len=jsnOrderByCopy.columns.length,strHTML='';i<len;i+=1){strHTML+='<div class="order_by_column" flex-horizontal data-column="'+jsnOrderByCopy.columns[i]+'" data-direction="'+jsnOrderByCopy.directions[i]+'" gs-dynamic>'+'<gs-button inline remove-all icononly icon="bars" class="sort" gs-dynamic></gs-button>'+'<div class="column_name" flex gs-dynamic>'+GS.strToTitle(jsnOrderByCopy.columns[i])+'</div>'+'<gs-button inline remove-all icononly icon="times" class="delete" gs-dynamic></gs-button>'+'<gs-button inline remove-all icononly icon="sort-amount-'+jsnOrderByCopy.directions[i]+'" class="direction" gs-dynamic></gs-button>'+'</div>';}
usedColumnsElement.innerHTML=strHTML;sortMousedownHandler=function(){var columns=usedColumnsElement.getElementsByClassName('order_by_column'),offsetsCache=[],i,len,currentElement=this.parentNode,currentlyMarkedElement,markerElement,bolLast=false,intToIndex,currentElementClone,intCloneoffset,intFromIndex,sortMousemoveHandler,sortMouseupHandler,strColumn=currentElement.getAttribute('data-column'),strDirection=currentElement.getAttribute('data-direction');markerElement=document.createElement('div');markerElement.classList.add('drop_marker');markerElement.setAttribute('gs-dynamic','');currentElementClone=currentElement.cloneNode(true);ghostContainerElement.appendChild(currentElementClone);intCloneoffset=GS.getElementOffset(ghostContainerElement).top+(currentElementClone.offsetHeight/2);for(i=0,len=columns.length;i<len;i+=1){offsetsCache.push({'element':columns[i],'top':GS.getElementOffset(columns[i]).top,'height':columns[i].offsetHeight});if(columns[i]===currentElement){intFromIndex=i;}}
sortMousemoveHandler=function(event){var i,len,matchedElement,bolNewLast,intTop;event.preventDefault();event.stopPropagation();if(event.which===0&&!evt.touchDevice){sortMouseupHandler();}else{intTop=GS.mousePosition(event).top+usedColumnsElement.parentNode.scrollTop;currentElementClone.style.top=(intTop-intCloneoffset)+'px';if(offsetsCache[0].top>intTop){matchedElement=offsetsCache[0].element;bolNewLast=false;}else{for(i=0,len=offsetsCache.length;i<len;i+=1){if(offsetsCache[i+1]){if(offsetsCache[i].top<=intTop&&offsetsCache[i].top+((offsetsCache[i+1].top-offsetsCache[i].top)/2)>intTop){matchedElement=offsetsCache[i].element;bolNewLast=false;intToIndex=i;break;}else if(offsetsCache[i].top<=intTop&&offsetsCache[i].top+((offsetsCache[i+1].top-offsetsCache[i].top)/2)<=intTop&&offsetsCache[i+1].top>intTop){matchedElement=offsetsCache[i+1].element;bolNewLast=false;intToIndex=i+1;break;}}else{if(offsetsCache[i].top+(offsetsCache[i].height/2)>=intTop){matchedElement=offsetsCache[i].element;bolNewLast=false;intToIndex=i;break;}else if(offsetsCache[i].top+(offsetsCache[i].height/2)<=intTop){matchedElement=offsetsCache[i].element;bolNewLast=true;intToIndex=i;break;}}}}
if(matchedElement!==currentlyMarkedElement||bolNewLast!==bolLast){if(bolNewLast===true){if(markerElement){markerElement.parentNode.removeChild(markerElement);}
matchedElement.parentNode.appendChild(markerElement);}else{matchedElement.parentNode.insertBefore(markerElement,matchedElement);}
currentlyMarkedElement=matchedElement;bolLast=bolNewLast;}}};document.body.addEventListener(evt.mousemove,sortMousemoveHandler);sortMouseupHandler=function(event){intToIndex=(intToIndex>intFromIndex?intToIndex-1:intToIndex);if(intFromIndex!==intToIndex&&intToIndex!==undefined){if(intFromIndex!==undefined&&intFromIndex!==''){jsnOrderByCopy.columns.splice(intFromIndex,1);jsnOrderByCopy.directions.splice(intFromIndex,1);}
jsnOrderByCopy.columns.splice(intToIndex,0,strColumn);jsnOrderByCopy.directions.splice(intToIndex,0,strDirection);refreshOrderBys();}else{markerElement.parentNode.removeChild(markerElement);}
ghostContainerElement.innerHTML='';document.body.removeEventListener(evt.mousemove,sortMousemoveHandler);document.body.removeEventListener(evt.mouseup,sortMouseupHandler);};document.body.addEventListener(evt.mouseup,sortMouseupHandler);};sortButtons=usedColumnsElement.getElementsByClassName('sort');for(i=0,len=sortButtons.length;i<len;i+=1){sortButtons[i].addEventListener(evt.mousedown,sortMousedownHandler);}
deleteTapHandler=function(){var indexToDelete=jsnOrderByCopy.columns.indexOf(this.parentNode.getAttribute('data-column'));jsnOrderByCopy.columns.splice(indexToDelete,1);jsnOrderByCopy.directions.splice(indexToDelete,1);refreshOrderBys();};deleteButtons=usedColumnsElement.getElementsByClassName('delete');for(i=0,len=deleteButtons.length;i<len;i+=1){deleteButtons[i].addEventListener('click',deleteTapHandler);}
directionTapHandler=function(){var indexToFlip=jsnOrderByCopy.columns.indexOf(this.parentNode.getAttribute('data-column'));if(jsnOrderByCopy.directions[indexToFlip]==='asc'){jsnOrderByCopy.directions[indexToFlip]='desc';}else{jsnOrderByCopy.directions[indexToFlip]='asc';}
refreshOrderBys();};directionButtons=usedColumnsElement.getElementsByClassName('direction');for(i=0,len=directionButtons.length;i<len;i+=1){directionButtons[i].addEventListener('click',directionTapHandler);}}
refreshOrderBys();},function(event,strAnswer){if(strAnswer==='Ok'){element.user_order_bys=JSON.parse(JSON.stringify(jsnOrderByCopy));getData(element,true);}});});}
if(hudLimitButton){element.hudLimitButton=hudLimitButton;hudLimitButton.addEventListener('click',function(event){var intLimit,intOffset,bolShowAll,fromValue,toValue,templateElement=document.createElement('template');if(element.getAttribute('limit')&&element.getAttribute('offset')){intOffset=parseInt(element.getAttribute('offset'),10);intLimit=parseInt(element.getAttribute('limit'),10);fromValue=intOffset;toValue=intOffset+intLimit;bolShowAll=false;}else if(element.getAttribute('limit')){fromValue='0';toValue=element.getAttribute('limit');bolShowAll=false;}else if(element.old_offset&&element.old_limit){intOffset=parseInt(element.old_offset,10);intLimit=parseInt(element.old_limit,10);fromValue=intOffset;toValue=intOffset+intLimit;bolShowAll=true;}else if(element.old_limit){fromValue='0';toValue=element.old_limit;bolShowAll=true;}else{fromValue='0';toValue=element.lastSuccessData.row_count;bolShowAll=true;}
templateElement.innerHTML=ml(function(){/*
                    <gs-page>
                        <gs-header><center><h3>Limit</h3></center></gs-header>
                        <gs-body padded gs-dynamic>
                            <gs-optionbox id="limit-dialog-choice" value="{{OPTION}}" gs-dynamic>
                                <gs-option value="range" gs-dynamic>
                                    Show Range:
                                    <div flex-horizontal gs-dynamic>
                                        <b gs-dynamic>    From: </b>
                                        <gs-text id="limit-dialog-from" value="{{FROM}}" flex mini {{DISABLE}} gs-dynamic></gs-text>
                                    </div>
                                    <div flex-horizontal gs-dynamic>
                                        <b gs-dynamic>    To:   </b>
                                        <gs-text id="limit-dialog-to" value="{{TO}}" flex mini {{DISABLE}} gs-dynamic></gs-text>
                                    </div>
                                </gs-option>
                                <gs-option value="all" gs-dynamic>Show All</gs-option>
                            </gs-optionbox>
                        </gs-body>
                        <gs-footer>
                            <gs-grid>
                                <gs-block><gs-button dialogclose>Cancel</gs-button></gs-block>
                                <gs-block><gs-button dialogclose listen-for-return emphasis>Ok</gs-button></gs-block>
                            </gs-grid>
                        </gs-footer>
                    </gs-page>
                */}).replace('{{OPTION}}',(bolShowAll===true?'all':'range')).replace(/\{\{DISABLE\}\}/gim,(bolShowAll===true?'disabled':'')).replace('{{FROM}}',fromValue).replace('{{TO}}',toValue);GS.openDialog(templateElement,function(){var choiceElement,showAllElement,fromElement,toElement,intLimit,intOffset,bolShowAll,fromValue,toValue;choiceElement=document.getElementById('limit-dialog-choice');fromElement=document.getElementById('limit-dialog-from');toElement=document.getElementById('limit-dialog-to');choiceElement.addEventListener('change',function(event){if(this.value==='all'){fromElement.setAttribute('disabled','');toElement.setAttribute('disabled','');}else{fromElement.removeAttribute('disabled');toElement.removeAttribute('disabled');}});},function(event,strAnswer){var dialog=this,choiceElement,showAllElement,fromElement,toElement,intLimit,intOffset;if(strAnswer==='Ok'){choiceElement=document.getElementById('limit-dialog-choice');showAllElement=document.getElementById('limit-dialog-show-all');fromElement=document.getElementById('limit-dialog-from');toElement=document.getElementById('limit-dialog-to');if(choiceElement.value==='all'){if(element.getAttribute('limit')){element.old_limit=element.getAttribute('limit');element.removeAttribute('limit');}
if(element.getAttribute('offset')){element.old_offset=element.getAttribute('offset');element.removeAttribute('offset');}}else{if(fromElement.value){element.setAttribute('offset',fromElement.value);}
if(toElement.value){element.setAttribute('limit',parseInt(toElement.value,10)-parseInt(fromElement.value,10));}}
getData(element);}});});}}
function handleClipboardData(event,strCopyString){var clipboardData=event.clipboardData||window.clipboardData,strMime;if(!clipboardData){return;}
if(!clipboardData.setData){return;}
if(window.clipboardData&&window.clipboardData.getData){strMime='Text';}else if(event.clipboardData&&event.clipboardData.getData){strMime='text/plain';}
if(strCopyString){return clipboardData.setData(strMime,strCopyString)!==false;}else{return clipboardData.getData(strMime);}}
function dataTemplateRecords(element,data,intStartRecordNumber,intNumberOfRecords){var tableTemplateElement,tbodyElement,strID,arrTemplates,i,len,jsnTemplates,strRet;tableTemplateElement=document.createElement('template');tableTemplateElement.innerHTML=element.tableTemplate;tbodyElement=xtag.query(tableTemplateElement.content,'tbody')[0];i=0;arrTemplates=xtag.query(tbodyElement,'template');jsnTemplates={};while(arrTemplates.length>0&&i<100){if(arrTemplates[0].parentNode.hasAttribute('src')||arrTemplates[0].parentNode.hasAttribute('source')){strID='UNIqUE_PLaCEhOLDER-'+GS.GUID()+'-UNiQUE_PLaCEhOLdER';jsnTemplates[strID]=arrTemplates[0].outerHTML;arrTemplates[0].outerHTML=strID;}else{arrTemplates.push.apply(arrTemplates,xtag.query(arrTemplates[0].content,'template'));}
arrTemplates.splice(0,1);i+=1;}
strRet=doT.template(ml(function(){/*
                    {{##def.snippet:
                        {{ var row, row_number, i, len, col_i, col_len, qs = jo.qs, intAddToRowNumber = 0;
                        
                        if (!isNaN(jo.i)) {
                            i = jo.i;
                            len = jo.len || jo.i + 1;
                            
                        } else {
                            i = 0;
                            len = jo.data.dat.length;
                        }
                        
                        for (; i < len; i += 1) {
                            row = {};
                            row_number = i + 1;
                            row.row_number = row_number;
                            
                            for (col_i = 0, col_len = jo.data.arr_column.length; col_i < col_len; col_i += 1) {
                                if (jo.data.dat[i][col_i] === undefined || jo.data.dat[i][col_i] === null) {
                                    row[jo.data.arr_column[col_i]] = '';
                                } else {
                                    row[jo.data.arr_column[col_i]] = jo.data.dat[i][col_i];
                                }
                            } }}{{# def.record }}
                        {{ } }}
                    #}}
                    {{#def.snippet}}*/ console.log;}),null,{"record":decodeHTML(tbodyElement.innerHTML)})({'data':data,'qs':GS.qryToJSON(GS.getQueryString()),'i':intStartRecordNumber,'len':intStartRecordNumber+intNumberOfRecords});for(strID in jsnTemplates){strRet=strRet.replace(new RegExp(strID,'g'),jsnTemplates[strID].replace(/\$/g,'$$$$'));}
return strRet;}
function queryStringTemplate(template){var strWrapperTemplate='{{##def.snippet:\n'+'    {{ var qs = jo; }} {{# def.template }}\n'+'#}}\n'+'{{#def.snippet}}';return doT.template(strWrapperTemplate,null,{'template':decodeHTML(template)})(GS.qryToJSON(GS.getQueryString())).trim();}
function getCellFromTarget(element){var currentElement=element;while(currentElement.nodeName!=='TD'&&currentElement.nodeName!=='TH'&&currentElement.nodeName!=='HTML'){currentElement=currentElement.parentNode;}
if(currentElement.nodeName!=='TD'&&currentElement.nodeName!=='TH'){return undefined;}
return currentElement;}
function pushReplacePopHandler(element){var i,len,arrPopKeys,bolRefresh=false,currentValue,strQueryString=GS.getQueryString();if(element.getAttribute('qs')){element.value=GS.qryGetVal(strQueryString,element.getAttribute('qs'));}
if(element.hasAttribute('refresh-on-querystring-values')){arrPopKeys=element.getAttribute('refresh-on-querystring-values').split(',');for(i=0,len=arrPopKeys.length;i<len;i+=1){currentValue=GS.qryGetVal(strQueryString,arrPopKeys[i]);if(element.popValues[arrPopKeys[i]]!==currentValue){bolRefresh=true;}
element.popValues[arrPopKeys[i]]=currentValue;}}else if(element.hasAttribute('refresh-on-querystring-change')){bolRefresh=true;}
if(bolRefresh){element.refresh();}}
function elementCreated(element){if(!element.hasAttribute('suspend-created')){}}
function elementInserted(element){var hudTemplateElement,tableTemplateElement,tableTemplateElementCopy,insertTemplateElement,recordElement,divElement,oldRootElement,i,len,arrElement,arrColumnElement,arrTemplates,arrWhereColumns,strQueryString=GS.getQueryString(),currentElement,strQSValue;if(!element.hasAttribute('suspend-created')&&!element.hasAttribute('suspend-inserted')){if(!element.inserted){element.inserted=true;if(element.getAttribute('qs')||element.getAttribute('refresh-on-querystring-values')||element.hasAttribute('refresh-on-querystring-change')){element.popValues={};strQSValue=GS.qryGetVal(strQueryString,element.getAttribute('qs'));if(strQSValue!==''||!element.getAttribute('value')){element.setAttribute('value',strQSValue);}
window.addEventListener('pushstate',function(){pushReplacePopHandler(element);});window.addEventListener('replacestate',function(){pushReplacePopHandler(element);});window.addEventListener('popstate',function(){pushReplacePopHandler(element);});}
if(element.getAttribute('primary-keys')){arrWhereColumns=element.getAttribute('primary-keys').split(/\s*,\s*/gim);if(arrWhereColumns.length===0){arrWhereColumns=['id','change_stamp'];}}else{arrWhereColumns=['id','change_stamp'];}
element.arrWhereColumns=arrWhereColumns;element.user_order_bys={'columns':[],'directions':[]};oldRootElement=xtag.queryChildren(element,'.root');if(oldRootElement.length>0){for(i=0,len=oldRootElement.length;i<len;i+=1){element.removeChild(oldRootElement[i]);}}
hudTemplateElement=xtag.queryChildren(element,'template[for="hud"]')[0];tableTemplateElement=xtag.queryChildren(element,'template[for="table"]')[0];insertTemplateElement=xtag.queryChildren(element,'template[for="insert"]')[0];if(hudTemplateElement){element.hudTemplate=hudTemplateElement.innerHTML;}
if(tableTemplateElement){tableTemplateElementCopy=document.createElement('template');tableTemplateElementCopy.innerHTML=tableTemplateElement.innerHTML;recordElement=xtag.query(xtag.query(tableTemplateElementCopy.content,'tbody')[0],'tr')[0];if(recordElement){for(i=0,len=element.arrWhereColumns.length;i<len;i+=1){recordElement.setAttribute('data-'+element.arrWhereColumns[i],'{{! row.'+element.arrWhereColumns[i]+' }}');}
arrColumnElement=xtag.query(recordElement,'[column]');i=0;arrTemplates=xtag.query(tableTemplateElementCopy.content,'template');for(i=arrTemplates.length-1;i>=0;i-=1){if(arrTemplates[i].parentNode.hasAttribute&&(arrTemplates[i].parentNode.hasAttribute('src')||arrTemplates[i].parentNode.hasAttribute('source'))){arrTemplates.splice(i,1);}}
while(arrTemplates.length>0&&i<100){arrColumnElement.push.apply(arrColumnElement,xtag.query(arrTemplates[0].content,'[column]'));arrTemplates.push.apply(arrTemplates,xtag.query(arrTemplates[0].content,'*:not([source]) > template'));for(i=arrTemplates.length-1;i>=0;i-=1){if(arrTemplates[i].parentNode.hasAttribute&&(arrTemplates[i].parentNode.hasAttribute('src')||arrTemplates[i].parentNode.hasAttribute('source'))){arrTemplates.splice(i,1);}}
arrTemplates.splice(0,1);i+=1;}
for(i=0,len=arrColumnElement.length;i<len;i+=1){currentElement=arrColumnElement[i];if((!currentElement.getAttribute('value'))&&currentElement.getAttribute('column')){currentElement.setAttribute('value','{{! row.'+currentElement.getAttribute('column')+' }}');}}
element.tableTemplate=tableTemplateElementCopy.innerHTML;}}else{throw'Envelope error: table template is required.';}
if(insertTemplateElement){element.insertTemplate=insertTemplateElement.innerHTML;}
element.innerHTML='';divElement=document.createElement('div');divElement.classList.add('root');divElement.setAttribute('flex-fill','');divElement.setAttribute('flex-vertical','');divElement.setAttribute('gs-dynamic','');element.appendChild(divElement);element.root=divElement;element.root.innerHTML='<div class="hud-container-top" gs-dynamic></div>'+'<div class="fixed-header-container" gs-dynamic></div>'+'<div class="scroll-container" flex gs-dynamic></div>'+'<div class="hud-container-bottom" flex-horizontal gs-dynamic></div>'+'<input class="gs-envelope-copy-focus-target" value="Firefox compatibility input" gs-dynamic />';element.hudTopElement=xtag.queryChildren(element.root,'.hud-container-top')[0];element.fixedHeaderContainerElement=xtag.queryChildren(element.root,'.fixed-header-container')[0];element.scrollContainerElement=xtag.queryChildren(element.root,'.scroll-container')[0];element.hudBottomElement=xtag.queryChildren(element.root,'.hud-container-bottom')[0];element.copyFocusTargetElement=xtag.queryChildren(element.root,'.gs-envelope-copy-focus-target')[0];element.addEventListener('focus',function(event){if(document.activeElement===element){element.copyFocusTargetElement.focus();GS.setInputSelection(element.copyFocusTargetElement,0,'firefox...'.length);}});element.scrollContainerElement.addEventListener('change',function(event){var newValue,parentTr;if(event.target.getAttribute('column')){if(event.target.value!==null){newValue=event.target.value;}else{newValue=event.target.checked;}
parentTr=GS.findParentTag(event.target,'tr');if(parentTr.parentNode.parentNode.parentNode===element.scrollContainerElement){updateRecord(element,parentTr,event.target.getAttribute('column'),newValue);}}});if(!evt.touchDevice){element.addEventListener(evt.mousedown,function(event){var target=event.target,cellFromTarget=getCellFromTarget(target),closestCell,arrSelectedCells,i,len;if(GS.findParentTag(event.target,'table')||target.classList.contains('fixed-header-cell')){if(cellFromTarget){closestCell=cellFromTarget;}else if(target.classList.contains('fixed-header-cell')){closestCell=element.theadElement.children[0].children[xtag.toArray(target.parentNode.children).indexOf(target)];}
if(closestCell){element.dragAllowed=true;element.dragCurrentCell=closestCell;element.selectionSelectedCells=[];if(event.shiftKey&&element.selectionPreviousOrigin){if(element.selectionPreviousSelectedCells){arrSelectedCells=element.selectedCells;for(i=0,len=element.selectionPreviousSelectedCells.length;i<len;i+=1){arrSelectedCells.splice(arrSelectedCells.indexOf(element.selectionPreviousSelectedCells[i]),1);}
element.selectedCells=arrSelectedCells;}
element.dragOrigin=element.selectionPreviousOrigin;element.dragMode='select';}else if(!event.shiftKey&&(event.metaKey||event.ctrlKey)&&!closestCell.hasAttribute('selected')){element.dragOrigin=closestCell;element.dragMode='select';}else if(!event.shiftKey&&(event.metaKey||event.ctrlKey)&&closestCell.hasAttribute('selected')){element.dragOrigin=closestCell;element.dragMode='deselect';}else{element.selectedCells=[];element.dragOrigin=closestCell;element.dragMode='select';}
selectHandler(element,element.dragOrigin,element.dragCurrentCell,element.dragMode);}}});element.addEventListener(evt.mousemove,function(event){var target,closestCell,cellFromTarget;if(event.which!==0){target=event.target;cellFromTarget=getCellFromTarget(target);if(cellFromTarget){closestCell=cellFromTarget;}else if(target.classList.contains('fixed-header-cell')){closestCell=element.theadElement.children[0].children[xtag.toArray(target.parentNode.children).indexOf(target)];}
if(closestCell&&element.dragAllowed&&element.dragCurrentCell!==closestCell){element.dragCurrentCell=getCellFromTarget(closestCell);selectHandler(element,element.dragOrigin,element.dragCurrentCell,element.dragMode);}}else{element.dragAllowed=false;element.selectionPreviousOrigin=element.dragOrigin;element.selectionPreviousSelectedCells=element.selectionSelectedCells;}});element.addEventListener(evt.mouseup,function(event){element.dragAllowed=false;if(element.dragMode==='select'){element.selectionPreviousOrigin=element.dragOrigin;element.selectionPreviousSelectedCells=element.selectionSelectedCells;}});}else{element.root.addEventListener(evt.mousedown,function(event){if(event.target.nodeName==='TD'||event.target.nodeName==='TH'||getCellFromTarget(event.target)){element.selectedCells=[];if(GS.findParentTag(event.target,'tr')){element.selectedCells=GS.findParentTag(event.target,'tr').children;}}});}
window.addEventListener('resize',function(){element.refreshFixedHeader();element.refreshHeight();element.refreshReflow();});window.addEventListener('orientationchange',function(){element.refreshFixedHeader();element.refreshHeight();element.refreshReflow();});element.addEventListener('size-changed',function(event){element.refreshFixedHeader();element.refreshHeight();});element.addEventListener('keydown',function(event){var target=event.target,intKeyCode=event.which||event.keyCode,jsnSelection,bolCursorElement,i,len,focusElement,tbodyElement,recordElement,cellElement,cellElements,tempElement;if(target!==element){bolCursorElement=target.nodeName==='INPUT'||target.nodeName==='TEXTAREA';if(bolCursorElement){jsnSelection=GS.getInputSelection(target);}else{jsnSelection={};}
if(intKeyCode===38){cellElement=getCellFromTarget(target);recordElement=cellElement.parentNode;tbodyElement=recordElement.parentNode;if(recordElement.rowIndex>1){recordElement=tbodyElement.children[recordElement.rowIndex-2];focusElement=xtag.query(recordElement.children[cellElement.cellIndex],'[column]')[0];}}else if(intKeyCode===40){cellElement=getCellFromTarget(target);recordElement=cellElement.parentNode;tbodyElement=recordElement.parentNode;if(recordElement.rowIndex<tbodyElement.children.length){recordElement=tbodyElement.children[recordElement.rowIndex];focusElement=xtag.query(recordElement.children[cellElement.cellIndex],'[column]')[0];}}else if(intKeyCode===37||intKeyCode===39){if(intKeyCode===37&&(bolCursorElement===false||jsnSelection.start===0)){cellElement=getCellFromTarget(target);recordElement=cellElement.parentNode;tbodyElement=recordElement.parentNode;cellElements=xtag.query(tbodyElement,'tr > td, tr > th');for(i=cellElements.indexOf(cellElement)-1;i>-1;i-=1){tempElement=xtag.query(cellElements[i],'[column]')[0];if(tempElement&&GS.isElementFocusable(tempElement)){focusElement=tempElement;break;}}}else if(intKeyCode===39&&(bolCursorElement===false||jsnSelection.end===target.value.length)){cellElement=getCellFromTarget(target);recordElement=cellElement.parentNode;tbodyElement=recordElement.parentNode;cellElements=xtag.query(tbodyElement,'tr > td, tr > th');for(i=cellElements.indexOf(cellElement)+1,len=cellElements.length;i<len;i+=1){tempElement=xtag.query(cellElements[i],'[column]')[0];if(tempElement&&GS.isElementFocusable(tempElement)){focusElement=tempElement;break;}}}}
if(focusElement&&GS.isElementFocusable(focusElement)){event.preventDefault();focusElement.focus();if(document.activeElement.nodeName==='INPUT'||document.activeElement.nodeName==='TEXTAREA'){GS.setInputSelection(document.activeElement,0,document.activeElement.value.length);}
element.selectedRecords=GS.findParentTag(focusElement,'TR');}}});element.tabIndex=0;document.body.addEventListener('copy',function(event){var elementClosestEnvelope=GS.findParentTag(document.activeElement,'gs-envelope'),strCopyString,i,len,cell_i,cell_len,arrSelected,intFromRecord=9999999,intFromCell=9999999,intToRecord=0,intToCell=0,strCellText,arrRecords,arrCells,strRecordString;if(elementClosestEnvelope===element&&(document.activeElement.classList.contains('gs-envelope-copy-focus-target')||document.activeElement.selectionStart===document.activeElement.selectionEnd)){arrSelected=element.selectedCells;if(arrSelected.length>0){for(i=0,len=arrSelected.length;i<len;i+=1){if(arrSelected[i].parentNode.rowIndex<intFromRecord){intFromRecord=arrSelected[i].parentNode.rowIndex;}
if(arrSelected[i].cellIndex<intFromCell){intFromCell=arrSelected[i].cellIndex;}
if(arrSelected[i].parentNode.rowIndex+1>intToRecord){intToRecord=arrSelected[i].parentNode.rowIndex+1;}
if(arrSelected[i].cellIndex+1>intToCell){intToCell=arrSelected[i].cellIndex+1;}}
arrRecords=xtag.query(element.scrollContainerElement,'tr');strCopyString='';for(i=intFromRecord,len=intToRecord;i<len;i+=1){arrCells=arrRecords[i].children;for(cell_i=intFromCell,cell_len=intToCell,strRecordString='';cell_i<cell_len;cell_i+=1){if(arrCells[cell_i].hasAttribute('selected')){if(arrCells[cell_i].lastElementChild){strCellText=arrCells[cell_i].lastElementChild.textValue||arrCells[cell_i].lastElementChild.value||(arrCells[cell_i].lastElementChild.checked||'').toString();}else{strCellText=arrCells[cell_i].textContent.trim();}}else{strCellText='';}
strRecordString+=(cell_i!==intFromCell?'\t':'')+(strCellText||'');}
if(strRecordString.trim()){strCopyString+=strRecordString;}
if(i+1!==len&&strRecordString.trim()){strCopyString+='\n';}}}
if(strCopyString){if(handleClipboardData(event,strCopyString)){event.preventDefault(event);}}}});refreshHud(element);getData(element);}}}
xtag.register('gs-envelope',{lifecycle:{created:function(){elementCreated(this);},inserted:function(){elementInserted(this);},attributeChanged:function(strAttrName,oldValue,newValue){if(strAttrName==='suspend-created'&&newValue===null){elementCreated(this);elementInserted(this);}else if(strAttrName==='suspend-inserted'&&newValue===null){elementInserted(this);}else if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){if(strAttrName==='no-hudlimit'||strAttrName==='no-hudorderby'||strAttrName==='no-huddelete'||strAttrName==='no-hudrefresh'){refreshHud(this);}else if(strAttrName==='value'&&this.root){this.refresh();}}}},events:{},accessors:{value:{get:function(){return this.getAttribute('value');},set:function(newValue){this.setAttribute('value',newValue);getData(this);}},selectedCells:{get:function(){return xtag.query(this.scrollContainerElement,'[selected]');},set:function(newValue){var i,len,intIdIndex,arrCells=xtag.query(this.scrollContainerElement,'[selected]'),arrRecords,cell_i,cell_len,fixedHeaderCells=xtag.queryChildren(this.fixedHeaderContainerElement,'.fixed-header-cell');for(i=0,len=fixedHeaderCells.length;i<len;i+=1){fixedHeaderCells[i].removeAttribute('selected');}
for(i=0,len=arrCells.length;i<len;i+=1){arrCells[i].removeAttribute('selected');}
arrCells=xtag.query(this.scrollContainerElement,'[selected-secondary]');for(i=0,len=arrCells.length;i<len;i+=1){arrCells[i].removeAttribute('selected-secondary');}
if(typeof newValue==='object'&&newValue.length===undefined){arrCells=[newValue];}else{arrCells=newValue;}
for(i=0,len=arrCells.length;i<len;i+=1){arrCells[i].setAttribute('selected','');if(arrCells[i].parentNode.parentNode.nodeName==='THEAD'){fixedHeaderCells[arrCells[i].cellIndex].setAttribute('selected','');}}
arrRecords=this.selectedRecords;for(i=0,len=arrRecords.length;i<len;i+=1){arrCells=arrRecords[i].children;for(cell_i=0,cell_len=arrCells.length;cell_i<cell_len;cell_i+=1){if(!arrCells[cell_i].hasAttribute('selected')){arrCells[cell_i].setAttribute('selected-secondary','');}}}
GS.triggerEvent(this,'after_selection');}},selectedRecords:{get:function(){var i,len,intRecordIndex=-1,arrRecord=[],selected=this.selectedCells;for(i=0,len=selected.length;i<len;i+=1){if(selected[i].parentNode.rowIndex>intRecordIndex&&selected[i].parentNode.parentNode.nodeName!=='THEAD'){intRecordIndex=selected[i].parentNode.rowIndex;arrRecord.push(selected[i].parentNode);}}
return arrRecord;},set:function(newValue){var i,len,cell_i,cell_len,intIdIndex,arrCells=this.selectedCells,arrRecords,arrCellChildren,fixedHeaderCells=xtag.queryChildren(this.fixedHeaderContainerElement,'.fixed-header-cell');for(i=0,len=arrCells.length;i<len;i+=1){arrCells[i].removeAttribute('selected');if(arrCells[i].parentNode.parentNode.nodeName==='THEAD'){fixedHeaderCells[arrCells[i].cellIndex].removeAttribute('selected','');}}
arrCells=xtag.query(this.scrollContainerElement,'[selected-secondary]');for(i=0,len=arrCells.length;i<len;i+=1){arrCells[i].removeAttribute('selected-secondary');}
if(typeof newValue==='object'&&newValue.length===undefined){arrRecords=[newValue];}else{arrRecords=newValue;}
for(i=0,len=arrRecords.length,arrCells=[];i<len;i+=1){arrCellChildren=arrRecords[i].children;for(cell_i=0,cell_len=arrCellChildren.length;cell_i<cell_len;cell_i+=1){arrCells.push(arrCellChildren[cell_i]);}}
this.selectedCells=arrCells;GS.triggerEvent(this,'after_selection');}},selectedIds:{get:function(){var i,len,arrID=[],selected=this.selectedRecords;for(i=0,len=selected.length;i<len;i+=1){arrID.push(String(selected[i].dataset.id));}
return arrID;},set:function(newValue){var i,len,cell_i,cell_len,arrCells=this.selectedCells,arrRecords=xtag.query(this.scrollContainerElement,'tbody > tr');for(i=0,len=arrCells.length;i<len;i+=1){arrCells[i].removeAttribute('selected');}
arrCells=xtag.query(this.scrollContainerElement,'[selected-secondary]');for(i=0,len=arrCells.length;i<len;i+=1){arrCells[i].removeAttribute('selected-secondary');}
if(typeof newValue!=='object'){newValue=[String(newValue)];}else{for(i=0,len=newValue.length;i<len;i+=1){newValue[i]=String(newValue[i]);}}
for(i=0,len=arrRecords.length;i<len;i+=1){if(newValue.indexOf(arrRecords[i].getAttribute('data-id'))>-1){arrCells=arrRecords[i].children;for(cell_i=0,cell_len=arrCells.length;cell_i<cell_len;cell_i+=1){arrCells[cell_i].setAttribute('selected','');}}}
GS.triggerEvent(this,'after_selection');}}},methods:{refresh:function(){getData(this);},refreshReflow:function(){var intEnvelopeWidth=this.scrollContainerElement.clientWidth+1,bolCurrentlyReflowed,intWindowWidth=window.innerWidth,intReflowAt=parseInt(this.getAttribute('reflow-at'),10);if(this.reflowBreakPoint===undefined){this.reflowBreakPoint=0;}
bolCurrentlyReflowed=this.classList.contains('reflow');this.classList.remove('reflow');if(intEnvelopeWidth<this.scrollContainerElement.scrollWidth||(!isNaN(intReflowAt)&&intEnvelopeWidth<intReflowAt)){if(!bolCurrentlyReflowed){this.selectedCells=[];}
this.reflowBreakPoint=intWindowWidth;this.classList.add('reflow');}else{if(bolCurrentlyReflowed){this.selectedCells=[];}
this.reflowBreakPoint=0;this.classList.remove('reflow');}},refreshFixedHeader:function(){var elementFixedHeaderCells=xtag.queryChildren(this.fixedHeaderContainerElement,'.fixed-header-cell'),theadCellElements,i,len,intLeft;if(this.theadElement&&GS.getStyle(this.theadElement,'display')!=='none'){this.fixedHeaderContainerElement.removeAttribute('hidden');theadCellElements=xtag.query(this.theadElement,'th, td');for(i=0,len=theadCellElements.length,intLeft=0;i<len;i+=1){elementFixedHeaderCells[i].style.height=(theadCellElements[i].offsetHeight+1)+'px';elementFixedHeaderCells[i].style.width=theadCellElements[i].offsetWidth+'px';elementFixedHeaderCells[i].style.left=(intLeft-this.scrollContainerElement.scrollLeft)+'px';intLeft+=theadCellElements[i].offsetWidth;}}else{this.fixedHeaderContainerElement.setAttribute('hidden','');}},refreshHeight:function(){var intHeight=0;if(this.hasAttribute('expand-to-content')){this.style.height='';intHeight+=this.hudTopElement.scrollHeight;intHeight+=this.fixedHeaderContainerElement.scrollHeight;intHeight+=this.scrollContainerElement.scrollHeight;intHeight+=this.hudBottomElement.scrollHeight;this.style.height=intHeight+'px';}}}});});window.addEventListener('design-register-element',function(){'use strict';registerDesignSnippet('<gs-footer>','<gs-footer>','gs-footer>$0</gs-footer>');designRegisterElement('gs-footer','/v1/dev/developer_g/greyspots-'+GS.version()+'/tools/documentation/doc-elem-page.html');window.designElementProperty_GSFOOTER=function(selectedElement){strVisibilityAttribute='';if(selectedElement.hasAttribute('hidden')){strVisibilityAttribute='hidden';}
if(selectedElement.hasAttribute('hide-on-desktop')){strVisibilityAttribute='hide-on-desktop';}
if(selectedElement.hasAttribute('hide-on-tablet')){strVisibilityAttribute='hide-on-tablet';}
if(selectedElement.hasAttribute('hide-on-phone')){strVisibilityAttribute='hide-on-phone';}
if(selectedElement.hasAttribute('show-on-desktop')){strVisibilityAttribute='show-on-desktop';}
if(selectedElement.hasAttribute('show-on-tablet')){strVisibilityAttribute='show-on-tablet';}
if(selectedElement.hasAttribute('show-on-phone')){strVisibilityAttribute='show-on-phone';}
addProp('Visibility',true,'<gs-select class="target" value="'+strVisibilityAttribute+'" mini>'+'<option value="">Visible</option>'+'<option value="hidden">Invisible</option>'+'<option value="hide-on-desktop">Invisible at desktop size</option>'+'<option value="hide-on-tablet">Invisible at tablet size</option>'+'<option value="hide-on-phone">Invisible at phone size</option>'+'<option value="show-on-desktop">Visible at desktop size</option>'+'<option value="show-on-tablet">Visible at tablet size</option>'+'<option value="show-on-phone">Visible at phone size</option>'+'</gs-select>',function(){selectedElement.removeAttribute('hidden');selectedElement.removeAttribute('hide-on-desktop');selectedElement.removeAttribute('hide-on-tablet');selectedElement.removeAttribute('hide-on-phone');selectedElement.removeAttribute('show-on-desktop');selectedElement.removeAttribute('show-on-tablet');selectedElement.removeAttribute('show-on-phone');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});addFlexContainerProps(selectedElement);};});document.addEventListener('DOMContentLoaded',function(){'use strict';xtag.register('gs-footer',{lifecycle:{},events:{},accessors:{},methods:{}});});window.addEventListener('design-register-element',function(){'use strict';registerDesignSnippet('<gs-form>','<gs-form>','gs-form src="${1:test.tpeople}">\n'+'    <template>\n'+'        ${2}\n'+'    </template>\n'+'</gs-form>');designRegisterElement('gs-form','/v1/dev/developer_g/greyspots-'+GS.version()+'/tools/documentation/doc-elem-form.html');window.designElementProperty_GSFORM=function(selectedElement){addProp('Source',true,'<gs-memo class="target" value="'+(decodeURIComponent(selectedElement.getAttribute('src')||selectedElement.getAttribute('source')||''))+'" mini></gs-memo>',function(){return setOrRemoveTextAttribute(selectedElement,'src',encodeURIComponent(this.value));});addProp('Columns',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('cols')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'cols',this.value);});addProp('Where',true,'<gs-text class="target" value="'+(decodeURIComponent(selectedElement.getAttribute('where')||''))+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'where',encodeURIComponent(this.value));});addProp('Column In Querystring',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('qs')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'qs',this.value,false);});addProp('Order By',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('ord')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'ord',this.value);});addProp('Limit',true,'<gs-number class="target" value="'+(selectedElement.getAttribute('limit')||'')+'" mini></gs-number>',function(){return setOrRemoveTextAttribute(selectedElement,'limit',this.value);});addProp('Offset',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('offset')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'offset',this.value);});addProp('Save&nbsp;While&nbsp;Typing',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('save-while-typing'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'save-while-typing',(this.value==='true'),true);});addProp('Suppress<br />"No&nbsp;Record&nbsp;Found"<br />Error',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suppress-no-record-found'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suppress-no-record-found',(this.value==='true'),true);});addProp('Title',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('title')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'title',this.value);});addProp('suspend-created',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-created')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-created',this.value==='true',true);});addProp('suspend-inserted',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-inserted')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-inserted',this.value==='true',true);});strVisibilityAttribute='';if(selectedElement.hasAttribute('hidden')){strVisibilityAttribute='hidden';}
if(selectedElement.hasAttribute('hide-on-desktop')){strVisibilityAttribute='hide-on-desktop';}
if(selectedElement.hasAttribute('hide-on-tablet')){strVisibilityAttribute='hide-on-tablet';}
if(selectedElement.hasAttribute('hide-on-phone')){strVisibilityAttribute='hide-on-phone';}
if(selectedElement.hasAttribute('show-on-desktop')){strVisibilityAttribute='show-on-desktop';}
if(selectedElement.hasAttribute('show-on-tablet')){strVisibilityAttribute='show-on-tablet';}
if(selectedElement.hasAttribute('show-on-phone')){strVisibilityAttribute='show-on-phone';}
addProp('Visibility',true,'<gs-select class="target" value="'+strVisibilityAttribute+'" mini>'+'<option value="">Visible</option>'+'<option value="hidden">Invisible</option>'+'<option value="hide-on-desktop">Invisible at desktop size</option>'+'<option value="hide-on-tablet">Invisible at tablet size</option>'+'<option value="hide-on-phone">Invisible at phone size</option>'+'<option value="show-on-desktop">Visible at desktop size</option>'+'<option value="show-on-tablet">Visible at tablet size</option>'+'<option value="show-on-phone">Visible at phone size</option>'+'</gs-select>',function(){selectedElement.removeAttribute('hidden');selectedElement.removeAttribute('hide-on-desktop');selectedElement.removeAttribute('hide-on-tablet');selectedElement.removeAttribute('hide-on-phone');selectedElement.removeAttribute('show-on-desktop');selectedElement.removeAttribute('show-on-tablet');selectedElement.removeAttribute('show-on-phone');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});addProp('Refresh On Querystring Columns',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('refresh-on-querystring-values')||'')+'" mini></gs-text>',function(){this.removeAttribute('refresh-on-querystring-change');return setOrRemoveTextAttribute(selectedElement,'refresh-on-querystring-values',this.value);});addProp('Refresh On Querystring Change',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('refresh-on-querystring-change'))+'" mini></gs-checkbox>',function(){this.removeAttribute('refresh-on-querystring-values');return setOrRemoveBooleanAttribute(selectedElement,'refresh-on-querystring-change',this.value==='true',true);});addFlexContainerProps(selectedElement);addFlexProps(selectedElement);};});document.addEventListener('DOMContentLoaded',function(){'use strict';function triggerAfterUpdate(element){GS.triggerEvent(element,'after_update');if(element.hasAttribute('afterupdate')){new Function(element.getAttribute('afterupdate')).apply(element);}}
function emergencyUpdate(element){if(element.currentSaveAjax){element.currentSaveAjax.abort();}
element.bolCurrentlySaving=false;updateDataWithoutTemplate(element,false);}
function updateData(element,updateElement,strColumn,newValue){var data,strLink,strSource=queryStringTemplate(decodeURIComponent(element.getAttribute('src')||element.getAttribute('source')||'')),parentRecordElement,strID;strLink='/v1/'+(element.getAttribute('action-update')||'env/action_update')+'?src='+encodeURIComponent(strSource);parentRecordElement=GS.findParentElement(updateElement,'.form-record[data-id]');strID=parentRecordElement.getAttribute('data-id');strLink+='&where='+encodeURIComponent('id='+strID+'&change_stamp='+parentRecordElement.getAttribute('data-change_stamp'))+'&column='+strColumn+'&value='+encodeURIComponent(newValue);GS.dataFetch(strLink,true);document.addEventListener('dataready_'+encodeURIComponent(strLink),function __THIS_FUNCTION__(event){var idIndex,i,len;if(!event.detail.error){idIndex=element.lastSuccessData.arr_column.indexOf('id');for(i=0,len=element.lastSuccessData.dat.length;i<len;i+=1){if(String(element.lastSuccessData.dat[i][idIndex])===strID){element.lastSuccessData.dat[i]=event.detail.response;break;}}
triggerAfterUpdate(element);handleData(element,element.lastSuccessData);}else{GS.ajaxErrorDialog(event.detail.response);}
document.removeEventListener('dataready_'+encodeURIComponent(strLink),__THIS_FUNCTION__);});}
function updateDataWithoutTemplate(element,bolErrorHandling){var data,strLink,strParameters,strSource,strUpdate,key,col_key,functionUpdateRecord,idIndex,i,len,strID,strColumn,newValue;if(element.bolCurrentlySaving===false){strSource=queryStringTemplate(decodeURIComponent(element.getAttribute('src')||element.getAttribute('source')||''));strLink='/v1/'+(element.getAttribute('action-update')||'env/action_update');functionUpdateRecord=function(strID,strColumn,recordIndex,strParameters){element.bolCurrentlySaving=true;element.jsnUpdate[strID][strColumn]=undefined;removeMessage(element,'waiting');addMessage(element,'saving');element.state='saving';element.currentSaveAjax=GS.ajaxJSON(strLink,strParameters,function(data,error){var col_key,key,bolSaveWaiting;removeMessage(element,'saving');element.state='saved';if(!error){element.lastSuccessData.dat[recordIndex]=data.dat;element.bolCurrentlySaving=false;for(key in element.jsnUpdate){for(col_key in element.jsnUpdate[key]){if(element.jsnUpdate[key][col_key]!==undefined){bolSaveWaiting=true;break;}}}
if(bolSaveWaiting){updateDataWithoutTemplate(element);}else{triggerAfterUpdate(element);}}else if(bolErrorHandling!==false){element.bolCurrentlySaving=false;element.bolSaveWaiting=false;GS.ajaxErrorDialog(data,function(){if(element.saveTimerID){clearTimeout(element.saveTimerID);}
functionUpdateRecord(strID,strColumn,recordIndex,strParameters);});}});};for(key in element.jsnUpdate){for(col_key in element.jsnUpdate[key]){if(element.jsnUpdate[key][col_key]!==undefined){strID=key;strColumn=col_key;newValue=element.jsnUpdate[key][col_key];idIndex=element.lastSuccessData.arr_column.indexOf('id');for(i=0,len=element.lastSuccessData.dat.length;i<len;i+=1){if(String(element.lastSuccessData.dat[i][idIndex])===strID){functionUpdateRecord(strID,strColumn,i,'src='+encodeURIComponent(strSource)+'&where='+encodeURIComponent('id='+strID+'&change_stamp='+GS.envGetCell(element.lastSuccessData,i,'change_stamp'))+'&column='+strColumn+'&value='+encodeURIComponent(newValue));break;}}
break;}}}}}
function getData(element){var data,strLink,strSource=queryStringTemplate(decodeURIComponent(element.getAttribute('src')||element.getAttribute('source')||'')),strCols=element.getAttribute('cols')||'';if(element.getAttribute('where')!=='false'){strLink='/v1/'+(element.getAttribute('action-select')||'env/action_select')+'?src='+encodeURIComponent(strSource);strLink+='&where='+encodeURIComponent(queryStringTemplate(decodeURIComponent(element.getAttribute('where')||'')))+'&limit='+encodeURIComponent(queryStringTemplate(decodeURIComponent(element.getAttribute('limit')||'1')))+'&offset='+encodeURIComponent(queryStringTemplate(decodeURIComponent(element.getAttribute('offset')||'')))+'&order_by='+encodeURIComponent(queryStringTemplate(decodeURIComponent(element.getAttribute('ord')||'')))+'&cols='+encodeURIComponent(strCols);GS.addLoader('refresh_'+encodeURIComponent(strLink));GS.dataFetch(strLink,true);document.addEventListener('dataready_'+encodeURIComponent(strLink),function __THIS_FUNCTION__(event){GS.removeLoader('refresh_'+encodeURIComponent(strLink));handleData(element,event.detail.response,event.detail.error,'load');document.removeEventListener('dataready_'+encodeURIComponent(strLink),__THIS_FUNCTION__);});}}
function handleData(element,data,error,strAction,failCallback){var arrElements,i,len,arrHeaders=[],intColumnElementFocusNumber,matchElement,templateElement=document.createElement('template');element.classList.remove('error');if(!error&&data.dat.length===0&&!element.hasAttribute('limit')&&!element.hasAttribute('suppress-no-record-found')){templateElement.setAttribute('data-theme','error');templateElement.innerHTML=ml(function(){/*
                <gs-page>
                    <gs-header><center><h3>Error</h3></center></gs-header>
                    <gs-body padded>
                        <center>No record found</center>
                    </gs-body>
                    <gs-footer>
                        <gs-grid>
                            <gs-block><gs-button dialogclose>Cancel</gs-button></gs-block>
                            <gs-block><gs-button dialogclose listen-for-return emphasis>Try Again</gs-button></gs-block>
                        </gs-grid>
                    </gs-footer>
                </gs-page>
            */});GS.openDialog(templateElement,'',function(event,strAnswer){if(strAnswer==='Try Again'){element.refresh();}});}
if(!error){element.error=false;element.lastSuccessData=data;if(GS.findParentElement(document.activeElement,'gs-form')===element){arrElements=xtag.query(element,'[column]');matchElement=GS.findParentElement(document.activeElement,'[column]');if(matchElement){for(i=0,len=arrElements.length;i<len;i+=1){if(arrElements[i]===matchElement){intColumnElementFocusNumber=i;break;}}}}
element.innerHTML=dataTemplateRecords(element,data);if(shimmed.HTMLTemplateElement){HTMLTemplateElement.bootstrap(element);}
arrElements=xtag.query(element,'[autofocus]');if(arrElements.length>0&&!evt.touchDevice){arrElements[0].focus();if(arrElements.length>1){console.warn('dialog Warning: Too many [autofocus] elements, defaulting to the first one. Please have only one [autofocus] element per form.');}}
if(intColumnElementFocusNumber){arrElements=xtag.query(element,'[column]');if(arrElements.length>intColumnElementFocusNumber){arrElements[intColumnElementFocusNumber].focus();}}
GS.triggerEvent(element,'after_select');}else{element.error=true;element.classList.add('error');element.innerHTML='This form encountered an error.'
GS.ajaxErrorDialog(data);}}
function dataTemplateRecords(element,data){var templateElement,strID,arrTemplates,i,len,jsnTemplates,strRet;templateElement=document.createElement('template');templateElement.innerHTML=element.templateHTML;i=0;arrTemplates=xtag.query(templateElement.content,'template');jsnTemplates={};while(arrTemplates.length>0&&i<100){if(arrTemplates[0].parentNode&&arrTemplates[0].parentNode.hasAttribute&&(arrTemplates[0].parentNode.hasAttribute('src')||arrTemplates[0].parentNode.hasAttribute('source'))){strID='UNIqUE_PLaCEhOLDER-'+GS.GUID()+'-UNiQUE_PLaCEhOLdER';jsnTemplates[strID]=arrTemplates[0].outerHTML;arrTemplates[0].outerHTML=strID;}else if(arrTemplates[0].content){arrTemplates.push.apply(arrTemplates,xtag.query(arrTemplates[0].content,'template'));}
arrTemplates.splice(0,1);i+=1;}
strRet=doT.template(ml(function(){/*
                    {{##def.snippet:
                        {{ var row = {}, row_i, row_len, col_i, col_len, qs = GS.qryToJSON(GS.getQueryString());
                        
                        for (row_i = 0, row_len = jo.data.dat.length; row_i < row_len; row_i += 1) {
                            for (col_i = 0, col_len = jo.data.arr_column.length; col_i < col_len; col_i += 1) {
                                if (jo.data.dat[row_i][col_i] === undefined || jo.data.dat[row_i][col_i] === null) {
                                    row[jo.data.arr_column[col_i]] = '';
                                } else {
                                    row[jo.data.arr_column[col_i]] = jo.data.dat[row_i][col_i];
                                }
                            } }}{{# def.record }}
                        {{ } }} 
                    #}}
                    {{#def.snippet}}*/ console.log}),null,{"record":'<div class="form-record" '+
(data.dat.length===1?'style="height: 100%;" ':'')+'data-id="{{! row.id }}" '+'data-change_stamp="{{! row.change_stamp }}" gs-dynamic>'+
decodeHTML(templateElement.innerHTML)+'</div>'})({'data':data});for(strID in jsnTemplates){strRet=strRet.replace(new RegExp(strID,'g'),jsnTemplates[strID].replace(/\$/g,'$$$$'));}
return strRet;}
function addMessage(element,strMessageName){if(strMessageName==='saving'){if(element.savingMessage){removeMessage(element,'saving');}
element.savingMessage=document.createElement('div');element.savingMessage.classList.add('message');element.savingMessage.innerHTML='Saving...';element.appendChild(element.savingMessage);}else if(strMessageName==='waiting'){if(element.waitingMessage){removeMessage(element,'waiting');}
element.waitingMessage=document.createElement('div');element.waitingMessage.classList.add('message');element.waitingMessage.innerHTML='Waiting<br />to save...';element.appendChild(element.waitingMessage);}}
function removeMessage(element,strMessageName){if(strMessageName==='saving'&&element.savingMessage){element.removeChild(element.savingMessage);element.savingMessage=undefined;}else if(strMessageName==='waiting'&&element.waitingMessage){element.removeChild(element.waitingMessage);element.waitingMessage=undefined;}}
function queryStringTemplate(template){var strWrapperTemplate='{{##def.snippet:\n'+'    {{ var qs = jo; }} {{# def.template }}\n'+'#}}\n'+'{{#def.snippet}}';return doT.template(strWrapperTemplate,null,{'template':template})(GS.qryToJSON(GS.getQueryString())).trim();}
function columnParentsUntilForm(form,element){var intColumnParents=0,currentElement=element,maxLoops=50,i=0;while(currentElement!==form&&currentElement.parentNode&&i<maxLoops){if(currentElement.parentNode.hasAttribute('column')===true){intColumnParents+=1;}
currentElement=currentElement.parentNode;i+=1;}
return intColumnParents;}
function pushReplacePopHandler(element){var i,len,arrPopKeys,bolRefresh=false,currentValue,strQueryString=GS.getQueryString();if(element.getAttribute('qs')){element.setAttribute('where','id='+GS.qryGetVal(strQueryString,element.getAttribute('qs')));bolRefresh=true;}else if(element.hasAttribute('refresh-on-querystring-values')){arrPopKeys=element.getAttribute('refresh-on-querystring-values').split(/\s*,\s*/gim);for(i=0,len=arrPopKeys.length;i<len;i+=1){currentValue=GS.qryGetVal(strQueryString,arrPopKeys[i]);if(element.popValues[arrPopKeys[i]]!==currentValue){bolRefresh=true;}
element.popValues[arrPopKeys[i]]=currentValue;}}else if(element.hasAttribute('refresh-on-querystring-change')){bolRefresh=true;}
if(bolRefresh){element.refresh();}}
function elementCreated(element){if(!element.hasAttribute('suspend-created')){}}
function elementInserted(element){if(!element.hasAttribute('suspend-created')&&!element.hasAttribute('suspend-inserted')){if(!element.inserted){element.inserted=true;var templateElement=document.createElement('template'),firstChildElement=element.children[0],arrElements,i,len,arrColumnElement,arrTemplates,strQueryString=GS.getQueryString(),changeHandler;if(element.hasAttribute('save-while-typing')){window.onbeforeunload=function(){if(element.bolCurrentlySaving){return'The page has not finished saving.';}};}
if(firstChildElement.nodeName==='TEMPLATE'){element.templateHTML=firstChildElement.innerHTML;}else{console.warn('Warning: gs-form is now built to use a template element. '+'Please use a template element to contain the template for this form. '+'A fix has been included so that it is not necessary to use the template element, but that code may be removed at a future date.');element.templateHTML=element.innerHTML;}
if(!element.templateHTML.trim()){throw'GS-FORM error: no template HTML.';}
templateElement.innerHTML=element.templateHTML;arrColumnElement=xtag.query(templateElement.content,'[column]');i=0;arrTemplates=xtag.query(templateElement.content,'template');for(i=arrTemplates.length-1;i>=0;i-=1){if(arrTemplates[i].parentNode.hasAttribute&&(arrTemplates[i].parentNode.hasAttribute('src')||arrTemplates[i].parentNode.hasAttribute('source'))){arrTemplates.splice(i,1);}}
while(arrTemplates.length>0&&i<100){arrColumnElement.push.apply(arrColumnElement,xtag.query(arrTemplates[0].content,'[column]'));arrTemplates.push.apply(arrTemplates,xtag.query(arrTemplates[0].content,'*:not([source]) > template'));for(i=arrTemplates.length-1;i>=0;i-=1){if(arrTemplates[i].parentNode.hasAttribute&&(arrTemplates[i].parentNode.hasAttribute('src')||arrTemplates[i].parentNode.hasAttribute('source'))){arrTemplates.splice(i,1);}}
arrTemplates.splice(0,1);i+=1;}
for(i=0,len=arrColumnElement.length;i<len;i+=1){if(!arrColumnElement[i].hasAttribute('value')){arrColumnElement[i].setAttribute('value','{{! row.'+arrColumnElement[i].getAttribute('column')+' }}');}}
element.templateHTML=templateElement.innerHTML;if(element.getAttribute('qs')||element.getAttribute('refresh-on-querystring-values')||element.hasAttribute('refresh-on-querystring-change')){element.popValues={};if(element.getAttribute('qs')){if(GS.qryGetVal(strQueryString,element.getAttribute('qs'))){element.setAttribute('where','id='+GS.qryGetVal(strQueryString,element.getAttribute('qs')));}else{element.setAttribute('where','false');}}
if(GS.getQueryString()||element.hasAttribute('refresh-on-querystring-change')){pushReplacePopHandler(element);}
window.addEventListener('pushstate',function(){pushReplacePopHandler(element);});window.addEventListener('replacestate',function(){pushReplacePopHandler(element);});window.addEventListener('popstate',function(){pushReplacePopHandler(element);});}else{getData(element);}
element.addEventListener('keydown',function(event){var intKeyCode=event.which||event.keyCode,jsnSelection;if(document.activeElement.nodeName==='INPUT'||document.activeElement.nodeName==='TEXTAREA'){jsnSelection=GS.getInputSelection(event.target);}
if((intKeyCode===37&&(!jsnSelection||jsnSelection.start===0))||(intKeyCode===39&&(!jsnSelection||jsnSelection.end===event.target.value.length))){var focusToElement,i,len,arrElementsFocusable,currentElement;if(intKeyCode===37&&(!jsnSelection||jsnSelection.start===0)){arrElementsFocusable=xtag.query(document,'input:not([disabled]), '+'select:not([disabled]), memo:not([disabled]), button:not([disabled]), '+'[tabindex]:not([disabled]), [column]');for(i=0,len=arrElementsFocusable.length;i<len;i++){currentElement=arrElementsFocusable[i];if(currentElement===event.target||((event.target.nodeName==='INPUT'||event.target.nodeName==='TEXTAREA')&&currentElement===event.target.parentNode)){if(i===0){focusToElement=currentElement;}else{focusToElement=arrElementsFocusable[i-1];}
break;}}}else if(intKeyCode===39&&(!jsnSelection||jsnSelection.end===event.target.value.length)){arrElementsFocusable=xtag.query(document,'input:not([disabled]), '+'select:not([disabled]), memo:not([disabled]), button:not([disabled]), '+'[tabindex]:not([disabled]), [column]');for(i=0,len=arrElementsFocusable.length;i<len;i++){currentElement=arrElementsFocusable[i];if(currentElement===event.target){if(i===len){focusToElement=currentElement;}else{focusToElement=arrElementsFocusable[i+1];}
break;}}}
if(focusToElement&&GS.isElementFocusable(focusToElement)){event.preventDefault();focusToElement.focus();if(document.activeElement.nodeName==='INPUT'||document.activeElement.nodeName==='TEXTAREA'){GS.setInputSelection(document.activeElement,0,document.activeElement.value.length);}}}});if(element.hasAttribute('save-while-typing')){element.bolCurrentlySaving=false;element.jsnUpdate={};element.state='saved';changeHandler=function(event){var intKeyCode=event.which||event.keyCode,newValue,targetColumnParent=GS.findParentElement(event.target,'[column]'),parentRecordElement,strID;if(targetColumnParent.getAttribute('column')&&columnParentsUntilForm(element,targetColumnParent)===0&&element.column(targetColumnParent.getAttribute('column'))!==targetColumnParent.value){if(element.saveTimerID){clearTimeout(element.saveTimerID);}
addMessage(element,'waiting');element.state='waiting to save';if(targetColumnParent.value!==null&&targetColumnParent.value!==null){newValue=targetColumnParent.value;}else{newValue=targetColumnParent.checked;}
parentRecordElement=GS.findParentElement(targetColumnParent,'.form-record[data-id]');strID=parentRecordElement.getAttribute('data-id');element.jsnUpdate[strID]=element.jsnUpdate[strID]={};element.jsnUpdate[strID][targetColumnParent.getAttribute('column')]=newValue;element.saveTimerID=setTimeout(function(){updateDataWithoutTemplate(element);element.saveTimerID=undefined;},300);}};element.addEventListener('keydown',changeHandler);element.addEventListener('keyup',changeHandler);element.addEventListener('change',changeHandler);}else{element.addEventListener('change',function(event){var newValue;if(event.target.getAttribute('column')&&columnParentsUntilForm(element,event.target)===0){if(event.target.value!==null){newValue=event.target.value;}else{newValue=event.target.checked;}
updateData(element,event.target,event.target.getAttribute('column'),newValue);}});}}}}
xtag.register('gs-form',{lifecycle:{created:function(){elementCreated(this);},inserted:function(){elementInserted(this);},attributeChanged:function(strAttrName,oldValue,newValue){if(strAttrName==='suspend-created'&&newValue===null){elementCreated(this);elementInserted(this);}else if(strAttrName==='suspend-inserted'&&newValue===null){elementInserted(this);}else if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){}},removed:function(){if(this.hasAttribute('save-while-typing')&&this.saveTimerID){clearTimeout(this.saveTimerID);emergencyUpdate(this);}}},events:{},accessors:{},methods:{refresh:function(){getData(this);},column:function(strColumn){return GS.envGetCell(this.lastSuccessData,0,strColumn);}}});});window.addEventListener('design-register-element',function(){'use strict';registerDesignSnippet('<gs-grid>','<gs-grid>','gs-grid widths="${1}">\n'+'    <gs-block>${2}</gs-block>\n'+'</gs-grid>');designRegisterElement('gs-grid','/v1/dev/developer_g/greyspots-'+GS.version()+'/tools/documentation/doc-elem-grid.html');window.designElementProperty_GSGRID=function(selectedElement){addProp('Widths',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('widths')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'widths',this.value);});addProp('Padded:',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('padded'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'padded',(this.value==='true'),true);});addProp('Reflow At',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('reflow-at')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'reflow-at',this.value);});addProp('Title',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('title')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'title',this.value);});addProp('suspend-created',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-created')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-created',this.value==='true',true);});addProp('suspend-inserted',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-inserted')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-inserted',this.value==='true',true);});strVisibilityAttribute='';if(selectedElement.hasAttribute('hidden')){strVisibilityAttribute='hidden';}
if(selectedElement.hasAttribute('hide-on-desktop')){strVisibilityAttribute='hide-on-desktop';}
if(selectedElement.hasAttribute('hide-on-tablet')){strVisibilityAttribute='hide-on-tablet';}
if(selectedElement.hasAttribute('hide-on-phone')){strVisibilityAttribute='hide-on-phone';}
if(selectedElement.hasAttribute('show-on-desktop')){strVisibilityAttribute='show-on-desktop';}
if(selectedElement.hasAttribute('show-on-tablet')){strVisibilityAttribute='show-on-tablet';}
if(selectedElement.hasAttribute('show-on-phone')){strVisibilityAttribute='show-on-phone';}
addProp('Visibility',true,'<gs-select class="target" value="'+strVisibilityAttribute+'" mini>'+'<option value="">Visible</option>'+'<option value="hidden">Invisible</option>'+'<option value="hide-on-desktop">Invisible at desktop size</option>'+'<option value="hide-on-tablet">Invisible at tablet size</option>'+'<option value="hide-on-phone">Invisible at phone size</option>'+'<option value="show-on-desktop">Visible at desktop size</option>'+'<option value="show-on-tablet">Visible at tablet size</option>'+'<option value="show-on-phone">Visible at phone size</option>'+'</gs-select>',function(){selectedElement.removeAttribute('hidden');selectedElement.removeAttribute('hide-on-desktop');selectedElement.removeAttribute('hide-on-tablet');selectedElement.removeAttribute('hide-on-phone');selectedElement.removeAttribute('show-on-desktop');selectedElement.removeAttribute('show-on-tablet');selectedElement.removeAttribute('show-on-phone');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});addFlexProps(selectedElement);};});window.addEventListener('design-register-element',function(){'use strict';registerDesignSnippet('<gs-block>','<gs-block>','gs-block>${2}</gs-block>');designRegisterElement('gs-block','/v1/dev/developer_g/greyspots-'+GS.version()+'/tools/documentation/doc-elem-grid.html');window.designElementProperty_GSBLOCK=function(selectedElement){addProp('Width:',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('width')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'width',this.value);});addProp('Title',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('title')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'title',this.value);});strVisibilityAttribute='';if(selectedElement.hasAttribute('hidden')){strVisibilityAttribute='hidden';}
if(selectedElement.hasAttribute('hide-on-desktop')){strVisibilityAttribute='hide-on-desktop';}
if(selectedElement.hasAttribute('hide-on-tablet')){strVisibilityAttribute='hide-on-tablet';}
if(selectedElement.hasAttribute('hide-on-phone')){strVisibilityAttribute='hide-on-phone';}
if(selectedElement.hasAttribute('show-on-desktop')){strVisibilityAttribute='show-on-desktop';}
if(selectedElement.hasAttribute('show-on-tablet')){strVisibilityAttribute='show-on-tablet';}
if(selectedElement.hasAttribute('show-on-phone')){strVisibilityAttribute='show-on-phone';}
addProp('Visibility',true,'<gs-select class="target" value="'+strVisibilityAttribute+'" mini>'+'<option value="">Visible</option>'+'<option value="hidden">Invisible</option>'+'<option value="hide-on-desktop">Invisible at desktop size</option>'+'<option value="hide-on-tablet">Invisible at tablet size</option>'+'<option value="hide-on-phone">Invisible at phone size</option>'+'<option value="show-on-desktop">Visible at desktop size</option>'+'<option value="show-on-tablet">Visible at tablet size</option>'+'<option value="show-on-phone">Visible at phone size</option>'+'</gs-select>',function(){selectedElement.removeAttribute('hidden');selectedElement.removeAttribute('hide-on-desktop');selectedElement.removeAttribute('hide-on-tablet');selectedElement.removeAttribute('hide-on-phone');selectedElement.removeAttribute('show-on-desktop');selectedElement.removeAttribute('show-on-tablet');selectedElement.removeAttribute('show-on-phone');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});addFlexContainerProps(selectedElement);};});document.addEventListener('DOMContentLoaded',function(){'use strict';function handleObserver(element){var observer=new MutationObserver(function(mutations){element.handleColumnCSS();});observer.observe(element,{childList:true});}
function elementCreated(element){if(!element.hasAttribute('suspend-created')){handleObserver(element);}}
function elementInserted(element){if(!element.hasAttribute('suspend-created')&&!element.hasAttribute('suspend-inserted')){if(!element.inserted){element.inserted=true;element.handleColumnCSS();element.handleReflowCSS();}}}
xtag.register('gs-grid',{lifecycle:{created:function(){elementCreated(this);},inserted:function(){elementInserted(this);},attributeChanged:function(strAttrName,oldValue,newValue){if(strAttrName==='suspend-created'&&newValue===null){elementCreated(this);elementInserted(this);}else if(strAttrName==='suspend-inserted'&&newValue===null){elementInserted(this);}else if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){if(strAttrName==='widths'){this.calculatedWidths=!newValue;this.clearColumnCSS();this.handleColumnCSS();}else if(strAttrName==='reflow-at'){this.clearReflowCSS();this.handleReflowCSS();}}}},events:{},accessors:{},methods:{handleColumnCSS:function(){var styleElement=document.getElementById('gs-grid-dynamic-css'),i,len,arrWidths,intGridWidth;if(!styleElement){styleElement=document.createElement('style');styleElement.setAttribute('id','gs-grid-dynamic-css');styleElement.setAttribute('gs-dynamic','');document.head.appendChild(styleElement);}
if(!this.hasAttribute('widths')||this.calculatedWidths){this.calculatedWidths=true;this.setAttribute('widths',new Array(xtag.queryChildren(this,'gs-block').length+1).join('1').split('').join(','));}
arrWidths=this.getAttribute('widths').replace(/[^0-9,]/gim,'').replace(/,{1,}/gim,',').replace(/^,|,$/gim,'').split(',');if(arrWidths.length===0){throw'gs-grid Error: no valid widths found. Please put a comma seperated list of widths in the "widths" attribute.';}
for(i=0,len=arrWidths.length;i<len;i+=1){arrWidths[i]=parseInt(arrWidths[i],10);}
for(i=0,len=arrWidths.length,intGridWidth=0;i<len;i+=1){intGridWidth+=arrWidths[i];}
if(!styleElement.classList.contains('col-'+intGridWidth)){this.appendColumnCSS(this.generateColumnCSS(arrWidths,intGridWidth),intGridWidth);}
this.applyColumnCSS(arrWidths,intGridWidth);this.intGridWidth=intGridWidth;},generateColumnCSS:function(arrWidths,intGridWidth){var i,len,strCurrentWidth,intCurrentWidth,widthIncreaseAmount,strCSS;widthIncreaseAmount=100/intGridWidth;for(i=0,len=intGridWidth,intCurrentWidth=0,strCSS='';i<len;i+=1){intCurrentWidth+=widthIncreaseAmount;strCurrentWidth=String(parseFloat(intCurrentWidth.toFixed(5).toString(),10));strCSS+='gs-grid.width-'+intGridWidth+' gs-block[width="'+(i+1)+'"] { width: '+strCurrentWidth+'%; }\n';}
return strCSS;},appendColumnCSS:function(strCSS,intGridWidth){var styleElement=document.getElementById('gs-grid-dynamic-css');styleElement.classList.add('col-'+intGridWidth);styleElement.innerHTML+='\n/* grid width: '+intGridWidth+' */\n'+strCSS;},applyColumnCSS:function(arrWidths,intGridWidth){var i,len,unset_i,arrElements,intNumberOfWidths=arrWidths.length,intCurrentRowWidth=0;arrElements=xtag.queryChildren(this,'gs-block');for(i=0,unset_i=0,len=arrElements.length;i<len;i+=1){if(intCurrentRowWidth===0){arrElements[i].style.clear='left';}
if(!arrElements[i].hasAttribute('width')){arrElements[i].setAttribute('width',arrWidths[unset_i%intNumberOfWidths]);unset_i+=1;}else{arrElements[i].initallySet=true;}
intCurrentRowWidth+=parseInt(arrElements[i].getAttribute('width'),10)||arrWidths[i%intNumberOfWidths];intCurrentRowWidth=intCurrentRowWidth%intGridWidth;}
this.classList.add('width-'+intGridWidth);},clearColumnCSS:function(){var i,len,arrElements;arrElements=xtag.queryChildren(this,'gs-block');for(i=0,len=arrElements.length;i<len;i+=1){if(!arrElements[i].initallySet){arrElements[i].removeAttribute('width');}}
this.classList.remove('width-'+this.intGridWidth);},clearReflowCSS:function(){this.classList.remove('reflow-'+this.strReflowAt);},handleReflowCSS:function(){var styleElement=document.getElementById('gs-grid-dynamic-css'),strReflowAt=this.getAttribute('reflow-at')||'';strReflowAt=strReflowAt.replace(/[^0-9a-z]/gi,'');if(strReflowAt){if(strReflowAt.replace(/[0-9]/gi,'')===''){strReflowAt+='px';}
this.classList.add('reflow-'+strReflowAt);this.strReflowAt=strReflowAt;if(!styleElement.classList.contains('reflow-'+strReflowAt)){styleElement.classList.add('reflow-'+strReflowAt);styleElement.innerHTML+='\n/* grid reflow width: '+strReflowAt+' */\n'+'@media only screen and (max-width: '+strReflowAt+') {\n'+'    gs-grid.reflow-'+strReflowAt+'            { width: 100%; }\n'+'    gs-grid.reflow-'+strReflowAt+' > gs-block { width: auto !important; float: none; }\n'+'}\n';}}}}});xtag.register('gs-block',{lifecycle:{},events:{},accessors:{},methods:{}});});window.addEventListener('design-register-element',function(){registerDesignSnippet('Centered Header','<gs-header>','<gs-header><center><h3>$0</h3></center></gs-header>');registerDesignSnippet('Header','<gs-header>','<gs-header><h3>$0</h3></gs-header>');registerDesignSnippet('<gs-header>','<gs-header>','gs-header><h3>$0</h3></gs-header>');designRegisterElement('gs-header','/v1/dev/developer_g/greyspots-'+GS.version()+'/tools/documentation/doc-elem-page.html');window.designElementProperty_GSHEADER=function(selectedElement){addProp('Title',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('title')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'title',this.value);});strVisibilityAttribute='';if(selectedElement.hasAttribute('hidden')){strVisibilityAttribute='hidden';}
if(selectedElement.hasAttribute('hide-on-desktop')){strVisibilityAttribute='hide-on-desktop';}
if(selectedElement.hasAttribute('hide-on-tablet')){strVisibilityAttribute='hide-on-tablet';}
if(selectedElement.hasAttribute('hide-on-phone')){strVisibilityAttribute='hide-on-phone';}
if(selectedElement.hasAttribute('show-on-desktop')){strVisibilityAttribute='show-on-desktop';}
if(selectedElement.hasAttribute('show-on-tablet')){strVisibilityAttribute='show-on-tablet';}
if(selectedElement.hasAttribute('show-on-phone')){strVisibilityAttribute='show-on-phone';}
addProp('Visibility',true,'<gs-select class="target" value="'+strVisibilityAttribute+'" mini>'+'<option value="">Visible</option>'+'<option value="hidden">Invisible</option>'+'<option value="hide-on-desktop">Invisible at desktop size</option>'+'<option value="hide-on-tablet">Invisible at tablet size</option>'+'<option value="hide-on-phone">Invisible at phone size</option>'+'<option value="show-on-desktop">Visible at desktop size</option>'+'<option value="show-on-tablet">Visible at tablet size</option>'+'<option value="show-on-phone">Visible at phone size</option>'+'</gs-select>',function(){selectedElement.removeAttribute('hidden');selectedElement.removeAttribute('hide-on-desktop');selectedElement.removeAttribute('hide-on-tablet');selectedElement.removeAttribute('hide-on-phone');selectedElement.removeAttribute('show-on-desktop');selectedElement.removeAttribute('show-on-tablet');selectedElement.removeAttribute('show-on-phone');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});addFlexContainerProps(selectedElement);};});document.addEventListener('DOMContentLoaded',function(){xtag.register('gs-header',{lifecycle:{/*inserted: function () {
                if (this.border_line) {
                    this.removeChild(this.border_line);
                }
                
                this.border_line = document.createElement('div');
                this.border_line.classList.add('border-line');
                this.border_line.setAttribute('gs-dynamic', '');
                
                this.appendChild(this.border_line);
            },
            removed: function () {
                if (this.border_line.parentNode === this) {
                    this.removeChild(this.border_line);
                }
            }*/},events:{},accessors:{},methods:{}});});window.addEventListener('design-register-element',function(){registerDesignSnippet('<gs-insert>','<gs-insert>','gs-insert src="${1:test.tpeople}">\n'+'    ${2}\n'+'</gs-insert>');designRegisterElement('gs-insert','/v1/dev/developer_g/greyspots-'+GS.version()+'/tools/documentation/doc-elem-insert.html');window.designElementProperty_GSINSERT=function(selectedElement){addProp('Source&nbsp;Query',true,'<gs-memo rows="1" autoresize class="target" value="'+(selectedElement.getAttribute('src')||selectedElement.getAttribute('source')||'')+'" mini></gs-memo>',function(){return setOrRemoveTextAttribute(selectedElement,'src',this.value);});addProp('Additional&nbsp;Values',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('addin')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'addin',this.value);});addProp('Title',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('title')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'title',this.value);});strVisibilityAttribute='';if(selectedElement.hasAttribute('hidden')){strVisibilityAttribute='hidden';}
if(selectedElement.hasAttribute('hide-on-desktop')){strVisibilityAttribute='hide-on-desktop';}
if(selectedElement.hasAttribute('hide-on-tablet')){strVisibilityAttribute='hide-on-tablet';}
if(selectedElement.hasAttribute('hide-on-phone')){strVisibilityAttribute='hide-on-phone';}
if(selectedElement.hasAttribute('show-on-desktop')){strVisibilityAttribute='show-on-desktop';}
if(selectedElement.hasAttribute('show-on-tablet')){strVisibilityAttribute='show-on-tablet';}
if(selectedElement.hasAttribute('show-on-phone')){strVisibilityAttribute='show-on-phone';}
addProp('Visibility',true,'<gs-select class="target" value="'+strVisibilityAttribute+'" mini>'+'<option value="">Visible</option>'+'<option value="hidden">Invisible</option>'+'<option value="hide-on-desktop">Invisible at desktop size</option>'+'<option value="hide-on-tablet">Invisible at tablet size</option>'+'<option value="hide-on-phone">Invisible at phone size</option>'+'<option value="show-on-desktop">Visible at desktop size</option>'+'<option value="show-on-tablet">Visible at tablet size</option>'+'<option value="show-on-phone">Visible at phone size</option>'+'</gs-select>',function(){selectedElement.removeAttribute('hidden');selectedElement.removeAttribute('hide-on-desktop');selectedElement.removeAttribute('hide-on-tablet');selectedElement.removeAttribute('hide-on-phone');selectedElement.removeAttribute('show-on-desktop');selectedElement.removeAttribute('show-on-tablet');selectedElement.removeAttribute('show-on-phone');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});addFlexContainerProps(selectedElement);addFlexProps(selectedElement);};});document.addEventListener('DOMContentLoaded',function(){'use strict';function queryStringTemplateFunction(template){var strWrapperTemplate='{{##def.snippet:\n'+'    {{ var qs = jo; }} {{# def.template }}\n'+'#}}\n'+'{{#def.snippet}}';return doT.template(strWrapperTemplate,null,{'template':template})(GS.qryToJSON(GS.getQueryString())).trim();}
xtag.register('gs-insert',{lifecycle:{},events:{},accessors:{},methods:{submit:function(callback){var element=this,strInsertString='',arrElement,i,len,jsnRow={},strSource=element.queryStringTemplate(decodeURIComponent(element.getAttribute('src')||element.getAttribute('source')||''));if(element.getAttribute('addin')){strInsertString+=element.queryStringTemplate(element.getAttribute('addin'));}
arrElement=xtag.query(element,'[column]');for(i=0,len=arrElement.length;i<len;i+=1){jsnRow[arrElement[i].getAttribute('column')]=arrElement[i].value;strInsertString+=(strInsertString?'&':'')+arrElement[i].getAttribute('column')+'='+
encodeURIComponent(arrElement[i].value);}
strInsertString=encodeURIComponent(strInsertString);GS.addLoader('gs-insert','Inserting Record...');GS.ajaxJSON('/v1/'+(element.getAttribute('action-insert')||'env/action_insert'),'src='+encodeURIComponent(strSource)+'&data='+strInsertString,function(data,error){GS.removeLoader('gs-insert');if(!error){GS.triggerEvent(element,'after_insert');if(typeof callback==='function'){callback(data.dat.lastval,jsnRow);}}else{GS.ajaxErrorDialog(data);}});},queryStringTemplate:queryStringTemplateFunction}});});window.addEventListener('design-register-element',function(){registerDesignSnippet('Static Template <gs-listbox>','<gs-listbox>','gs-listbox>\n'+'    <template>\n'+'        <table>\n'+'            <tbody>\n'+'                <tr value="${1}">\n'+'                    <td>${0}</td>\n'+'                </tr>\n'+'            </tbody>\n'+'        </table>\n'+'    </template>\n'+'</gs-listbox>');registerDesignSnippet('Custom Template <gs-listbox>','<gs-listbox>','gs-listbox src="${1:test.tpeople}">\n'+'    <template>\n'+'        <table>\n'+'            <tbody>\n'+'                <tr value="{{! row.id }}">\n'+'                    <td>{{! row.${3:name} }}</td>\n'+'                </tr>\n'+'            </tbody>\n'+'        </table>\n'+'    </template>\n'+'</gs-listbox>');registerDesignSnippet('Dynamic Template <gs-listbox>','<gs-listbox>','gs-listbox src="${1:test.tpeople}"></gs-listbox>');registerDesignSnippet('<gs-listbox>','<gs-listbox>','gs-listbox src="${1:test.tpeople}"></gs-listbox>');designRegisterElement('gs-listbox','/v1/dev/developer_g/greyspots-'+GS.version()+'/tools/documentation/doc-elem-listbox.html');window.designElementProperty_GSLISTBOX=function(selectedElement){addProp('Source',true,'<gs-memo class="target" value="'+(decodeURIComponent(selectedElement.getAttribute('src')||selectedElement.getAttribute('source')||''))+'" mini></gs-memo>',function(){return setOrRemoveTextAttribute(selectedElement,'src',encodeURIComponent(this.value));});addProp('Columns',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('cols')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'cols',this.value);});addProp('Hide Columns',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('hide')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'hide',this.value);});addProp('Where',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('where')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'where',this.value);});addProp('Order By',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('ord')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'ord',this.value);});addProp('Limit',true,'<gs-number class="target" value="'+(selectedElement.getAttribute('limit')||'')+'" mini></gs-number>',function(){return setOrRemoveTextAttribute(selectedElement,'limit',this.value);});addProp('Offset',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('offset')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'offset',this.value);});addProp('Column',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('column')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'column',this.value);});addProp('Value',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('value')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'value',this.value);});addProp('Column In Querystring',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('qs')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'qs',this.value,false);});addProp('Title',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('title')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'title',this.value);});addProp('Tabindex',true,'<gs-number class="target" value="'+(selectedElement.getAttribute('tabindex')||'')+'" mini></gs-number>',function(){return setOrRemoveTextAttribute(selectedElement,'tabindex',this.value);});addProp('suspend-created',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-created')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-created',this.value==='true',true);});addProp('suspend-inserted',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-inserted')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-inserted',this.value==='true',true);});strVisibilityAttribute='';if(selectedElement.hasAttribute('hidden')){strVisibilityAttribute='hidden';}
if(selectedElement.hasAttribute('hide-on-desktop')){strVisibilityAttribute='hide-on-desktop';}
if(selectedElement.hasAttribute('hide-on-tablet')){strVisibilityAttribute='hide-on-tablet';}
if(selectedElement.hasAttribute('hide-on-phone')){strVisibilityAttribute='hide-on-phone';}
if(selectedElement.hasAttribute('show-on-desktop')){strVisibilityAttribute='show-on-desktop';}
if(selectedElement.hasAttribute('show-on-tablet')){strVisibilityAttribute='show-on-tablet';}
if(selectedElement.hasAttribute('show-on-phone')){strVisibilityAttribute='show-on-phone';}
addProp('Visibility',true,'<gs-select class="target" value="'+strVisibilityAttribute+'" mini>'+'<option value="">Visible</option>'+'<option value="hidden">Invisible</option>'+'<option value="hide-on-desktop">Invisible at desktop size</option>'+'<option value="hide-on-tablet">Invisible at tablet size</option>'+'<option value="hide-on-phone">Invisible at phone size</option>'+'<option value="show-on-desktop">Visible at desktop size</option>'+'<option value="show-on-tablet">Visible at tablet size</option>'+'<option value="show-on-phone">Visible at phone size</option>'+'</gs-select>',function(){selectedElement.removeAttribute('hidden');selectedElement.removeAttribute('hide-on-desktop');selectedElement.removeAttribute('hide-on-tablet');selectedElement.removeAttribute('hide-on-phone');selectedElement.removeAttribute('show-on-desktop');selectedElement.removeAttribute('show-on-tablet');selectedElement.removeAttribute('show-on-phone');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});addProp('Disabled',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('disabled')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'disabled',this.value==='true',true);});addProp('Dissallow&nbsp;Select',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('no-select')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'no-select',this.value==='true',true);});addProp('Letter&nbsp;Scrollbar',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('letter-scrollbar')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'letter-scrollbar',this.value==='true',true);});addProp('Letter Dividers',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('letter-dividers')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'letter-dividers',this.value==='true',true);});addProp('Refresh On Querystring Columns',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('refresh-on-querystring-values')||'')+'" mini></gs-text>',function(){this.removeAttribute('refresh-on-querystring-change');return setOrRemoveTextAttribute(selectedElement,'refresh-on-querystring-values',this.value);});addProp('Refresh On Querystring Change',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('refresh-on-querystring-change'))+'" mini></gs-checkbox>',function(){this.removeAttribute('refresh-on-querystring-values');return setOrRemoveBooleanAttribute(selectedElement,'refresh-on-querystring-change',this.value==='true',true);});addFlexProps(selectedElement);};});document.addEventListener('DOMContentLoaded',function(){'use strict';function highlightRecord(element,record){var i,len,arrSelectedTrs;arrSelectedTrs=xtag.queryChildren(xtag.queryChildren(element.tableElement,'tbody')[0],'tr[selected]');for(i=0,len=arrSelectedTrs.length;i<len;i+=1){arrSelectedTrs[i].removeAttribute('selected');}
if(record){record.setAttribute('selected','');}}
function findRecordFromValue(element,searchValue){var i,len,matchedRecord,arrTrs=xtag.queryChildren(xtag.queryChildren(element.tableElement,'tbody')[0],'tr'),strSearchString=String(searchValue);for(i=0,len=arrTrs.length;i<len;i+=1){if(arrTrs[i].getAttribute('value')===strSearchString||xtag.queryChildren(arrTrs[i],'td')[0].textContent===strSearchString){matchedRecord=arrTrs[i];break;}}
return matchedRecord;}
function selectRecord(element,handle,bolChange){var record,strRecordValue,strFirstTdText;if(!element.hasAttribute('no-select')){if(typeof handle==='string'||typeof handle==='number'){record=findRecordFromValue(element,handle);}else{record=handle;}
if(!record&&handle!==''){console.warn('Listbox warning: record not found'+(typeof handle==='string'?': "'+handle+'"':''));}else if(record){strRecordValue=record.getAttribute('value');strFirstTdText=xtag.queryChildren(record,'td')[0].textContent;if(element.value!==(strRecordValue||strFirstTdText)){element.innerValue=strRecordValue||strFirstTdText;element.innerSelectedRecord=record;if(bolChange){element.hackToPreventScroll=true;element.setAttribute('value',element.innerValue);element.hackToPreventScroll=false;element.triggerChange();}}}
highlightRecord(element,record);}}
function handleKeyDown(event){var element=event.target,intKeyCode=event.keyCode||event.which,selectedTr,trs,i,len,selectedRecordIndex;if(!element.hasAttribute('disabled')){if(!element.hasAttribute('no-select')){if((intKeyCode===40||intKeyCode===38)&&!event.shiftKey&&!event.metaKey&&!event.ctrlKey&&!element.error){trs=xtag.queryChildren(xtag.queryChildren(element.tableElement,'tbody')[0],'tr:not(.divider)');for(i=0,len=trs.length;i<len;i+=1){if(trs[i].hasAttribute('selected')){selectedRecordIndex=i;selectedTr=trs[i];trs[i].removeAttribute('selected');break;}}
if(intKeyCode===40){if(!selectedTr||selectedRecordIndex===trs.length-1){highlightRecord(element,trs[0]);selectedTr=trs[0];}else{highlightRecord(element,trs[selectedRecordIndex+1]);selectedTr=trs[selectedRecordIndex+1];}}else if(intKeyCode===38){if(!selectedTr||selectedRecordIndex===0){highlightRecord(element,trs[trs.length-1]);selectedTr=trs[trs.length-1];}else{highlightRecord(element,trs[selectedRecordIndex-1]);selectedTr=trs[selectedRecordIndex-1];}}
element.scrollToSelectedRecord();event.preventDefault();event.stopPropagation();}else if(event.keyCode===13){selectedTr=xtag.queryChildren(xtag.queryChildren(element.tableElement,'tbody')[0],'tr[selected]')[0];if(element.tableElement&&selectedTr){selectRecord(element,selectedTr,true);}}}}else{if(event.keyCode!==9){event.preventDefault();event.stopPropagation();}}}
function handleFocusout(event){var element=event.target,selectedTr;if(element.tableElement){selectedTr=xtag.queryChildren(xtag.queryChildren(element.tableElement,'tbody')[0],'tr[selected]')[0];if(selectedTr){selectRecord(element,selectedTr,true);}}}
function getData(element,bolInitalLoad,bolClearPrevious){var strLink,strSource=queryStringTemplate(decodeURIComponent(element.getAttribute('src')||element.getAttribute('source')||''));strLink='/v1/'+(element.getAttribute('action-select')||'env/action_select')+'?src='+encodeURIComponent(strSource)+'&where='+encodeURIComponent(queryStringTemplate(decodeURIComponent(element.getAttribute('where')||'')))+'&limit='+encodeURIComponent(queryStringTemplate(decodeURIComponent(element.getAttribute('limit')||'')))+'&offset='+encodeURIComponent(queryStringTemplate(decodeURIComponent(element.getAttribute('offset')||'')))+'&order_by='+encodeURIComponent(queryStringTemplate(decodeURIComponent(element.getAttribute('ord')||'')))+'&cols='+encodeURIComponent(element.getAttribute('cols')||'');GS.dataFetch(strLink,true);GS.addLoader(element,'Loading...');document.addEventListener('dataready_'+encodeURIComponent(strLink),function __THIS_FUNCTION__(event){GS.removeLoader(element);handleData(element,bolInitalLoad,event.detail.response,event.detail.error);GS.triggerEvent(element,'after_select');document.removeEventListener('dataready_'+encodeURIComponent(strLink),__THIS_FUNCTION__);});}
function handleData(element,bolInitalLoad,data,error){var strTemplate,divElement,tableElement,theadElement,theadCellElements,tbodyElement,tbodyCellElements,lastRecordElement,recordElements,recordElement,currentCellLabelElement,template,i,len,arrHeaders=[],arrHide,intVisibleColumns,strHeaderCells,strRecordCells;element.classList.remove('error');element.setAttribute('title','');if(!error){element.error=false;if(element.tableTemplate){strTemplate=element.tableTemplate;}else{arrHide=(element.getAttribute('hide')||'').split(/[\s]*,[\s]*/);for(i=0,len=data.arr_column.length,strHeaderCells='',strRecordCells='',intVisibleColumns=0;i<len;i+=1){if(arrHide.indexOf((i+1)+'')===-1&&arrHide.indexOf(data.arr_column[i])===-1){strHeaderCells+='<th gs-dynamic>'+encodeHTML(data.arr_column[i])+'</th> ';strRecordCells+='<td gs-dynamic>{{! row[\''+data.arr_column[i]+'\'] }}</td> ';intVisibleColumns+=1;}}
strTemplate='<table gs-dynamic>';if(intVisibleColumns>1){strTemplate+='<thead gs-dynamic>'+'<tr gs-dynamic>'+
strHeaderCells+'</tr>'+'</thead>';}
strTemplate+='<tbody gs-dynamic>'+'<tr value="{{! row[\''+data.arr_column[0]+'\'] }}" gs-dynamic>'+
strRecordCells+'</tr>'+'</tbody>'+'<table>';}
divElement=document.createElement('div');divElement.innerHTML=strTemplate;tableElement=xtag.queryChildren(divElement,'table')[0];theadElement=xtag.queryChildren(tableElement,'thead')[0];tbodyElement=xtag.queryChildren(tableElement,'tbody')[0];if(tbodyElement){recordElement=xtag.queryChildren(tbodyElement,'tr')[0];if(recordElement){if(theadElement){theadCellElements=xtag.query(theadElement,'td, th');tbodyCellElements=xtag.query(tbodyElement,'td, th');for(i=0,len=theadCellElements.length;i<len;i+=1){currentCellLabelElement=document.createElement('b');currentCellLabelElement.classList.add('cell-label');currentCellLabelElement.setAttribute('data-text',(theadCellElements[i].textContent||'')+':');if(tbodyCellElements[i].childNodes){tbodyCellElements[i].insertBefore(currentCellLabelElement,tbodyCellElements[i].childNodes[0]);}else{tbodyCellElements[i].insertChild(currentCellLabelElement);}}}
tbodyElement.innerHTML=doT.template(ml(function(){/*
                        {{##def.snippet:
                            {{ var row, row_number, i, len, col_i, col_len, qs = jo.qs;
                            
                            for (i = 0, len = jo.data.dat.length; i < len; i += 1) {
                                row = {};
                                row_number = i + 1;
                                
                                for (col_i = 0, col_len = jo.data.arr_column.length; col_i < col_len; col_i += 1) {
                                    if (jo.data.dat[i][col_i] === undefined || jo.data.dat[i][col_i] === null) {
                                        row[jo.data.arr_column[col_i]] = '';
                                    } else {
                                        row[jo.data.arr_column[col_i]] = jo.data.dat[i][col_i];
                                    }
                                } }}{{# def.record }}
                            {{ } }}
                        #}}
                        {{#def.snippet}}*/ console.log}),null,{"record":decodeHTML(tbodyElement.innerHTML)})({'data':data,'qs':GS.qryToJSON(GS.getQueryString())});element.tableElement=tableElement;element.syncView();}}
if(bolInitalLoad&&!element.getAttribute('value')&&element.hasAttribute('select-first')){selectRecord(element,xtag.query(element,'tbody tr')[0].getAttribute('value'),false);element.scrollToSelectedRecord();}}else{element.error=true;element.classList.add('error');element.setAttribute('title','This listbox has failed to load.');element.setAttribute('disabled','');GS.ajaxErrorDialog(data);}}
function getParentCell(element){var currentElement=element;while(currentElement.nodeName!=='TD'&&currentElement.nodeName!=='TH'&&currentElement.nodeName!=='HTML'){currentElement=currentElement.parentNode;}
if(currentElement.nodeName!=='TD'&&currentElement.nodeName!=='TH'){return undefined;}
return currentElement;}
function queryStringTemplate(template){var strWrapperTemplate='{{##def.snippet:\n'+'    {{ var qs = jo; }} {{# def.template }}\n'+'#}}\n'+'{{#def.snippet}}';return doT.template(strWrapperTemplate,null,{'template':template})(GS.qryToJSON(GS.getQueryString())).trim();}
function windowResizeHandler(){var i,len,arrElement;arrElement=document.getElementsByTagName('gs-listbox');for(i=0,len=arrElement.length;i<len;i+=1){if(GS.pxToEm(document.body,this.oldWidth)!==GS.pxToEm(document.body,this.offsetWidth)&&arrElement[i].hasAttribute('letter-scrollbar')&&arrElement[i].tableElement){if(arrElement[i].hasAttribute('letter-dividers')||arrElement[i].hasAttribute('letter-scrollbar')){arrElement[i].refreshDividingPoints();}
arrElement[i].letterScrollbarHandler();this.oldWidth=this.offsetWidth;}}}
window.addEventListener('resize',windowResizeHandler);window.addEventListener('orientationchange',windowResizeHandler);function pushReplacePopHandler(element){var i,len,currentValue,bolRefresh=false,strQueryString=GS.getQueryString(),arrPopKeys;if(element.getAttribute('qs')&&element.value!==currentValue){element.value=GS.qryGetVal(strQueryString,element.getAttribute('qs'));}
if(element.hasAttribute('refresh-on-querystring-values')){arrPopKeys=element.getAttribute('refresh-on-querystring-values').split(/\s*,\s*/gim);for(i=0,len=arrPopKeys.length;i<len;i+=1){currentValue=GS.qryGetVal(strQueryString,arrPopKeys[i]);if((element.popValues[arrPopKeys[i]]||'')!==currentValue){bolRefresh=true;}
element.popValues[arrPopKeys[i]]=currentValue;}}else if(element.hasAttribute('refresh-on-querystring-change')){bolRefresh=true;}
if(bolRefresh){element.refresh();}}
function elementCreated(element){if(!element.hasAttribute('suspend-created')){if(element.value&&!element.getAttribute('value')){element.setAttribute('value',element.value);delete element.value;}}}
function elementInserted(element){var tableTemplateElement,arrElement,recordElement,tableTemplateElementCopy,strQSValue,i,len,currentElement;if(!element.hasAttribute('suspend-created')&&!element.hasAttribute('suspend-inserted')){if(!element.inserted){element.inserted=true;element.error=false;if(element.hasAttribute('qs')||element.hasAttribute('refresh-on-querystring-values')||element.hasAttribute('refresh-on-querystring-change')){element.popValues={};strQSValue=GS.qryGetVal(GS.getQueryString(),element.getAttribute('qs'));if(strQSValue!==''||!element.getAttribute('value')){element.setAttribute('value',strQSValue);}
window.addEventListener('pushstate',function(){pushReplacePopHandler(element);});window.addEventListener('replacestate',function(){pushReplacePopHandler(element);});window.addEventListener('popstate',function(){pushReplacePopHandler(element);});element.popValues=GS.qryToJSON(GS.getQueryString());}
if(!element.hasAttribute('tabindex')){element.setAttribute('tabindex','0');}
tableTemplateElement=xtag.queryChildren(element,'template')[0];if(tableTemplateElement){tableTemplateElementCopy=document.createElement('template');tableTemplateElementCopy.innerHTML=tableTemplateElement.innerHTML;recordElement=xtag.query(xtag.query(tableTemplateElementCopy.content,'tbody')[0],'tr')[0];arrElement=xtag.query(recordElement,'[column]');for(i=0,len=arrElement.length;i<len;i+=1){currentElement=arrElement[i];if((!currentElement.hasAttribute('value'))&&currentElement.hasAttribute('column')){currentElement.setAttribute('value','{{! row.'+currentElement.getAttribute('column')+' }}');}}
element.tableTemplate=tableTemplateElementCopy.innerHTML;}
if(element.getAttribute('src')||element.getAttribute('source')){getData(element,true);}else{if(tableTemplateElement){element.tableElement=xtag.query(tableTemplateElementCopy.content,'table')[0];}else if(xtag.queryChildren(element,'table')[0]){element.tableElement=xtag.queryChildren(element,'table')[0];}else{element.tableElement=document.createElement('table');}
element.syncView();}}}}
xtag.register('gs-listbox',{lifecycle:{created:function(){elementCreated(this);},inserted:function(){elementInserted(this);},attributeChanged:function(strAttrName,oldValue,newValue){if(strAttrName==='suspend-created'&&newValue===null){elementCreated(this);elementInserted(this);}else if(strAttrName==='suspend-inserted'&&newValue===null){elementInserted(this);}else if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){}}},events:{},accessors:{value:{get:function(){return this.innerValue;},set:function(strNewValue){selectRecord(this,strNewValue);this.scrollToSelectedRecord();}},selectedRecord:{get:function(){return this.innerSelectedRecord;},set:function(newValue){selectRecord(this,newValue);this.scrollToSelectedRecord();}},textValue:{get:function(){if(this.innerSelectedRecord){return xtag.queryChildren(this.innerSelectedRecord,'td')[0].textContent;}
return undefined;},set:function(){selectRecord(this,strNewValue);this.scrollToSelectedRecord();}}},methods:{refresh:function(){getData(this);},scrollToSelectedRecord:function(){var selectedTr;if(this.tableElement){selectedTr=xtag.query(this.tableElement,'tr[selected]')[0];if(selectedTr){GS.scrollIntoView(selectedTr);}}
/*var scrollingContainer, arrTrs, i, len, intScrollTop, bolFoundSelected = false;
                
                if (this.tableElement) {
                    scrollingContainer = this;
                    arrTrs = xtag.query(this.tableElement, 'tr');
                    
                    for (i = 0, intScrollTop = 0, len = arrTrs.length; i < len; i += 1) {
                        if (arrTrs[i].hasAttribute('selected')) {
                            intScrollTop += arrTrs[i].offsetHeight / 2;
                            
                            bolFoundSelected = true;
                            
                            break;
                        } else {
                            intScrollTop += arrTrs[i].offsetHeight;
                        }
                    }
                    
                    if (bolFoundSelected) {
                        intScrollTop = intScrollTop - scrollingContainer.offsetHeight / 2;
                    } else {
                        intScrollTop = 0;
                    }
                    
                    scrollingContainer.scrollTop = intScrollTop;
                }*/},letterScrollbarHandler:function(){var element=this,i,len,intTextHeight,intLettersDropped,intSkipperHeight,intElementHeight,intDistance,strHTML,arrSkippers;if(xtag.queryChildren(element,'.letter-scrollbar-container').length===0){element.letterScrollbarContainer=document.createElement('div');element.letterScrollbarContainer.classList.add('letter-scrollbar-container');element.letterScrollbarContainer.setAttribute('gs-dynamic','');element.appendChild(element.letterScrollbarContainer);}else{element.letterScrollbarContainer.innerHTML='';}
if(element.clientHeight<element.scrollContainer.scrollHeight){intTextHeight=GS.getTextHeight(element.letterScrollbarContainer);intSkipperHeight=intTextHeight*this.arrDividingPoints.length;intElementHeight=element.clientHeight/this.arrDividingPoints.length;if(intElementHeight<intTextHeight){intElementHeight=intTextHeight;}
if(intSkipperHeight>element.clientHeight){intLettersDropped=0;while(intSkipperHeight>element.clientHeight&&intLettersDropped<100){intSkipperHeight-=intTextHeight;intLettersDropped+=1;}
intDistance=Math.ceil(this.arrDividingPoints.length/intLettersDropped);}
for(i=0,len=this.arrDividingPoints.length,strHTML='';i<len;i+=1){if(intLettersDropped===undefined||(intLettersDropped>0&&i%intDistance!==0)){strHTML+='<div class="skipper" gs-dynamic '+'style="height: '+intElementHeight+'px; line-height: '+intElementHeight+'px;" '+'data-target-offset="'+this.arrDividingPoints[i].offset+'">'+'<span gs-dynamic>'+this.arrDividingPoints[i].letter+'</span>'+'</div>';}}
element.letterScrollbarContainer.innerHTML=strHTML;if(element.paddingElement&&element.paddingElement.parentNode===element.scrollContainer){element.scrollContainer.removeChild(element.paddingElement);}
element.paddingElement=document.createElement('div');element.paddingElement.setAttribute('gs-dynamic','');if(this.arrDividingPoints.length>0){element.paddingElement.style.height=(element.clientHeight-
(element.scrollContainer.scrollHeight-parseInt(this.arrDividingPoints[this.arrDividingPoints.length-1].offset,10)))+'px';}
element.scrollContainer.appendChild(element.paddingElement);arrSkippers=element.letterScrollbarContainer.children;if(element.mousedownHandler){window.removeEventListener(evt.mousedown,element.mousedownHandler);window.removeEventListener(evt.mousemove,element.mousemoveHandler);window.removeEventListener(evt.mouseup,element.mouseupHandler);}
element.clickHandler=function(){element.style.webkitOverflowScrolling='initial';element.scrollContainer.scrollTop=parseInt(this.getAttribute('data-target-offset'),10);element.style.webkitOverflowScrolling='touch';};element.mousedownHandler=function(){window.addEventListener(evt.mousemove,element.mousemoveHandler);if(event.target.classList.contains('skipper')&&evt.touchDevice){element.style.webkitOverflowScrolling='initial';}};element.mousemoveHandler=function(event){var jsnMousePosition,targetElement;if(event.which!==0||evt.touchDevice){jsnMousePosition=GS.mousePosition(event);targetElement=document.elementFromPoint(jsnMousePosition.left,jsnMousePosition.top);if(targetElement){if(targetElement.nodeName==='SPAN'){targetElement=targetElement.parentNode;}
if(targetElement.classList.contains('skipper')){element.style.webkitOverflowScrolling='initial';event.preventDefault();element.scrollContainer.scrollTop=parseInt(targetElement.getAttribute('data-target-offset'),10);}}}else{window.removeEventListener(evt.mousemove,element.mousemoveHandler);}};element.mouseupHandler=function(){element.style.webkitOverflowScrolling='touch';window.removeEventListener(evt.mousemove,element.mousemoveHandler);};element.addEventListener(evt.mousedown,element.mousedownHandler);element.addEventListener(evt.mouseup,element.mouseupHandler);for(i=0,len=arrSkippers.length;i<len;i+=1){arrSkippers[i].addEventListener('click',element.clickHandler);}}},refreshDividingPoints:function(){var tbodyElement,arrElement,arrLetter,dividerElement,strLetter,intOffset,numColumns,theadElement,i,len;tbodyElement=xtag.queryChildren(this.tableElement,'tbody')[0];arrElement=xtag.queryChildren(tbodyElement,'tr.divider');for(i=0,len=arrElement.length;i<len;i+=1){tbodyElement.removeChild(arrElement[i]);}
this.arrDividingPoints=[];arrElement=xtag.queryChildren(tbodyElement,'tr');if(arrElement.length>0){numColumns=arrElement[0].children.length;theadElement=xtag.queryChildren(this.tableElement,'thead')[0];intOffset=(theadElement?theadElement.offsetHeight:0);for(i=0,len=arrElement.length,arrLetter=[];i<len;i+=1){strLetter=xtag.queryChildren(arrElement[i],'td')[0].textContent.substring(0,1).toUpperCase();if(arrLetter.indexOf(strLetter)===-1){this.arrDividingPoints.push({'letter':strLetter,'offset':intOffset});if(this.hasAttribute('letter-dividers')){dividerElement=document.createElement('tr');dividerElement.classList.add('divider');dividerElement.setAttribute('gs-dynamic','');dividerElement.setAttribute('data-target-offset',intOffset);dividerElement.innerHTML='<td colspan="'+numColumns+'" gs-dynamic>'+encodeHTML(strLetter)+'</td>';tbodyElement.insertBefore(dividerElement,arrElement[i]);intOffset+=dividerElement.offsetHeight;}
arrLetter.push(strLetter);}
intOffset+=arrElement[i].offsetHeight;}}},syncView:function(){var element=this,tbodyElement,i,len,arrElements,clickHandler,mousedownHandler,mouseoutHandler,mouseoverHandler;element.removeEventListener('keydown',handleKeyDown);element.addEventListener('keydown',handleKeyDown);element.removeEventListener('focusout',handleFocusout);element.addEventListener('focusout',handleFocusout);element.innerHTML='';element.scrollContainer=document.createElement('div');element.scrollContainer.setAttribute('gs-dynamic','');element.scrollContainer.classList.add('root');element.scrollContainer.classList.add('scroll-container');element.scrollContainer.appendChild(element.tableElement);element.appendChild(element.scrollContainer);tbodyElement=xtag.queryChildren(element.tableElement,'tbody')[0];if(element.hasAttribute('letter-dividers')||element.hasAttribute('letter-scrollbar')){element.refreshDividingPoints();if(element.hasAttribute('letter-scrollbar')){element.letterScrollbarHandler();}}
if(this.getAttribute('value')){selectRecord(this,this.getAttribute('value'));this.scrollToSelectedRecord();}
arrElements=xtag.toArray(tbodyElement.children);clickHandler=function(event){this.classList.remove('down');selectRecord(element,this,true);};for(i=0,len=arrElements.length;i<len;i+=1){if(!arrElements[i].classList.contains('divider')){arrElements[i].addEventListener('click',clickHandler);}}
if(!evt.touchDevice){mousedownHandler=function(){this.classList.add('down');};mouseoutHandler=function(){this.classList.remove('down');this.classList.remove('hover');};mouseoverHandler=function(){this.classList.remove('down');this.classList.add('hover');};for(i=0,len=arrElements.length;i<len;i+=1){if(!arrElements[i].classList.contains('divider')){arrElements[i].addEventListener(evt.mousedown,mousedownHandler);arrElements[i].addEventListener(evt.mouseout,mouseoutHandler);arrElements[i].addEventListener(evt.mouseover,mouseoverHandler);}}}},triggerChange:function(){xtag.fireEvent(this,'change',{bubbles:true,cancelable:true});}}});});window.addEventListener('design-register-element',function(){registerDesignSnippet('<gs-memo>','<gs-memo>','gs-memo column="${1:name}"></gs-memo>');registerDesignSnippet('<gs-memo> With Label','<gs-memo>','label for="${1:memo-insert-note}">${2:Notes}:</label>\n'+'<gs-memo id="${1:memo-insert-note}" column="${3:note}"></gs-memo>');designRegisterElement('gs-memo','/v1/dev/developer_g/greyspots-'+GS.version()+'/tools/documentation/doc-elem-memo.html');window.designElementProperty_GSMEMO=function(selectedElement){addProp('Column',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('column')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'column',this.value);});addProp('Value',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('value')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'value',this.value);});addProp('Column In Querystring',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('qs')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'qs',this.value,false);});addProp('Rows',true,'<gs-number class="target" value="'+(selectedElement.getAttribute('rows')||'')+'" mini></gs-number>',function(){return setOrRemoveTextAttribute(selectedElement,'rows',this.value);});addProp('Placeholder',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('placeholder')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'placeholder',this.value);});addProp('Autoresize',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('autoresize'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'autoresize',(this.value==='true'),true);});addProp('Resize Handle',true,'<gs-checkbox class="target" value="'+(!selectedElement.hasAttribute('no-resize-handle'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'no-resize-handle',(this.value==='true'),false);});addProp('Mini',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('mini'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'mini',(this.value==='true'),true);});addProp('Title',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('title')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'title',this.value);});addProp('Tabindex',true,'<gs-number class="target" value="'+(selectedElement.getAttribute('tabindex')||'')+'" mini></gs-number>',function(){return setOrRemoveTextAttribute(selectedElement,'tabindex',this.value);});addProp('suspend-created',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-created')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-created',this.value==='true',true);});addProp('suspend-inserted',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-inserted')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-inserted',this.value==='true',true);});strVisibilityAttribute='';if(selectedElement.hasAttribute('hidden')){strVisibilityAttribute='hidden';}
if(selectedElement.hasAttribute('hide-on-desktop')){strVisibilityAttribute='hide-on-desktop';}
if(selectedElement.hasAttribute('hide-on-tablet')){strVisibilityAttribute='hide-on-tablet';}
if(selectedElement.hasAttribute('hide-on-phone')){strVisibilityAttribute='hide-on-phone';}
if(selectedElement.hasAttribute('show-on-desktop')){strVisibilityAttribute='show-on-desktop';}
if(selectedElement.hasAttribute('show-on-tablet')){strVisibilityAttribute='show-on-tablet';}
if(selectedElement.hasAttribute('show-on-phone')){strVisibilityAttribute='show-on-phone';}
addProp('Visibility',true,'<gs-select class="target" value="'+strVisibilityAttribute+'" mini>'+'<option value="">Visible</option>'+'<option value="hidden">Invisible</option>'+'<option value="hide-on-desktop">Invisible at desktop size</option>'+'<option value="hide-on-tablet">Invisible at tablet size</option>'+'<option value="hide-on-phone">Invisible at phone size</option>'+'<option value="show-on-desktop">Visible at desktop size</option>'+'<option value="show-on-tablet">Visible at tablet size</option>'+'<option value="show-on-phone">Visible at phone size</option>'+'</gs-select>',function(){selectedElement.removeAttribute('hidden');selectedElement.removeAttribute('hide-on-desktop');selectedElement.removeAttribute('hide-on-tablet');selectedElement.removeAttribute('hide-on-phone');selectedElement.removeAttribute('show-on-desktop');selectedElement.removeAttribute('show-on-tablet');selectedElement.removeAttribute('show-on-phone');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});addProp('Disabled',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('disabled')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'disabled',this.value==='true',true);});addFlexProps(selectedElement);};});window.addEventListener('resize',function(){var i,len,arrElements=document.getElementsByTagName('gs-memo');for(i=0,len=arrElements.length;i<len;i+=1){arrElements[i].handleResizeToText();}});if(!evt.touchDevice){window.gsMemo={};window.gsMemo.bolFirstMouseMoveWhileDown=true;window.gsMemo.currentMouseTarget=null;window.addEventListener('mousemove',function(event){var mousePosition
if(window.bolFirstMouseMoveWhileDown===true&&event.which!==0){mousePosition=GS.mousePosition(event);window.bolFirstMouseMoveWhileDown=false;window.gsMemo.currentMouseTarget=document.elementFromPoint(mousePosition.x,mousePosition.y);}else if(event.which===0){window.bolFirstMouseMoveWhileDown=true;}
if(window.gsMemo.currentMouseTarget&&event.which!==0&&window.gsMemo.currentMouseTarget.nodeName==='TEXTAREA'&&window.gsMemo.currentMouseTarget.parentNode.nodeName==='GS-MEMO'&&window.bolFirstMouseMoveWhileDown===false&&(window.gsMemo.currentMouseTarget.lastWidth!==window.gsMemo.currentMouseTarget.clientWidth||window.gsMemo.currentMouseTarget.lastHeight!==window.gsMemo.currentMouseTarget.clientHeight)){window.gsMemo.currentMouseTarget.style.margin='';window.gsMemo.currentMouseTarget.style.marginLeft='';window.gsMemo.currentMouseTarget.style.marginRight='';window.gsMemo.currentMouseTarget.style.marginTop='';window.gsMemo.currentMouseTarget.style.marginBottom='';window.gsMemo.currentMouseTarget.lastWidth=window.gsMemo.currentMouseTarget.clientWidth;window.gsMemo.currentMouseTarget.lastHeight=window.gsMemo.currentMouseTarget.clientHeight;GS.triggerEvent(window.gsMemo.currentMouseTarget.parentNode,'size-changed');}});window.addEventListener('mouseup',function(event){window.bolFirstMouseMoveWhileDown=true;});}
document.addEventListener('DOMContentLoaded',function(){'use strict';var multiLineTemplateElement=document.createElement('template'),multiLineTemplate;multiLineTemplateElement.innerHTML='<textarea class="control" gs-dynamic></textarea>';multiLineTemplate=multiLineTemplateElement.content;function changeFunction(event){event.preventDefault();event.stopPropagation();GS.triggerEvent(event.target.parentNode,'change');}
function focusFunction(event){GS.triggerEvent(event.target.parentNode,'focus');}
function keydownFunction(event){var element=event.target;if(element.getAttribute('disabled')!==null&&event.keyCode!==9&&!(event.keyCode===122&&event.metaKey)){event.preventDefault();event.stopPropagation();}else{element.parentNode.setAttribute('value',element.value);element.parentNode.handleResizeToText();}}
function keyupFunction(event){var element=event.target;element.parentNode.setAttribute('value',element.value);element.parentNode.handleResizeToText();}
function createPushReplacePopHandler(element){element.value=GS.qryGetVal(GS.getQueryString(),element.getAttribute('qs'));}
function elementCreated(element){if(!element.hasAttribute('suspend-created')){if(element.value){element.setAttribute('value',element.value);delete element.value;}}}
function elementInserted(element){var strQSValue;if(!element.hasAttribute('suspend-created')&&!element.hasAttribute('suspend-inserted')){if(!element.inserted){element.inserted=true;if(element.hasAttribute('tabindex')){element.setAttribute('data-tabindex',element.getAttribute('tabindex'));element.removeAttribute('tabindex');}
element.appendChild(multiLineTemplate.cloneNode(true));if(element.hasAttribute('data-tabindex')){xtag.query(element,'.control')[0].setAttribute('tabindex',element.getAttribute('data-tabindex'));}
element.control=xtag.queryChildren(element,'.control')[0];element.control.lastWidth=element.control.clientWidth;element.control.lastHeight=element.control.clientHeight;element.syncView();if(element.getAttribute('qs')){strQSValue=GS.qryGetVal(GS.getQueryString(),element.getAttribute('qs'));if(strQSValue!==''||!element.getAttribute('value')){element.value=strQSValue;}
window.addEventListener('pushstate',function(){createPushReplacePopHandler(element);});window.addEventListener('replacestate',function(){createPushReplacePopHandler(element);});window.addEventListener('popstate',function(){createPushReplacePopHandler(element);});}}}}
xtag.register('gs-memo',{lifecycle:{created:function(){elementCreated(this);},inserted:function(){elementInserted(this);},attributeChanged:function(strAttrName,oldValue,newValue){if(strAttrName==='suspend-created'&&newValue===null){elementCreated(this);elementInserted(this);}else if(strAttrName==='suspend-inserted'&&newValue===null){elementInserted(this);}else if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){if(strAttrName==='disabled'&&newValue!==null){this.innerHTML=this.getAttribute('value')||this.getAttribute('placeholder');}else if(strAttrName==='disabled'&&newValue===null){this.innerHTML='';this.appendChild(multiLineTemplate.cloneNode(true));if(this.hasAttribute('data-tabindex')){xtag.query(this,'.control')[0].setAttribute('tabindex',this.getAttribute('data-tabindex'));}
this.control=xtag.queryChildren(this,'.control')[0];this.control.lastWidth=this.control.clientWidth;this.control.lastHeight=this.control.clientHeight;this.syncView();}}}},events:{},accessors:{value:{get:function(){if(this.control){return this.control.value;}else{return this.innerHTML;}},set:function(strNewValue){this.setAttribute('value',strNewValue);if(this.control){this.control.value=strNewValue;}else{this.innerHTML=strNewValue;}
this.syncView();}},textValue:{get:function(){if(this.control){return this.control.value;}else{return this.innerHTML;}},set:function(newValue){this.value=newValue;}}},methods:{focus:function(){if(this.control){this.control.focus();}},syncView:function(){var element=this,arrPassThroughAttributes,i,len;/*
                if (this.innerHTML === '') {
                    this.appendChild(multiLineTemplate.cloneNode(true));
                }
                */
/*
                if ((! this.hasAttribute('disabled')) && (! this.control)) {
                    this.appendChild(multiLineTemplate.cloneNode(true));
                    // set a variable with the control element for convenience and speed
                    this.control = xtag.queryChildren(this, '.control')[0];
                    
                    this.control.lastWidth = this.control.clientWidth;
                    this.control.lastHeight = this.control.clientHeight;
                }
                */
if(this.hasAttribute('rows')){if(this.control){this.control.setAttribute('rows',this.getAttribute('rows'));}}
if(this.control){this.control.removeEventListener('change',changeFunction);this.control.addEventListener('change',changeFunction);this.control.removeEventListener('focus',focusFunction);this.control.addEventListener('focus',focusFunction);this.control.removeEventListener('keydown',keydownFunction);this.control.addEventListener('keydown',keydownFunction);}
if(this.control){this.control.value=this.getAttribute('value');}else{this.innerHTML=this.getAttribute('value')||this.getAttribute('placeholder')||'';}
if(this.getAttribute('value')){this.handleResizeToText();}
if(this.control){arrPassThroughAttributes=['placeholder','name','maxlength','autocorrect','autocapitalize','autocomplete','autofocus','rows'];for(i=0,len=arrPassThroughAttributes.length;i<len;i+=1){if(this.hasAttribute(arrPassThroughAttributes[i])){this.control.setAttribute(arrPassThroughAttributes[i],this.getAttribute(arrPassThroughAttributes[i])||'');}}}},handleResizeToText:function(){var element=this,intMinHeight;if(element.control){if(element.hasAttribute('autoresize')){element.control.style.height='';intMinHeight=element.control.offsetHeight;element.control.style.height='';if(element.control.scrollHeight>intMinHeight){element.control.style.height=element.control.scrollHeight+'px';}else{element.control.style.height=intMinHeight+'px';}}
if(element.control.lastWidth!==element.control.clientWidth&&element.control.lastHeight!==element.control.clientHeight){element.control.lastWidth=element.control.clientWidth;element.control.lastHeight=element.control.clientHeight;GS.triggerEvent(element,'size-changed');}}}}});});window.addEventListener('design-register-element',function(){registerDesignSnippet('<gs-number>','<gs-number>','gs-number column="${1:name}"></gs-number>');registerDesignSnippet('<gs-number> With Label','<gs-number>','label for="${1:number-insert-qty}">${2:Quantity}:</label>\n'+'<gs-number id="${1:number-insert-qty}" column="${3:qty}"></gs-number>');designRegisterElement('gs-number','/v1/dev/developer_g/greyspots-'+GS.version()+'/tools/documentation/doc-elem-number.html');window.designElementProperty_GSNUMBER=function(selectedElement){addProp('Column',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('column')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'column',this.value);});addProp('Value',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('value')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'value',this.value);});addProp('Column In Querystring',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('qs')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'qs',this.value,false);});addProp('Placeholder',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('placeholder')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'placeholder',this.value);});addProp('Mini',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('mini'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'mini',(this.value==='true'),true);});addProp('Title',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('title')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'title',this.value);});addProp('Tabindex',true,'<gs-number class="target" value="'+(selectedElement.getAttribute('tabindex')||'')+'" mini></gs-number>',function(){return setOrRemoveTextAttribute(selectedElement,'tabindex',this.value);});addProp('suspend-created',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-created')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-created',this.value==='true',true);});addProp('suspend-inserted',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-inserted')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-inserted',this.value==='true',true);});strVisibilityAttribute='';if(selectedElement.hasAttribute('hidden')){strVisibilityAttribute='hidden';}
if(selectedElement.hasAttribute('hide-on-desktop')){strVisibilityAttribute='hide-on-desktop';}
if(selectedElement.hasAttribute('hide-on-tablet')){strVisibilityAttribute='hide-on-tablet';}
if(selectedElement.hasAttribute('hide-on-phone')){strVisibilityAttribute='hide-on-phone';}
if(selectedElement.hasAttribute('show-on-desktop')){strVisibilityAttribute='show-on-desktop';}
if(selectedElement.hasAttribute('show-on-tablet')){strVisibilityAttribute='show-on-tablet';}
if(selectedElement.hasAttribute('show-on-phone')){strVisibilityAttribute='show-on-phone';}
addProp('Visibility',true,'<gs-select class="target" value="'+strVisibilityAttribute+'" mini>'+'<option value="">Visible</option>'+'<option value="hidden">Invisible</option>'+'<option value="hide-on-desktop">Invisible at desktop size</option>'+'<option value="hide-on-tablet">Invisible at tablet size</option>'+'<option value="hide-on-phone">Invisible at phone size</option>'+'<option value="show-on-desktop">Visible at desktop size</option>'+'<option value="show-on-tablet">Visible at tablet size</option>'+'<option value="show-on-phone">Visible at phone size</option>'+'</gs-select>',function(){selectedElement.removeAttribute('hidden');selectedElement.removeAttribute('hide-on-desktop');selectedElement.removeAttribute('hide-on-tablet');selectedElement.removeAttribute('hide-on-phone');selectedElement.removeAttribute('show-on-desktop');selectedElement.removeAttribute('show-on-tablet');selectedElement.removeAttribute('show-on-phone');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});addProp('Disabled',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('disabled')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'disabled',this.value==='true',true);});addFlexProps(selectedElement);};});document.addEventListener('DOMContentLoaded',function(){'use strict';var singleLineTemplateElement=document.createElement('template'),singleLineTemplate;singleLineTemplateElement.innerHTML='<input class="control" gs-dynamic type="text" />';singleLineTemplate=singleLineTemplateElement.content;function changeFunction(event){event.preventDefault();event.stopPropagation();GS.triggerEvent(event.target.parentNode,'change');handleFormat(event.target.parentNode,event);}
function focusFunction(event){GS.triggerEvent(event.target.parentNode,'focus');}
function createPushReplacePopHandler(element){element.value=GS.qryGetVal(GS.getQueryString(),element.getAttribute('qs'));}
function syncView(element){if(element.control){element.setAttribute('value',element.control.value);}else{element.setAttribute('value',element.innerHTML);}}
function handleFormat(element,event,bolAlertOnError){var strFormat,intValue;if(element.hasAttribute('format')){strFormat=element.getAttribute('format');intValue=element.value;if(isNaN(intValue)){if(bolAlertOnError!==undefined&&bolAlertOnError!==false){alert('Invalid Number: '+element.value);}
if(element.control){GS.setInputSelection(element.control,0,element.value.length);}
if(event){event.stopPropagation();event.preventDefault();}}else{if(element.control){element.control.value=formatNumber(intValue,strFormat);}else{element.innerHTML=formatNumber(intValue,strFormat);}}}}
function formatNumber(intValue,strFormat){/* (this function contains a (modified) substantial portion of code from another source
            here is the copyright for sake of legality) (Uses code by Matt Kruse)
        Copyright (c) 2006-2009 Rostislav Hristov, Asual DZZD
        
        Permission is hereby granted, free of charge, to any person obtaining a 
        copy of this software and associated documentation files 
        (the "Software"), to deal in the Software without restriction, 
        including without limitation the rights to use, copy, modify, merge, 
        publish, distribute, sublicense, and/or sell copies of the Software, 
        and to permit persons to whom the Software is furnished to do so, 
        subject to the following conditions:
        
        The above copyright notice and this permission notice shall be included 
        in all copies or substantial portions of the Software.
        
        THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS 
        OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF 
        MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. 
        IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY 
        CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, 
        TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE 
        SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.*/
var groupingSeparator,groupingIndex,decimalSeparator,decimalIndex,roundFactor,result,i,locale={groupingSeparator:',',decimalSeparator:'.',currencySymbol:'$',percentSymbol:'%'};if(strFormat.toLowerCase()==='currency'){strFormat=locale.currencySymbol+'0.00';}else if(strFormat.toLowerCase()==='percent'){intValue=intValue*100;strFormat=locale.percentSymbol+'0.00';}
var integer='',fraction='',negative,minFraction,maxFraction,powFraction,bolCurrencySymbol=strFormat[0]===locale.currencySymbol,bolPercentSymbol=strFormat[0]===locale.percentSymbol;if(bolCurrencySymbol||bolPercentSymbol){strFormat=strFormat.substring(1);}
groupingSeparator=',';groupingIndex=strFormat.lastIndexOf(groupingSeparator);decimalSeparator='.';decimalIndex=strFormat.indexOf(decimalSeparator);negative=intValue<0;minFraction=strFormat.substr(decimalIndex+1).replace(/#/g,'').length;maxFraction=strFormat.substr(decimalIndex+1).length;powFraction=10;intValue=Math.abs(intValue);if(decimalIndex!=-1){fraction=locale.decimalSeparator;if(maxFraction>0){roundFactor=1000;powFraction=Math.pow(powFraction,maxFraction);var tempRound=Math.round(parseInt(intValue*powFraction*roundFactor-
Math.round(intValue)*powFraction*roundFactor,10)/roundFactor),tempFraction=String(tempRound<0?Math.round(parseInt(intValue*powFraction*roundFactor-
parseInt(intValue,10)*powFraction*roundFactor,10)/roundFactor):tempRound),parts=intValue.toString().split('.');if(typeof parts[1]!='undefined'){for(i=0;i<maxFraction;i++){if(parts[1].substr(i,1)=='0'&&i<maxFraction-1&&tempFraction.length!=maxFraction){tempFraction='0'+tempFraction;}else{break;}}}
for(i=0;i<(maxFraction-fraction.length);i++){tempFraction+='0';}
var symbol,formattedFraction='';for(i=0;i<tempFraction.length;i++){symbol=tempFraction.substr(i,1);if(i>=minFraction&&symbol=='0'&&/^0*$/.test(tempFraction.substr(i+1))){break;}
formattedFraction+=symbol;}
fraction+=formattedFraction;}
if(fraction==locale.decimalSeparator){fraction='';}}
if(decimalIndex!==0){if(fraction!==''){integer=String(parseInt(Math.round(intValue*powFraction)/powFraction,10));}else{integer=String(Math.round(intValue));}
var grouping=locale.groupingSeparator,groupingSize=0;if(groupingIndex!=-1){if(decimalIndex!=-1){groupingSize=decimalIndex-groupingIndex;}else{groupingSize=strFormat.length-groupingIndex;}
groupingSize--;}
if(groupingSize>0){var count=0,formattedInteger='';i=integer.length;while(i--){if(count!==0&&count%groupingSize===0){formattedInteger=grouping+formattedInteger;}
formattedInteger=integer.substr(i,1)+formattedInteger;count++;}
integer=formattedInteger;}
var maxInteger,maxRegExp=/#|,/g;if(decimalIndex!=-1){maxInteger=strFormat.substr(0,decimalIndex).replace(maxRegExp,'').length;}else{maxInteger=strFormat.replace(maxRegExp,'').length;}
var tempInteger=integer.length;for(i=tempInteger;i<maxInteger;i++){integer='0'+integer;}}
result=integer+fraction;return(bolPercentSymbol?locale.percentSymbol:'')+
(bolCurrencySymbol?locale.currencySymbol:'')+
(negative?'-':'')+result;}
function elementCreated(element){if(!element.hasAttribute('suspend-created')){if(element.value){element.setAttribute('value',element.value);delete element.value;}}}
function elementInserted(element){var strQSValue;if(!element.hasAttribute('suspend-created')&&!element.hasAttribute('suspend-inserted')){if(!element.inserted){element.inserted=true;if(element.hasAttribute('tabindex')){element.setAttribute('data-tabindex',element.getAttribute('tabindex'));element.removeAttribute('tabindex');}
if(element.hasAttribute('disabled')){element.innerHTML=element.getAttribute('value')||element.getAttribute('placeholder');}else{element.innerHTML='';element.appendChild(singleLineTemplate.cloneNode(true));if(element.hasAttribute('data-tabindex')){xtag.query(element,'.control')[0].setAttribute('tabindex',element.getAttribute('data-tabindex'));}}
if(element.getAttribute('qs')){strQSValue=GS.qryGetVal(GS.getQueryString(),element.getAttribute('qs'));if(strQSValue!==''||!element.getAttribute('value')){element.value=strQSValue;}
window.addEventListener('pushstate',function(){createPushReplacePopHandler(element);});window.addEventListener('replacestate',function(){createPushReplacePopHandler(element);});window.addEventListener('popstate',function(){createPushReplacePopHandler(element);});}
if(element.innerHTML===''){element.appendChild(singleLineTemplate.cloneNode(true));if(element.hasAttribute('data-tabindex')){xtag.query(element,'.control')[0].setAttribute('tabindex',element.getAttribute('data-tabindex'));}}
element.refresh();}}}
xtag.register('gs-number',{lifecycle:{created:function(){elementCreated(this);},inserted:function(){elementInserted(this);},attributeChanged:function(strAttrName,oldValue,newValue){if(strAttrName==='suspend-created'&&newValue===null){elementCreated(this);elementInserted(this);}else if(strAttrName==='suspend-inserted'&&newValue===null){elementInserted(this);}else if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){if(strAttrName==='disabled'){if(this.hasAttribute('tabindex')){this.setAttribute('data-tabindex',this.getAttribute('tabindex'));this.removeAttribute('tabindex');}
if(this.hasAttribute('disabled')){this.innerHTML=this.getAttribute('value')||this.getAttribute('placeholder');}else{this.innerHTML='';this.appendChild(singleLineTemplate.cloneNode(true));if(this.hasAttribute('data-tabindex')){xtag.query(this,'.control')[0].setAttribute('tabindex',this.getAttribute('data-tabindex'));}}
this.refresh();}}}},events:{keydown:function(event){if(window.bolDesignMode!==true){if(this.getAttribute('disabled')!==null&&event.keyCode!==9){event.preventDefault();event.stopPropagation();}else{syncView(this);}}},keyup:function(){if(window.bolDesignMode!==true){syncView(this);}}},accessors:{value:{get:function(){if(this.control){return parseFloat(this.control.value.replace(/[^0-9.]*/g,''),10);}else{return parseFloat(this.innerHTML.replace(/[^0-9.]*/g,''),10);}},set:function(strNewValue){if(this.control){this.control.value=strNewValue;}else{this.innerHTML=strNewValue;}
handleFormat(this);syncView(this);}}},methods:{focus:function(){this.control.focus();},refresh:function(){var arrPassThroughAttributes,i,len;this.control=xtag.query(this,'.control')[0];if(this.control){this.control.removeEventListener('change',changeFunction);this.control.addEventListener('change',changeFunction);this.control.removeEventListener('focus',focusFunction);this.control.addEventListener('focus',focusFunction);}
if(this.hasAttribute('value')){if(this.control){this.control.value=this.getAttribute('value')||this.getAttribute('placeholder');}else{this.innerHTML=this.getAttribute('value')||this.getAttribute('placeholder');}
handleFormat(this,undefined,false);}
if(this.control){arrPassThroughAttributes=['placeholder','name','maxlength','autocorrect','autocapitalize','autocomplete','autofocus'];for(i=0,len=arrPassThroughAttributes.length;i<len;i+=1){if(this.hasAttribute(arrPassThroughAttributes[i])){this.control.setAttribute(arrPassThroughAttributes[i],this.getAttribute(arrPassThroughAttributes[i])||'');}}}}}});});window.addEventListener('design-register-element',function(){registerDesignSnippet('<gs-optionbox>','<gs-optionbox>','gs-optionbox column="${1}">\n'+'    <gs-option value="${2}">${3}</gs-option>\n'+'</gs-optionbox>');designRegisterElement('gs-optionbox','/v1/dev/developer_g/greyspots-'+GS.version()+'/tools/documentation/doc-elem-optionbox.html');registerDesignSnippet('<gs-option>','<gs-option>','gs-option value="${1}">${2}</gs-option>');designRegisterElement('gs-option','/v1/dev/developer_g/greyspots-'+GS.version()+'/tools/documentation/doc-elem-optionbox.html');window.designElementProperty_GSOPTIONBOX=function(selectedElement){addProp('Column',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('column')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'column',this.value);});addProp('Value',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('value')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'value',this.value);});addProp('Column In Querystring',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('qs')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'qs',this.value,false);});addProp('Title',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('title')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'title',this.value);});addProp('Tabindex',true,'<gs-number class="target" value="'+(selectedElement.getAttribute('tabindex')||'')+'" mini></gs-number>',function(){return setOrRemoveTextAttribute(selectedElement,'tabindex',this.value);});addProp('suspend-created',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-created')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-created',this.value==='true',true);});addProp('suspend-inserted',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-inserted')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-inserted',this.value==='true',true);});strVisibilityAttribute='';if(selectedElement.hasAttribute('hidden')){strVisibilityAttribute='hidden';}
if(selectedElement.hasAttribute('hide-on-desktop')){strVisibilityAttribute='hide-on-desktop';}
if(selectedElement.hasAttribute('hide-on-tablet')){strVisibilityAttribute='hide-on-tablet';}
if(selectedElement.hasAttribute('hide-on-phone')){strVisibilityAttribute='hide-on-phone';}
if(selectedElement.hasAttribute('show-on-desktop')){strVisibilityAttribute='show-on-desktop';}
if(selectedElement.hasAttribute('show-on-tablet')){strVisibilityAttribute='show-on-tablet';}
if(selectedElement.hasAttribute('show-on-phone')){strVisibilityAttribute='show-on-phone';}
addProp('Visibility',true,'<gs-select class="target" value="'+strVisibilityAttribute+'" mini>'+'<option value="">Visible</option>'+'<option value="hidden">Invisible</option>'+'<option value="hide-on-desktop">Invisible at desktop size</option>'+'<option value="hide-on-tablet">Invisible at tablet size</option>'+'<option value="hide-on-phone">Invisible at phone size</option>'+'<option value="show-on-desktop">Visible at desktop size</option>'+'<option value="show-on-tablet">Visible at tablet size</option>'+'<option value="show-on-phone">Visible at phone size</option>'+'</gs-select>',function(){selectedElement.removeAttribute('hidden');selectedElement.removeAttribute('hide-on-desktop');selectedElement.removeAttribute('hide-on-tablet');selectedElement.removeAttribute('hide-on-phone');selectedElement.removeAttribute('show-on-desktop');selectedElement.removeAttribute('show-on-tablet');selectedElement.removeAttribute('show-on-phone');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});addProp('Disabled',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('disabled')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'disabled',this.value==='true',true);});addFlexProps(selectedElement);};window.designElementProperty_GSOPTION=function(selectedElement){addProp('Hidden Value:',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('value')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'value',this.value);});addProp('Title',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('title')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'title',this.value);});addFlexContainerProps(selectedElement);};});document.addEventListener('DOMContentLoaded',function(){'use strict';function highlightOption(element,option){var i,len,arrSelectedOptions,arrTempSelectedOptions;arrSelectedOptions=xtag.query(element,'gs-option[selected]');arrTempSelectedOptions=xtag.query(element,'gs-option[tempselect]');for(i=0,len=arrSelectedOptions.length;i<len;i+=1){arrSelectedOptions[i].removeAttribute('selected');}
for(i=0,len=arrTempSelectedOptions.length;i<len;i+=1){arrTempSelectedOptions[i].removeAttribute('tempselect');}
option.setAttribute('selected','');}
function findOptionFromString(element,strSearchString){var i,len,matchedOption,arrOptions=xtag.query(element,'gs-option');for(i=0,len=arrOptions.length;i<len;i+=1){if(arrOptions[i].getAttribute('value')===strSearchString||arrOptions[i].textContent===strSearchString){matchedOption=arrOptions[i];break;}}
return matchedOption;}
function selectOption(element,handle,bolChange){var option,strOptionValue,strOptionText;if(typeof handle==='string'){option=findOptionFromString(element,handle);if(!option){throw'gs-optionbox Error: value: \''+handle+'\' not found.';}}else{option=handle;}
highlightOption(element,option);strOptionValue=option.getAttribute('value');strOptionText=option.textContent;if(element.value!==(strOptionValue||strOptionText)){element.innerValue=strOptionValue||strOptionText;element.innerSelectedOption=option;if(bolChange){xtag.fireEvent(element,'change',{bubbles:true,cancelable:true});}}}
function handleKeyDown(event){var element=event.target,intKeyCode=event.keyCode||event.which,selectedOption,selectedOptionIndex,tempSelectedOption,tempSelectedOptionIndex,arrOptions,i,len;if(!element.hasAttribute('disabled')){if((intKeyCode===40||intKeyCode===38)&&!event.shiftKey&&!event.metaKey&&!event.ctrlKey&&!element.error){arrOptions=xtag.query(element,'gs-option');for(i=0,len=arrOptions.length;i<len;i+=1){if(arrOptions[i].hasAttribute('tempselect')){tempSelectedOptionIndex=i;tempSelectedOption=arrOptions[i];arrOptions[i].removeAttribute('tempselect');}
if(arrOptions[i].hasAttribute('selected')){selectedOptionIndex=i;selectedOption=arrOptions[i];}
if(selectedOption&&tempSelectedOption){break;}}
if(tempSelectedOption&&tempSelectedOptionIndex!==arrOptions.length-1&&intKeyCode===40){if(!arrOptions[tempSelectedOptionIndex+1].hasAttribute('selected')){arrOptions[tempSelectedOptionIndex+1].setAttribute('tempselect','');}}else if(tempSelectedOption&&tempSelectedOptionIndex!==0&&intKeyCode===38){if(!arrOptions[tempSelectedOptionIndex-1].hasAttribute('selected')){arrOptions[tempSelectedOptionIndex-1].setAttribute('tempselect','');}}else if(!tempSelectedOption&&selectedOption&&selectedOptionIndex!==arrOptions.length-1&&intKeyCode===40){if(!arrOptions[selectedOptionIndex+1].hasAttribute('selected')){arrOptions[selectedOptionIndex+1].setAttribute('tempselect','');}}else if(!tempSelectedOption&&selectedOption&&selectedOptionIndex!==0&&intKeyCode===38){if(!arrOptions[selectedOptionIndex-1].hasAttribute('selected')){arrOptions[selectedOptionIndex-1].setAttribute('tempselect','');}}else if(intKeyCode===40){if(!arrOptions[0].hasAttribute('selected')){arrOptions[0].setAttribute('tempselect','');}}else if(intKeyCode===38){if(!arrOptions[arrOptions.length-1].hasAttribute('selected')){arrOptions[arrOptions.length-1].setAttribute('tempselect','');}}
event.preventDefault();event.stopPropagation();}else if(event.keyCode===13||event.keyCode===32){selectedOption=xtag.query(element,'gs-option[selected]')[0];tempSelectedOption=xtag.query(element,'gs-option[tempselect]')[0];if(tempSelectedOption){selectOption(element,tempSelectedOption,true);}else if(selectedOption){selectOption(element,selectedOption,true);}}}else{if(event.keyCode!==9){event.preventDefault();event.stopPropagation();}}}
function getParentOption(element){var currentElement=element;while(currentElement.nodeName!=='GS-OPTION'&&currentElement.nodeName!=='HTML'){currentElement=currentElement.parentNode;}
if(currentElement.nodeName!=='GS-OPTION'){return undefined;}
return currentElement;}
function createPushReplacePopHandler(element){element.value=GS.qryGetVal(GS.getQueryString(),element.getAttribute('qs'));}
function elementCreated(element){if(!element.hasAttribute('suspend-created')){if(element.value){element.setAttribute('value',element.value);delete element.value;}}}
function elementInserted(element){if(!element.hasAttribute('suspend-created')&&!element.hasAttribute('suspend-inserted')){if(!element.inserted){element.inserted=true;var strQSValue;if(!element.hasAttribute('tabindex')){element.setAttribute('tabindex','0');}
if(element.getAttribute('value')){selectOption(element,element.getAttribute('value'),false);}
if(element.getAttribute('qs')){strQSValue=GS.qryGetVal(GS.getQueryString(),element.getAttribute('qs'));if(strQSValue!==''&&!element.getAttribute('value')){selectOption(element,strQSValue,false);}
window.addEventListener('pushstate',function(){createPushReplacePopHandler(element);});window.addEventListener('replacestate',function(){createPushReplacePopHandler(element);});window.addEventListener('popstate',function(){createPushReplacePopHandler(element);});}}}}
xtag.register('gs-optionbox',{lifecycle:{created:function(){elementCreated(this);},inserted:function(){elementInserted(this);},attributeChanged:function(strAttrName,oldValue,newValue){if(strAttrName==='suspend-created'&&newValue===null){elementCreated(this);elementInserted(this);}else if(strAttrName==='suspend-inserted'&&newValue===null){elementInserted(this);}else if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){}}},events:{'keydown':function(event){if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){handleKeyDown(event);}},'click':function(event){if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){var parentOption=getParentOption(event.target);if(parentOption&&!parentOption.hasAttribute('selected')){selectOption(this,parentOption,true);}}},'focusout':function(){if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){var selectedOption=xtag.query(this,'gs-option[selected]')[0],tempSelectedOption=xtag.query(this,'gs-option[tempselect]')[0];if(tempSelectedOption){selectOption(this,tempSelectedOption,true);}else if(selectedOption){selectOption(this,selectedOption,true);}}}},accessors:{value:{get:function(){return this.innerValue;},set:function(strNewValue){selectOption(this,strNewValue);}},selectedOption:{get:function(){return this.innerSelectedOption;},set:function(newValue){selectOption(this,newValue);}},textValue:{get:function(){return this.innerSelectedOption.textContent;},set:function(newValue){selectOption(this,newValue);}}},methods:{}});});window.addEventListener('design-register-element',function(){registerDesignSnippet('Empty <gs-page>','<gs-page>','gs-page>\n'+'    $0\n'+'</gs-page>');registerDesignSnippet('<gs-page> With Header','<gs-page>','gs-page>\n'+'    <gs-header><h3>${1}</h3></gs-header>\n'+'    <gs-body>\n'+'        $0\n'+'    </gs-body>\n'+'</gs-page>');registerDesignSnippet('Full <gs-page>','<gs-page>','gs-page>\n'+'    <gs-header><h3>${1}</h3></gs-header>\n'+'    <gs-body>\n'+'        $0\n'+'    </gs-body>\n'+'    <gs-footer>${2}</gs-footer>\n'+'</gs-page>');designRegisterElement('gs-page','/v1/dev/developer_g/greyspots-'+GS.version()+'/tools/documentation/doc-elem-page.html');window.designElementProperty_GSPAGE=function(selectedElement){addProp('Title',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('title')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'title',this.value);});addProp('suspend-created',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-created')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-created',this.value==='true',true);});addProp('suspend-inserted',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-inserted')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-inserted',this.value==='true',true);});strVisibilityAttribute='';if(selectedElement.hasAttribute('hidden')){strVisibilityAttribute='hidden';}
if(selectedElement.hasAttribute('hide-on-desktop')){strVisibilityAttribute='hide-on-desktop';}
if(selectedElement.hasAttribute('hide-on-tablet')){strVisibilityAttribute='hide-on-tablet';}
if(selectedElement.hasAttribute('hide-on-phone')){strVisibilityAttribute='hide-on-phone';}
if(selectedElement.hasAttribute('show-on-desktop')){strVisibilityAttribute='show-on-desktop';}
if(selectedElement.hasAttribute('show-on-tablet')){strVisibilityAttribute='show-on-tablet';}
if(selectedElement.hasAttribute('show-on-phone')){strVisibilityAttribute='show-on-phone';}
addProp('Visibility',true,'<gs-select class="target" value="'+strVisibilityAttribute+'" mini>'+'<option value="">Visible</option>'+'<option value="hidden">Invisible</option>'+'<option value="hide-on-desktop">Invisible at desktop size</option>'+'<option value="hide-on-tablet">Invisible at tablet size</option>'+'<option value="hide-on-phone">Invisible at phone size</option>'+'<option value="show-on-desktop">Visible at desktop size</option>'+'<option value="show-on-tablet">Visible at tablet size</option>'+'<option value="show-on-phone">Visible at phone size</option>'+'</gs-select>',function(){selectedElement.removeAttribute('hidden');selectedElement.removeAttribute('hide-on-desktop');selectedElement.removeAttribute('hide-on-tablet');selectedElement.removeAttribute('hide-on-phone');selectedElement.removeAttribute('show-on-desktop');selectedElement.removeAttribute('show-on-tablet');selectedElement.removeAttribute('show-on-phone');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});addFlexProps(selectedElement);};});document.addEventListener('DOMContentLoaded',function(){'use strict';function elementCreated(element){if(!element.hasAttribute('suspend-created')){var observer,headerElement=xtag.queryChildren(element,'gs-header')[0],footerElement=xtag.queryChildren(element,'gs-footer')[0];observer=new MutationObserver(function(mutations){element.recalculatePadding();});if(headerElement){observer.observe(headerElement,{childList:true,subtree:true});}
if(footerElement){observer.observe(footerElement,{childList:true,subtree:true});}}}
function elementInserted(element){if(!element.hasAttribute('suspend-created')&&!element.hasAttribute('suspend-inserted')){if(!element.inserted){element.inserted=true;element.recalculatePadding();window.addEventListener('load',function(){element.recalculatePadding();});window.addEventListener('resize',function(){element.recalculatePadding();});element.recalculatePadding();}}}
xtag.register('gs-page',{lifecycle:{created:function(){elementCreated(this);},inserted:function(){elementInserted(this);},attributeChanged:function(strAttrName,oldValue,newValue){if(strAttrName==='suspend-created'&&newValue===null){elementCreated(this);elementInserted(this);}else if(strAttrName==='suspend-inserted'&&newValue===null){elementInserted(this);}else if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){}}},events:{},accessors:{},methods:{recalculatePadding:function(){var headerElement=xtag.queryChildren(this,'gs-header')[0],footerElement=xtag.queryChildren(this,'gs-footer')[0];if(headerElement){this.style.paddingTop=headerElement.offsetHeight+'px';}else{this.style.paddingTop='';}
if(footerElement){this.style.paddingBottom=footerElement.offsetHeight+'px';}else{this.style.paddingBottom='';}}}});});window.addEventListener('design-register-element',function(){'use strict';registerDesignSnippet('<gs-panel>','<gs-panel>','gs-panel id="panel">\n'+'    <gs-page id="${1:left-bar}" style="width: 17em;">\n'+'        \n'+'    </gs-page>\n'+'    <gs-page>\n'+'        \n'+'    </gs-page>\n'+'</gs-panel>');designRegisterElement('gs-panel','/v1/dev/developer_g/greyspots-'+GS.version()+'/tools/documentation/doc-elem-panel.html');window.designElementProperty_GSPANEL=function(selectedElement){addProp('Dismissible By Clicking The Shadow',true,'<gs-checkbox class="target" value="'+(!selectedElement.hasAttribute('no-shadow-dismiss'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'no-shadow-dismiss',this.value==='true',false);});addProp('Dismissible On Desktop',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('dismissible')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'dismissible',this.value==='true',true);});addProp('suspend-created',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-created')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-created',this.value==='true',true);});addProp('suspend-inserted',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-inserted')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-inserted',this.value==='true',true);});};});document.addEventListener('DOMContentLoaded',function(){'use strict';function pushReplacePopHandler(element){var query=GS.getQueryString(),arrQueryKeys=GS.qryGetKeys(query),strID=element.getAttribute('id'),strAttributeName,i,len,strNewValue;for(i=0,len=arrQueryKeys.length;i<len;i+=1){if(arrQueryKeys[i].indexOf(strID+'.')===0&&element.panelIDs.indexOf(arrQueryKeys[i].split('.')[1])>-1){strAttributeName=arrQueryKeys[i].split('.')[1];strNewValue=GS.qryGetVal(query,arrQueryKeys[i]);if(element.getAttribute(strAttributeName)!==strNewValue){element.setAttribute(strAttributeName,strNewValue);}}}
for(i=0,len=element.arrQueryStringAttributes.length;i<len;i+=1){if(arrQueryKeys.indexOf(element.arrQueryStringAttributes[i])===-1){element.removeAttribute(element.arrQueryStringAttributes[i].split('.')[1]);}}}
function elementCreated(element){if(!element.hasAttribute('suspend-created')){}}
function elementInserted(element){if(!element.hasAttribute('suspend-created')&&!element.hasAttribute('suspend-inserted')){if(!element.inserted){element.inserted=true;var arrElement,i,len,blockerElement,blockerClickHandler;element.arrQueryStringAttributes=[];element.panelIDs=[];blockerClickHandler=function(event){var target=event.target;if(target.classList.contains('gs-panel-page-blocker')){element.hide(target.getAttribute('blocking'));}};arrElement=xtag.queryChildren(element,'*');for(i=0,len=arrElement.length;i<len;i+=1){if(arrElement[i].style.width===''){arrElement[i].setAttribute('flex','');}else{if(!arrElement[i].hasAttribute('id')){console.warn('gs-panel Warning: No ID attribute on side-page element:',GS.cloneElement(arrElement[i]),', please set ID the attribute');arrElement[i].setAttribute('id','side-'+GS.GUID().substring(0,8));}
element.panelIDs.push(arrElement[i].getAttribute('id'));blockerElement=document.createElement('div');blockerElement.classList.add('gs-panel-page-blocker');blockerElement.setAttribute('gs-dynamic','');blockerElement.setAttribute('blocking',arrElement[i].getAttribute('id'));blockerElement.setAttribute('id',arrElement[i].getAttribute('id')+'-blocker');element.insertBefore(blockerElement,arrElement[i]);arrElement[i].setAttribute('panel-set-width','');if(arrElement[i].hasAttribute('hidden')){arrElement[i].removeAttribute('hidden');element.hide(arrElement[i].getAttribute('id'));}else{if(element.getAttribute(arrElement[i].getAttribute('id'))==='hide'){element.hide(arrElement[i].getAttribute('id'));}}
if(!element.hasAttribute('no-shadow-dismiss')){blockerElement.addEventListener('click',blockerClickHandler);}}}
window.addEventListener('pushstate',function(){pushReplacePopHandler(element);});window.addEventListener('replacestate',function(){pushReplacePopHandler(element);});window.addEventListener('popstate',function(){pushReplacePopHandler(element);});if(element.hasAttribute('id')){pushReplacePopHandler(element);}}}}
xtag.register('gs-panel',{lifecycle:{created:function(){elementCreated(this);},inserted:function(){elementInserted(this);},attributeChanged:function(strAttrName,oldValue,newValue){if(strAttrName==='suspend-created'&&newValue===null){elementCreated(this);elementInserted(this);}else if(strAttrName==='suspend-inserted'&&newValue===null){elementInserted(this);}else if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){if(document.getElementById(strAttrName)&&document.getElementById(strAttrName).parentNode===this){if(newValue==='hide'||newValue==='show'){this[newValue](strAttrName);}
/*if (newValue === 'hide') {
                            this.hide(strAttrName);
                        } else if (newValue === 'show') {
                            this.show(strAttrName);
                        }*/}}}},events:{},accessors:{},methods:{'show':function(strID){var strQueryString=GS.getQueryString(),strElementID=this.getAttribute('id');if((strElementID&&GS.qryGetKeys(strQueryString).indexOf(strElementID+'.'+strID)>-1)&&GS.qryGetVal(strQueryString,strElementID+'.'+strID)==='hide'){GS.pushQueryString(strElementID+'.'+strID+'=show');}else if(this.getAttribute(strID)==='show'){document.getElementById(strID).removeAttribute('panel-hide');document.getElementById(strID+'-blocker').removeAttribute('panel-hide');GS.triggerEvent(window,'resize');}else{this.setAttribute(strID,'show');}},'hide':function(strID){var strQueryString=GS.getQueryString(),strElementID=this.getAttribute('id');if((strElementID&&GS.qryGetKeys(strQueryString).indexOf(strElementID+'.'+strID)>-1)&&GS.qryGetVal(strQueryString,strElementID+'.'+strID)==='show'){GS.pushQueryString(strElementID+'.'+strID+'=hide');}else if(this.getAttribute(strID)==='hide'){document.getElementById(strID).setAttribute('panel-hide','');document.getElementById(strID+'-blocker').setAttribute('panel-hide','');GS.triggerEvent(window,'resize');}else{this.setAttribute(strID,'hide');}},'toggle':function(strID){var element=document.getElementById(strID);if(element.hasAttribute('shown')||!element.hasAttribute('panel-hide')){this.hide(strID);}else{this.show(strID);}}}});});window.addEventListener('design-register-element',function(){'use strict';registerDesignSnippet('Push Message','GS.pushMessage','pushMessage(\'${1:HTML}\', ${2:1500}, function () {${3}});');});GS.pushMessage=function(strHTML,intTime,callback){var pushMessageElement,containerElement;if(strHTML===undefined){throw'GS.pushMessage Error: no HTML to display.';}
if(document.getElementsByTagName('gs-pushmessage-container').length===0){containerElement=document.createElement('gs-pushmessage-container');containerElement.setAttribute('gs-dynamic','');document.body.appendChild(containerElement);}else{containerElement=document.getElementsByTagName('gs-pushmessage-container')[0];}
pushMessageElement=document.createElement('gs-pushmessage');pushMessageElement.setAttribute('gs-dynamic','');pushMessageElement.innerHTML=strHTML;containerElement.appendChild(pushMessageElement);if(typeof callback==='function'){callback.apply(pushMessageElement);}
if(intTime){setTimeout(function(){GS.closePushMessage(pushMessageElement);},intTime);}
return pushMessageElement;};window.addEventListener('design-register-element',function(){'use strict';registerDesignSnippet('GS.closePushMessage','GS.closePushMessage','GS.closePushMessage(${0:pushMessageElement});');registerDesignSnippet('Close Push Message','Close Push Message','GS.closePushMessage(${0:pushMessageElement});');});GS.closePushMessage=function(pushMessageElement){var containerElement=document.getElementsByTagName('gs-pushmessage-container')[0];GS.animateStyle(pushMessageElement,'opacity','1','0',function(){if(document.getElementsByTagName('gs-pushmessage').length===1){document.body.removeChild(containerElement);}else{containerElement.removeChild(pushMessageElement);}},250,100);};document.addEventListener('DOMContentLoaded',function(){xtag.register('gs-pushmessage',{lifecycle:{},events:{},accessors:{},methods:{}});xtag.register('gs-pushmessage-container',{lifecycle:{},events:{},accessors:{},methods:{}});});window.addEventListener('design-register-element',function(){registerDesignSnippet('<gs-search>','<gs-search>','gs-search id="${1}"></gs-search>');designRegisterElement('gs-search','/v1/dev/developer_g/greyspots-'+GS.version()+'/tools/documentation/doc-elem-search.html');window.designElementProperty_GSSEARCH=function(selectedElement){addProp('Placeholder',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('placeholder')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'placeholder',this.value);});addProp('Mini',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('mini'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'mini',(this.value==='true'),true);});addProp('Title',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('title')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'title',this.value);});addProp('suspend-created',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-created')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-created',this.value==='true',true);});addProp('suspend-inserted',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-inserted')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-inserted',this.value==='true',true);});strVisibilityAttribute='';if(selectedElement.hasAttribute('hidden')){strVisibilityAttribute='hidden';}
if(selectedElement.hasAttribute('hide-on-desktop')){strVisibilityAttribute='hide-on-desktop';}
if(selectedElement.hasAttribute('hide-on-tablet')){strVisibilityAttribute='hide-on-tablet';}
if(selectedElement.hasAttribute('hide-on-phone')){strVisibilityAttribute='hide-on-phone';}
if(selectedElement.hasAttribute('show-on-desktop')){strVisibilityAttribute='show-on-desktop';}
if(selectedElement.hasAttribute('show-on-tablet')){strVisibilityAttribute='show-on-tablet';}
if(selectedElement.hasAttribute('show-on-phone')){strVisibilityAttribute='show-on-phone';}
addProp('Visibility',true,'<gs-select class="target" value="'+strVisibilityAttribute+'" mini>'+'<option value="">Visible</option>'+'<option value="hidden">Invisible</option>'+'<option value="hide-on-desktop">Invisible at desktop size</option>'+'<option value="hide-on-tablet">Invisible at tablet size</option>'+'<option value="hide-on-phone">Invisible at phone size</option>'+'<option value="show-on-desktop">Visible at desktop size</option>'+'<option value="show-on-tablet">Visible at tablet size</option>'+'<option value="show-on-phone">Visible at phone size</option>'+'</gs-select>',function(){selectedElement.removeAttribute('hidden');selectedElement.removeAttribute('hide-on-desktop');selectedElement.removeAttribute('hide-on-tablet');selectedElement.removeAttribute('hide-on-phone');selectedElement.removeAttribute('show-on-desktop');selectedElement.removeAttribute('show-on-tablet');selectedElement.removeAttribute('show-on-phone');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});addProp('Disabled',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('disabled')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'disabled',this.value==='true',true);});addFlexProps(selectedElement);};});document.addEventListener('DOMContentLoaded',function(){'use strict';var singleLineTemplateElement=document.createElement('template'),singleLineTemplate;singleLineTemplateElement.innerHTML='<input class="control" gs-dynamic type="text" placeholder="Search..." />';singleLineTemplate=singleLineTemplateElement.content;function changeFunction(event){event.preventDefault();event.stopPropagation();GS.triggerEvent(event.target.parentNode,'change');}
function focusFunction(event){GS.triggerEvent(event.target.parentNode,'focus');}
function loadPushReplacePopHandler(element){element.value=GS.qryGetVal(GS.getQueryString(),element.getAttribute('qs')||element.getAttribute('id'));}
function elementCreated(element){if(!element.hasAttribute('suspend-created')){}}
function elementInserted(element){if(!element.hasAttribute('suspend-created')&&!element.hasAttribute('suspend-inserted')){if(!element.inserted){element.inserted=true;if(element.hasAttribute('tabindex')){element.oldTabIndex=element.getAttribute('tabindex');element.removeAttribute('tabindex');}
element.refresh();loadPushReplacePopHandler(element);window.addEventListener('pushstate',function(){loadPushReplacePopHandler(element);});window.addEventListener('replacestate',function(){loadPushReplacePopHandler(element);});window.addEventListener('popstate',function(){loadPushReplacePopHandler(element);});}}}
xtag.register('gs-search',{lifecycle:{created:function(){elementCreated(this);},inserted:function(){elementInserted(this);},attributeChanged:function(strAttrName,oldValue,newValue){if(strAttrName==='suspend-created'&&newValue===null){elementCreated(this);elementInserted(this);}else if(strAttrName==='suspend-inserted'&&newValue===null){elementInserted(this);}else if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){if(strAttrName==='disabled'){this.refresh();}}}},events:{keydown:function(event){if(this.hasAttribute('disabled')&&event.keyCode!==9){event.preventDefault();event.stopPropagation();}else{this.syncView();}},keyup:function(){this.syncView();},change:function(){var strQueryString=GS.getQueryString(),strColumn=(this.getAttribute('qs')||this.getAttribute('id'));if((GS.qryGetVal(strQueryString,strColumn)||'')!==(this.control.value||'')){GS.pushQueryString(strColumn+'='+encodeURIComponent(this.control.value));}}},accessors:{value:{get:function(){if(this.control){return this.control.value;}else{return this.innerHTML;}},set:function(strNewValue){if(this.control){this.control.value=strNewValue;}else{this.innerHTML=strNewValue;}
this.syncView();}}},methods:{focus:function(){if(this.control){this.control.focus();}},refresh:function(){var element=this,arrPassThroughAttributes,i,len;this.innerHTML='';this.appendChild(singleLineTemplate.cloneNode(true));if(this.oldTabIndex){xtag.query(this,'.control')[0].setAttribute('tabindex',this.oldTabIndex);}
element.control=xtag.query(element,'.control')[0];element.control.removeEventListener('change',changeFunction);element.control.addEventListener('change',changeFunction);element.control.removeEventListener('focus',focusFunction);element.control.addEventListener('focus',focusFunction);if(element.hasAttribute('value')){element.control.value=element.getAttribute('value');}
arrPassThroughAttributes=['placeholder','name','type','maxlength','autocorrect','autocapitalize','autocomplete','autofocus'];for(i=0,len=arrPassThroughAttributes.length;i<len;i+=1){if(element.hasAttribute(arrPassThroughAttributes[i])){element.control.setAttribute(arrPassThroughAttributes[i],element.getAttribute(arrPassThroughAttributes[i])||'');}}},syncView:function(){if(this.control){this.setAttribute('value',this.control.value);}else{this.innerHTML=this.control.value;}}}});});window.addEventListener('design-register-element',function(){registerDesignSnippet('<gs-select>','<gs-select>','gs-select>\n'+'    <option>${0}</option>\n'+'</gs-select>');designRegisterElement('gs-select','/v1/dev/developer_g/greyspots-'+GS.version()+'/tools/documentation/doc-elem-select.html');window.designElementProperty_GSSELECT=function(selectedElement){addProp('Column',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('column')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'column',this.value);});addProp('Value',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('value')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'value',this.value);});addProp('Mini',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('mini'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'mini',(this.value==='true'),true);});addProp('Title',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('title')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'title',this.value);});addProp('Tabindex',true,'<gs-number class="target" value="'+(selectedElement.getAttribute('tabindex')||'')+'" mini></gs-number>',function(){return setOrRemoveTextAttribute(selectedElement,'tabindex',this.value);});addProp('suspend-created',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-created')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-created',this.value==='true',true);});addProp('suspend-inserted',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-inserted')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-inserted',this.value==='true',true);});strVisibilityAttribute='';if(selectedElement.hasAttribute('hidden')){strVisibilityAttribute='hidden';}
if(selectedElement.hasAttribute('hide-on-desktop')){strVisibilityAttribute='hide-on-desktop';}
if(selectedElement.hasAttribute('hide-on-tablet')){strVisibilityAttribute='hide-on-tablet';}
if(selectedElement.hasAttribute('hide-on-phone')){strVisibilityAttribute='hide-on-phone';}
if(selectedElement.hasAttribute('show-on-desktop')){strVisibilityAttribute='show-on-desktop';}
if(selectedElement.hasAttribute('show-on-tablet')){strVisibilityAttribute='show-on-tablet';}
if(selectedElement.hasAttribute('show-on-phone')){strVisibilityAttribute='show-on-phone';}
addProp('Visibility',true,'<gs-select class="target" value="'+strVisibilityAttribute+'" mini>'+'<option value="">Visible</option>'+'<option value="hidden">Invisible</option>'+'<option value="hide-on-desktop">Invisible at desktop size</option>'+'<option value="hide-on-tablet">Invisible at tablet size</option>'+'<option value="hide-on-phone">Invisible at phone size</option>'+'<option value="show-on-desktop">Visible at desktop size</option>'+'<option value="show-on-tablet">Visible at tablet size</option>'+'<option value="show-on-phone">Visible at phone size</option>'+'</gs-select>',function(){selectedElement.removeAttribute('hidden');selectedElement.removeAttribute('hide-on-desktop');selectedElement.removeAttribute('hide-on-tablet');selectedElement.removeAttribute('hide-on-phone');selectedElement.removeAttribute('show-on-desktop');selectedElement.removeAttribute('show-on-tablet');selectedElement.removeAttribute('show-on-phone');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});addProp('Disabled',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('disabled')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'disabled',this.value==='true',true);});addFlexProps(selectedElement);};});document.addEventListener('DOMContentLoaded',function(){'use strict';var templateElement=document.createElement('template'),template;templateElement.innerHTML='<select class="control" gs-dynamic></select>';template=templateElement.content;function changeFunction(event){event.preventDefault();event.stopPropagation();GS.triggerEvent(event.target.parentNode,'change');}
function focusFunction(event){GS.triggerEvent(event.target.parentNode,'focus');}
function createPushReplacePopHandler(element){element.value=GS.qryGetVal(GS.getQueryString(),element.getAttribute('qs'));}
function elementCreated(element){if(!element.hasAttribute('suspend-created')){var strValue=element.value,observer;if(strValue){element.setAttribute('value',strValue);delete element.value;}
observer=new MutationObserver(function(mutations){var bolRefreshOptionList=true;mutations.forEach(function(mutation){var i,len;for(i=0,len=mutation.addedNodes.length;i<len;i+=1){if(mutation.addedNodes[i].nodeName!=='OPTION'&&mutation.addedNodes[i].nodeName!=='OPTGROUP'){bolRefreshOptionList=false;}}});if(bolRefreshOptionList){element.refreshOptionList();}});observer.observe(element,{childList:true});}}
function elementInserted(element){if(!element.hasAttribute('suspend-created')&&!element.hasAttribute('suspend-inserted')){if(!element.inserted){element.inserted=true;var strQSValue;if(element.hasAttribute('tabindex')){element.oldTabIndex=element.getAttribute('tabindex');element.removeAttribute('tabindex');}
element.refreshOptionList();element.control.addEventListener('change',changeFunction);element.control.addEventListener('focus',focusFunction);if(element.getAttribute('value')){element.value=element.getAttribute('value');}
if(element.getAttribute('qs')){strQSValue=GS.qryGetVal(GS.getQueryString(),element.getAttribute('qs'));if(strQSValue!==''||!element.getAttribute('value')){element.value=strQSValue;}
window.addEventListener('pushstate',function(){createPushReplacePopHandler(element);});window.addEventListener('replacestate',function(){createPushReplacePopHandler(element);});window.addEventListener('popstate',function(){createPushReplacePopHandler(element);});}
element.addEventListener('keydown',function(event){if(event.keycode===GS.keyCode('space')||event.keycode===GS.keyCode('down')||event.keycode===GS.keyCode('up')){}});}}}
xtag.register('gs-select',{lifecycle:{created:function(){elementCreated(this);},inserted:function(){elementInserted(this);},attributeChanged:function(strAttrName,oldValue,newValue){if(strAttrName==='suspend-created'&&newValue===null){elementCreated(this);elementInserted(this);}else if(strAttrName==='suspend-inserted'&&newValue===null){elementInserted(this);}else if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){}}},events:{},accessors:{value:{get:function(){if(this.control){return this.control.value;}else if(this.getAttribute('value')){return this.getAttribute('value');}
return undefined;},set:function(newValue){this.setAttribute('value',newValue);this.control.value=newValue;}},textValue:{get:function(){return this.control.options[this.control.selectedIndex].text;},set:function(newValue){this.setAttribute('value',newValue);this.control.value=newValue;}}},methods:{focus:function(){this.control.focus();},refreshOptionList:function(){var i,len,elementsToMove,oldvalue,arrChildren,controlElement;arrChildren=this.children;for(i=arrChildren.length-1;i>-1;i-=1){if(arrChildren[i].nodeName!=='OPTION'&&arrChildren[i].nodeName!=='OPTGROUP'&&arrChildren[i].nodeName!=='SELECT'&&arrChildren[i].classList.contains('control')){this.removeChild(arrChildren[i]);}}
controlElement=xtag.queryChildren(this,'.control')[0];if(controlElement){oldvalue=controlElement.value;this.oldcontrol=controlElement;controlElement.classList.remove('control');}
this.appendChild(template.cloneNode(true));this.control=xtag.query(this,'.control')[0];if(this.oldcontrol){elementsToMove=xtag.queryChildren(this.oldcontrol,'option, optgroup');for(i=0,len=elementsToMove.length;i<len;i+=1){elementsToMove[i].setAttribute('gs-hidden','');this.control.appendChild(elementsToMove[i]);}}
elementsToMove=xtag.queryChildren(this,'option, optgroup');for(i=0,len=elementsToMove.length;i<len;i+=1){this.control.appendChild(elementsToMove[i]);}
if(this.oldcontrol){if(this.oldcontrol.parentNode===this){this.removeChild(this.oldcontrol);}
this.oldcontrol=undefined;this.control.value=this.getAttribute('value')||oldvalue;}else if(this.hasAttribute('value')){this.control.value=this.getAttribute('value');}
if(this.oldTabIndex){this.control.setAttribute('tabindex',this.oldTabIndex);}}}});});window.addEventListener('design-register-element',function(){registerDesignSnippet('<gs-static>','<gs-static>','gs-static column="${1:name}"></gs-static>');designRegisterElement('gs-static','/v1/dev/developer_g/greyspots-'+GS.version()+'/tools/documentation/doc-elem-static.html');window.designElementProperty_GSSTATIC=function(selectedElement){addProp('Formatted&nbsp;Text',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('pre'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'pre',(this.value==='true'),true);});addProp('Column',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('column')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'column',this.value);});addProp('Value',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('value')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'value',this.value);});addProp('Column In Querystring',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('qs')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'qs',this.value,false);});addProp('Inline',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('inline'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'inline',(this.value==='true'),true);});addProp('Mini',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('mini'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'mini',(this.value==='true'),true);});addProp('Title',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('title')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'title',this.value);});addProp('suspend-created',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-created')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-created',this.value==='true',true);});addProp('suspend-inserted',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-inserted')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-inserted',this.value==='true',true);});strVisibilityAttribute='';if(selectedElement.hasAttribute('hidden')){strVisibilityAttribute='hidden';}
if(selectedElement.hasAttribute('hide-on-desktop')){strVisibilityAttribute='hide-on-desktop';}
if(selectedElement.hasAttribute('hide-on-tablet')){strVisibilityAttribute='hide-on-tablet';}
if(selectedElement.hasAttribute('hide-on-phone')){strVisibilityAttribute='hide-on-phone';}
if(selectedElement.hasAttribute('show-on-desktop')){strVisibilityAttribute='show-on-desktop';}
if(selectedElement.hasAttribute('show-on-tablet')){strVisibilityAttribute='show-on-tablet';}
if(selectedElement.hasAttribute('show-on-phone')){strVisibilityAttribute='show-on-phone';}
addProp('Visibility',true,'<gs-select class="target" value="'+strVisibilityAttribute+'" mini>'+'<option value="">Visible</option>'+'<option value="hidden">Invisible</option>'+'<option value="hide-on-desktop">Invisible at desktop size</option>'+'<option value="hide-on-tablet">Invisible at tablet size</option>'+'<option value="hide-on-phone">Invisible at phone size</option>'+'<option value="show-on-desktop">Visible at desktop size</option>'+'<option value="show-on-tablet">Visible at tablet size</option>'+'<option value="show-on-phone">Visible at phone size</option>'+'</gs-select>',function(){selectedElement.removeAttribute('hidden');selectedElement.removeAttribute('hide-on-desktop');selectedElement.removeAttribute('hide-on-tablet');selectedElement.removeAttribute('hide-on-phone');selectedElement.removeAttribute('show-on-desktop');selectedElement.removeAttribute('show-on-tablet');selectedElement.removeAttribute('show-on-phone');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});addFlexProps(selectedElement);};});document.addEventListener('DOMContentLoaded',function(){'use strict';function createPushReplacePopHandler(element){element.value=GS.qryGetVal(GS.getQueryString(),element.getAttribute('qs'));}
function elementCreated(element){if(!element.hasAttribute('suspend-created')){if(element.value&&!element.hasAttribute('value')){element.setAttribute('value',element.value);delete element.value;}}}
function elementInserted(element){if(!element.hasAttribute('suspend-created')&&!element.hasAttribute('suspend-inserted')){if(!element.inserted){element.inserted=true;var strQSValue;element.refresh();if(element.getAttribute('qs')){strQSValue=GS.qryGetVal(GS.getQueryString(),element.getAttribute('qs'));if(strQSValue!==''||!element.getAttribute('value')){element.value=strQSValue;}
window.addEventListener('pushstate',function(){createPushReplacePopHandler(element);});window.addEventListener('replacestate',function(){createPushReplacePopHandler(element);});window.addEventListener('popstate',function(){createPushReplacePopHandler(element);});}}}}
xtag.register('gs-static',{lifecycle:{created:function(){elementCreated(this);},inserted:function(){elementInserted(this);},attributeChanged:function(strAttrName,oldValue,newValue){if(strAttrName==='suspend-created'&&newValue===null){elementCreated(this);elementInserted(this);}else if(strAttrName==='suspend-inserted'&&newValue===null){elementInserted(this);}else if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){this.refresh();}}},events:{},accessors:{value:{get:function(){return this.getAttribute('value');},set:function(strNewValue){this.setAttribute('value',strNewValue);}}},methods:{refresh:function(){this.innerHTML=this.getAttribute('value');}}});});window.addEventListener('design-register-element',function(){'use strict';registerDesignSnippet('<gs-switch>','<gs-switch>','gs-switch>\n'+'    <template for="${1:none}"></template>\n'+'    <template for="${2:detail}"></template>\n'+'</gs-switch>');designRegisterElement('gs-switch','/v1/dev/developer_g/greyspots-'+GS.version()+'/tools/documentation/doc-elem-switch.html');window.designElementProperty_GSSWITCH=function(selectedElement){addFlexContainerProps(selectedElement);addFlexProps(selectedElement);addProp('Value',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('value')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'value',this.value);});addProp('Refresh On Querystring Columns',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('refresh-on-querystring-values')||'')+'" mini></gs-text>',function(){this.removeAttribute('refresh-on-querystring-change');return setOrRemoveTextAttribute(selectedElement,'refresh-on-querystring-values',this.value);});addProp('Refresh On Querystring Change',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('refresh-on-querystring-change'))+'" mini></gs-checkbox>',function(){this.removeAttribute('refresh-on-querystring-values');return setOrRemoveBooleanAttribute(selectedElement,'refresh-on-querystring-change',this.value==='true',true);});addProp('suspend-created',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-created')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-created',this.value==='true',true);});addProp('suspend-inserted',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-inserted')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-inserted',this.value==='true',true);});};});document.addEventListener('DOMContentLoaded',function(){'use strict';function subsafeTemplate(strTemplate){var templateElement=document.createElement('template'),strID,arrTemplates,i,len,jsnTemplates,strRet;templateElement.innerHTML=strTemplate;i=0;arrTemplates=xtag.query(templateElement.content,'template');jsnTemplates={};while(arrTemplates.length>0&&i<100){if(arrTemplates[0].parentNode&&arrTemplates[0].parentNode.hasAttribute&&(arrTemplates[0].parentNode.hasAttribute('src')||arrTemplates[0].parentNode.hasAttribute('source'))){strID='UNIqUE_PLaCEhOLDER-'+GS.GUID()+'-UNiQUE_PLaCEhOLdER';jsnTemplates[strID]=arrTemplates[0].outerHTML;arrTemplates[0].outerHTML=strID;}else if(arrTemplates[0].content){arrTemplates.push.apply(arrTemplates,xtag.query(arrTemplates[0].content,'template'));}
arrTemplates.splice(0,1);i+=1;}
strRet=doT.template('{{##def.snippet:\n'+'    {{ var qs = GS.qryToJSON(GS.getQueryString()); }} {{# def.template }}\n'+'#}}\n'+'{{#def.snippet}}',null,{"template":templateElement.innerHTML})();for(strID in jsnTemplates){strRet=strRet.replace(new RegExp(strID,'g'),jsnTemplates[strID].replace(/\$/g,'$$$$'));}
return strRet;}
function querystringTemplate(strTemplate){var strWrapperTemplate='{{##def.snippet:\n'+'    {{ var qs = GS.qryToJSON(GS.getQueryString()); }} {{# def.template }}\n'+'#}}\n'+'{{#def.snippet}}';return doT.template(strWrapperTemplate,null,{'template':strTemplate})().trim();}
function pushReplacePopHandler(element){var i,len,arrPopKeys=[],bolRefresh=false,strQueryString=GS.getQueryString(),currentValue;if(element.hasAttribute('refresh-on-querystring-values')||element.hasAttribute('qs')){if(element.hasAttribute('refresh-on-querystring-values')){arrPopKeys=element.getAttribute('refresh-on-querystring-values').split(/\s*,\s*/gim);}
if(element.hasAttribute('qs')){GS.listAdd(arrPopKeys,element.getAttribute('qs'));}
for(i=0,len=arrPopKeys.length;i<len;i+=1){currentValue=GS.qryGetVal(strQueryString,arrPopKeys[i]);if(element.popValues[arrPopKeys[i]]!==currentValue){bolRefresh=true;}
element.popValues[arrPopKeys[i]]=currentValue;}}else{bolRefresh=true;}
if(bolRefresh){element.refresh();}}
function elementCreated(element){if(!element.hasAttribute('suspend-created')){}}
function elementInserted(element){if(!element.hasAttribute('suspend-created')&&!element.hasAttribute('suspend-inserted')){if(!element.inserted){element.inserted=true;var arrTemplate=xtag.queryChildren(element,'template'),i,len,attr_i,attr_len,arrAttrNames,arrAttrValues,strAttrName,root,template;element.attributesFromTemplate=[];element.templates={};for(i=0,len=arrTemplate.length;i<len;i+=1){if(i===0){element.firstTemplate=arrTemplate[i].getAttribute('for')||arrTemplate[i].getAttribute('id');}
arrAttrNames=[];arrAttrValues=[];for(attr_i=0,attr_len=arrTemplate[i].attributes.length;attr_i<attr_len;attr_i+=1){strAttrName=arrTemplate[i].attributes[attr_i].nodeName;if(strAttrName!=='for'&&strAttrName!=='id'){arrAttrNames.push(strAttrName);arrAttrValues.push(arrTemplate[i].attributes[attr_i].value);}}
template=arrTemplate[i];element.templates[template.getAttribute('for')||template.getAttribute('id')]={'content':template.innerHTML,'arrAttrNames':arrAttrNames,'arrAttrValues':arrAttrValues,'templated':!(element.hasAttribute('static')||template.hasAttribute('static'))};}
element.innerHTML='';element.arrQueryStringAttributes=[];element.popValues={};if((element.hasAttribute('value')&&element.getAttribute('value').indexOf('{{')>-1)||element.hasAttribute('qs')||element.hasAttribute('refresh-on-querystring-values')||element.hasAttribute('refresh-on-querystring-change')){window.addEventListener('pushstate',function(){pushReplacePopHandler(element);});window.addEventListener('replacestate',function(){pushReplacePopHandler(element);});window.addEventListener('popstate',function(){pushReplacePopHandler(element);});}
element.refresh();}}}
xtag.register('gs-switch',{lifecycle:{created:function(){elementCreated(this);},inserted:function(){elementInserted(this);},attributeChanged:function(strAttrName,oldValue,newValue){if(strAttrName==='suspend-created'&&newValue===null){elementCreated(this);elementInserted(this);}else if(strAttrName==='suspend-inserted'&&newValue===null){elementInserted(this);}else if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){if(strAttrName==='value'){this.refresh();}}}},events:{},accessors:{value:{get:function(){return this.getAttribute('value');},set:function(newValue){this.setAttribute('value',newValue);}}},methods:{refresh:function(){var strQueryString=GS.getQueryString(),strQSAttribute=this.getAttribute('qs'),strValueAttribute=this.getAttribute('value'),templateName,i,len;if(strQSAttribute&&GS.qryGetVal(strQueryString,strQSAttribute)){templateName=GS.qryGetVal(strQueryString,strQSAttribute);}else if(strValueAttribute){templateName=querystringTemplate(strValueAttribute);}
templateName=templateName||this.firstTemplate;if(this.templates[templateName]&&this.templates[templateName].content){if(this.attributesFromTemplate.length>0){for(i=0,len=this.attributesFromTemplate.length;i<len;i+=1){if(this.attributesFromTemplate[i].initallySet){this.setAttribute(this.attributesFromTemplate[i].name,this.attributesFromTemplate[i].initalValue);}else{this.removeAttribute(this.attributesFromTemplate[i].name);}}}
this.attributesFromTemplate=[];if(this.templates[templateName].arrAttrNames.length>0){for(i=0,len=this.templates[templateName].arrAttrNames.length;i<len;i+=1){this.attributesFromTemplate.push({'name':this.templates[templateName].arrAttrNames[i],'initallySet':this.hasAttribute(this.templates[templateName].arrAttrNames[i]),'initalValue':this.getAttribute(this.templates[templateName].arrAttrNames[i])});this.setAttribute(this.templates[templateName].arrAttrNames[i],querystringTemplate(this.templates[templateName].arrAttrValues[i]));}}
if(this.templates[templateName].templated){this.innerHTML=subsafeTemplate(this.templates[templateName].content);}else{this.innerHTML=this.templates[templateName].content;}
if(shimmed.HTMLTemplateElement){HTMLTemplateElement.bootstrap(this);}
GS.triggerEvent(this,'templatechange',{'templateName':templateName});}else{this.innerHTML='';}}}});});window.addEventListener('design-register-element',function(){registerDesignSnippet('<gs-text>','<gs-text>','gs-text column="${1:name}"></gs-text>');registerDesignSnippet('<gs-text> With Label','<gs-text>','label for="${1:text-insert-last_name}">${2:Last Name}:</label>\n'+'<gs-text id="${1:text-insert-last_name}" column="${3:last_name}"></gs-text>');designRegisterElement('gs-text','/v1/dev/developer_g/greyspots-'+GS.version()+'/tools/documentation/doc-elem-text.html');window.designElementProperty_GSTEXT=function(selectedElement){addProp('Column',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('column')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'column',this.value);});addProp('Value',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('value')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'value',this.value);});addProp('Column In Querystring',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('qs')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'qs',this.value,false);});addProp('Placeholder',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('placeholder')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'placeholder',this.value);});addProp('Mini',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('mini'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'mini',(this.value==='true'),true);});addProp('Title',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('title')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'title',this.value);});addProp('Tabindex',true,'<gs-number class="target" value="'+(selectedElement.getAttribute('tabindex')||'')+'" mini></gs-number>',function(){return setOrRemoveTextAttribute(selectedElement,'tabindex',this.value);});addProp('Autocorrect',true,'<gs-checkbox class="target" value="'+(selectedElement.getAttribute('autocorrect')!=='off')+'" mini></gs-checkbox>',function(){return setOrRemoveTextAttribute(selectedElement,'autocorrect',(this.value==='false'?'off':''));});addProp('Autocapitalize',true,'<gs-checkbox class="target" value="'+(selectedElement.getAttribute('autocapitalize')!=='off')+'" mini></gs-checkbox>',function(){return setOrRemoveTextAttribute(selectedElement,'autocapitalize',(this.value==='false'?'off':''));});addProp('Autocomplete',true,'<gs-checkbox class="target" value="'+(selectedElement.getAttribute('autocomplete')!=='off')+'" mini></gs-checkbox>',function(){return setOrRemoveTextAttribute(selectedElement,'autocomplete',(this.value==='false'?'off':''));});addProp('suspend-created',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-created')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-created',this.value==='true',true);});addProp('suspend-inserted',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-inserted')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-inserted',this.value==='true',true);});strVisibilityAttribute='';if(selectedElement.hasAttribute('hidden')){strVisibilityAttribute='hidden';}
if(selectedElement.hasAttribute('hide-on-desktop')){strVisibilityAttribute='hide-on-desktop';}
if(selectedElement.hasAttribute('hide-on-tablet')){strVisibilityAttribute='hide-on-tablet';}
if(selectedElement.hasAttribute('hide-on-phone')){strVisibilityAttribute='hide-on-phone';}
if(selectedElement.hasAttribute('show-on-desktop')){strVisibilityAttribute='show-on-desktop';}
if(selectedElement.hasAttribute('show-on-tablet')){strVisibilityAttribute='show-on-tablet';}
if(selectedElement.hasAttribute('show-on-phone')){strVisibilityAttribute='show-on-phone';}
addProp('Visibility',true,'<gs-select class="target" value="'+strVisibilityAttribute+'" mini>'+'<option value="">Visible</option>'+'<option value="hidden">Invisible</option>'+'<option value="hide-on-desktop">Invisible at desktop size</option>'+'<option value="hide-on-tablet">Invisible at tablet size</option>'+'<option value="hide-on-phone">Invisible at phone size</option>'+'<option value="show-on-desktop">Visible at desktop size</option>'+'<option value="show-on-tablet">Visible at tablet size</option>'+'<option value="show-on-phone">Visible at phone size</option>'+'</gs-select>',function(){selectedElement.removeAttribute('hidden');selectedElement.removeAttribute('hide-on-desktop');selectedElement.removeAttribute('hide-on-tablet');selectedElement.removeAttribute('hide-on-phone');selectedElement.removeAttribute('show-on-desktop');selectedElement.removeAttribute('show-on-tablet');selectedElement.removeAttribute('show-on-phone');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});addProp('Disabled',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('disabled')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'disabled',this.value==='true',true);});addFlexProps(selectedElement);};});document.addEventListener('DOMContentLoaded',function(){'use strict';function changeFunction(event){event.preventDefault();event.stopPropagation();event.stopImmediatePropagation();event.target.parentNode.syncGetters();GS.triggerEvent(event.target.parentNode,'change');return false;}
function focusFunction(event){GS.triggerEvent(event.target.parentNode,'focus');}
function blurFunction(event){GS.triggerEvent(event.target.parentNode,'blur');}
function createPushReplacePopHandler(element){element.value=GS.qryGetVal(GS.getQueryString(),element.getAttribute('qs'));}
function elementCreated(element){if(!element.hasAttribute('suspend-created')){if(element.value){element.setAttribute('value',element.value);delete element.value;}}}
function elementInserted(element){if(!element.hasAttribute('suspend-created')&&!element.hasAttribute('suspend-inserted')){if(!element.inserted){element.inserted=true;var strQSValue;element.handleContents();element.syncView();if(element.getAttribute('qs')){strQSValue=GS.qryGetVal(GS.getQueryString(),element.getAttribute('qs'));if(strQSValue!==''||!element.getAttribute('value')){element.value=strQSValue;}
window.addEventListener('pushstate',function(){createPushReplacePopHandler(element);});window.addEventListener('replacestate',function(){createPushReplacePopHandler(element);});window.addEventListener('popstate',function(){createPushReplacePopHandler(element);});}
if(element.innerHTML.trim()===''){element.handleContents();element.syncView();}}}}
xtag.register('gs-text',{lifecycle:{created:function(){elementCreated(this);},inserted:function(){elementInserted(this);},attributeChanged:function(strAttrName,oldValue,newValue){if(strAttrName==='suspend-created'&&newValue===null){elementCreated(this);elementInserted(this);}else if(strAttrName==='suspend-inserted'&&newValue===null){elementInserted(this);}else if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){var currentValue;if(strAttrName==='disabled'){this.handleContents();this.syncView();}else if(strAttrName==='value'&&this.initalized){if(this.hasAttribute('disabled')){currentValue=this.innerHTML;}else{currentValue=this.control.value;}
if(newValue!==currentValue){this.syncView();}}}}},events:{'keydown':function(event){if(this.hasAttribute('disabled')&&event.keyCode!==9){event.preventDefault();event.stopPropagation();}else{this.syncGetters();}},'keyup':function(){this.syncGetters();}},accessors:{value:{get:function(){return this.getAttribute('value');},set:function(strNewValue){this.setAttribute('value',strNewValue);}}},methods:{focus:function(){if(this.control){this.control.focus();}},handleContents:function(){var arrPassThroughAttrs=['placeholder','name','type','maxlength','autocorrect','autocapitalize','autocomplete','autofocus'],i,len;if(this.hasAttribute('tabindex')){this.savedTabIndex=this.getAttribute('tabindex');this.removeAttribute('tabindex');}
if(!this.hasAttribute('disabled')){this.innerHTML='<input class="control" gs-dynamic type="text" />';this.control=this.children[0];this.control.removeEventListener('change',changeFunction);this.control.addEventListener('change',changeFunction);this.control.removeEventListener('focus',focusFunction);this.control.addEventListener('focus',focusFunction);this.control.removeEventListener('blur',blurFunction);this.control.addEventListener('blur',blurFunction);for(i=0,len=arrPassThroughAttrs.length;i<len;i+=1){if(this.hasAttribute(arrPassThroughAttrs[i])){this.control.setAttribute(arrPassThroughAttrs[i],this.getAttribute(arrPassThroughAttrs[i])||'');}}
if(this.savedTabIndex!==undefined&&this.savedTabIndex!==null){this.control.setAttribute('tabindex',this.savedTabIndex);}}else{this.control=undefined;this.innerHTML='';}},syncView:function(){if(this.hasAttribute('disabled')){this.textContent=this.getAttribute('value')||this.getAttribute('placeholder');}else{this.control.value=this.getAttribute('value')||'';}
this.initalized=true;},syncGetters:function(){this.setAttribute('value',this.control.value);}}});});window.addEventListener('design-register-element',function(){registerDesignSnippet('<gs-time>','<gs-time>','gs-time column="${1:name}"></gs-time>');registerDesignSnippet('<gs-time> With Label','<gs-time>','label for="${1:time-insert-start_time}">${2:Start Time}:</label>\n'+'<gs-time id="${1:time-insert-start_time}" column="${3:start_time}"></gs-time>');designRegisterElement('gs-time','/v1/dev/developer_g/greyspots-'+GS.version()+'/tools/documentation/doc-elem-time.html');window.designElementProperty_GSTIME=function(selectedElement){addProp('Column',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('column')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'column',this.value);});addProp('Value',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('value')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'value',this.value);});addProp('Column In Querystring',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('qs')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'qs',this.value,false);});addProp('Placeholder',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('placeholder')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'placeholder',this.value);});addProp('Mini',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('mini'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'mini',(this.value==='true'),true);});addProp('Time Picker',true,'<gs-checkbox class="target" value="'+(!selectedElement.hasAttribute('no-picker'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'no-picker',(this.value==='true'),false);});addProp('Non-Empty',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('non-empty'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'non-empty',(this.value==='true'),true);});addProp('Now Button',true,'<gs-checkbox class="target" value="'+(!selectedElement.hasAttribute('no-now-button'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'no-now-button',(this.value==='true'),false);});addProp('Display Format',true,'<gs-select class="target" value="'+(selectedElement.getAttribute('format')||'')+'" mini>'+'<option value="">Regular (1:30 PM)</option>'+'<option value="military">Military (13:30)</option>'+'</gs-select>',function(){return setOrRemoveTextAttribute(selectedElement,'format',this.value);});addProp('Output Format',true,'<gs-select class="target" value="'+(selectedElement.getAttribute('output-format')||'')+'" mini>'+'<option value="">Regular (1:30 PM)</option>'+'<option value="military">Military (13:30)</option>'+'</gs-select>',function(){return setOrRemoveTextAttribute(selectedElement,'output-format',this.value);});addProp('Title',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('title')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'title',this.value);});addProp('Tabindex',true,'<gs-number class="target" value="'+(selectedElement.getAttribute('tabindex')||'')+'" mini></gs-number>',function(){return setOrRemoveTextAttribute(selectedElement,'tabindex',this.value);});strVisibilityAttribute='';if(selectedElement.hasAttribute('hidden')){strVisibilityAttribute='hidden';}
if(selectedElement.hasAttribute('hide-on-desktop')){strVisibilityAttribute='hide-on-desktop';}
if(selectedElement.hasAttribute('hide-on-tablet')){strVisibilityAttribute='hide-on-tablet';}
if(selectedElement.hasAttribute('hide-on-phone')){strVisibilityAttribute='hide-on-phone';}
if(selectedElement.hasAttribute('show-on-desktop')){strVisibilityAttribute='show-on-desktop';}
if(selectedElement.hasAttribute('show-on-tablet')){strVisibilityAttribute='show-on-tablet';}
if(selectedElement.hasAttribute('show-on-phone')){strVisibilityAttribute='show-on-phone';}
addProp('Visibility',true,'<gs-select class="target" value="'+strVisibilityAttribute+'" mini>'+'<option value="">Visible</option>'+'<option value="hidden">Invisible</option>'+'<option value="hide-on-desktop">Invisible at desktop size</option>'+'<option value="hide-on-tablet">Invisible at tablet size</option>'+'<option value="hide-on-phone">Invisible at phone size</option>'+'<option value="show-on-desktop">Visible at desktop size</option>'+'<option value="show-on-tablet">Visible at tablet size</option>'+'<option value="show-on-phone">Visible at phone size</option>'+'</gs-select>',function(){selectedElement.removeAttribute('hidden');selectedElement.removeAttribute('hide-on-desktop');selectedElement.removeAttribute('hide-on-tablet');selectedElement.removeAttribute('hide-on-phone');selectedElement.removeAttribute('show-on-desktop');selectedElement.removeAttribute('show-on-tablet');selectedElement.removeAttribute('show-on-phone');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});addProp('Disabled',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('disabled')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'disabled',this.value==='true',true);});addFlexProps(selectedElement);addProp('suspend-inserted',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-inserted')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-inserted',this.value==='true',true);});};});document.addEventListener('DOMContentLoaded',function(){'use strict';var currentErrorControl;window.addEventListener('focus',function(event){if(currentErrorControl&&event.target!==currentErrorControl.control){currentErrorControl.control.focus();if(currentErrorControl.control){GS.setInputSelection(currentErrorControl.control,0,currentErrorControl.control.value.length);}}
if(currentErrorControl&&currentErrorControl.control&&currentErrorControl.control.value){currentErrorControl='';}});function changeFunction(event){event.preventDefault();event.stopPropagation();event.target.parentNode.setAttribute('value',event.target.value);handleChange(event.target.parentNode);}
function focusFunction(event){GS.triggerEvent(event.target.parentNode,'focus');}
function refreshControl(element){var i,len,arrPassThroughAttributes,strHTML;element.innerHTML='';element.control='';element.button='';if(!element.hasAttribute('disabled')){strHTML='<input class="control" gs-dynamic type="text" />';if(!element.hasAttribute('no-picker')){strHTML+='<gs-button class="time-picker-button" gs-dynamic inline icononly icon="clock-o" no-focus></gs-button>';}
element.innerHTML=strHTML;element.control=element.children[0];element.button=element.children[1];arrPassThroughAttributes=['placeholder','name','maxlength','autocorrect','autocapitalize','autocomplete','autofocus'];for(i=0,len=arrPassThroughAttributes.length;i<len;i+=1){if(element.hasAttribute(arrPassThroughAttributes[i])){element.control.setAttribute(arrPassThroughAttributes[i],element.getAttribute(arrPassThroughAttributes[i])||'');}}
if(element.hasAttribute('tabindex')){element.oldTabIndex=element.getAttribute('tabindex');element.removeAttribute('tabindex');}
if(element.oldTabIndex){element.control.tabIndex=element.oldTabIndex;}
element.control.removeEventListener('change',changeFunction);element.control.addEventListener('change',changeFunction);element.control.removeEventListener('focus',focusFunction);element.control.addEventListener('focus',focusFunction);}
setValueDisplay(element,element.getAttribute('value'));}
function handleChange(element){element.close();if(handleNonEmpty(element)&&element.lastChangeValue!==element.getAttribute('value')){GS.triggerEvent(element,'change');element.lastChangeValue=element.getAttribute('value');}}
function handleNonEmpty(element){var bolAllClear=true;if(element.hasAttribute('non-empty')&&!element.getAttribute('value')){bolAllClear=false;currentErrorControl=element;alert('Error: Invalid Time. Please input a time.');element.open();}
return bolAllClear;}
function translateValue(strFormat,newValue){var translatedValue,valueDate,strHour,strMinute,strPeriod,arrParts,intHours;newValue=newValue||'';if(typeof newValue==='string'){strPeriod=(newValue.match(/pm|am|a|p/gi)||[''])[0].toLowerCase();newValue=newValue.replace(/[^0-9:]/gi,'');if(strPeriod){strPeriod=(strPeriod[0]==='a'?'AM':'PM');}
if(newValue){if((/:/).test(newValue)){arrParts=newValue.split(':');strHour=arrParts[0];strMinute=GS.leftPad(arrParts[1],'0',2);}else{newValue=newValue.substring(0,4);if(newValue.length>=3){strMinute=newValue.substring(newValue.length-2);strHour=newValue.substring(0,newValue.length-2);}else{newValue=parseInt(newValue,10);if((strFormat==='military')&&newValue>24||(strFormat!=='military')&&newValue>12){strHour='12';strMinute=String(newValue);}else{strHour=String(newValue);strMinute='00';}}}}
if(strHour&&strMinute){valueDate=new Date('1/1/1111 '+strHour+':'+strMinute+(strPeriod?' '+strPeriod:''));}}else{valueDate=new Date(newValue);}
if(valueDate){if(strFormat==='military'){translatedValue=GS.leftPad(valueDate.getHours(),'0',2)+':'+
GS.leftPad(valueDate.getMinutes(),'0',2);}else{intHours=valueDate.getHours();if(intHours>=12){intHours=intHours-12;}
if(intHours===0){intHours=12;}
translatedValue=intHours+':'+
GS.leftPad(valueDate.getMinutes(),'0',2)+' '+
(valueDate.getHours()>=12?'PM':'AM');}}else{translatedValue='';}
return translatedValue;}
function setValueDisplay(element,newValue){var translatedOutputValue=translateValue((element.getAttribute('output-format')==='military'?'military':'regular'),newValue),translatedDisplayValue=translateValue((element.getAttribute('format')==='military'?'military':'regular'),newValue);element.setAttribute('value',translatedOutputValue);if(!element.hasAttribute('disabled')){element.control.value=translatedDisplayValue;}else{element.textContent=translatedDisplayValue||element.getAttribute('placeholder')||'';}
if(element.innerState==='open'){refreshPickerValue(element);}}
function refreshPickerValue(element){var arrElements,strTranslatedValue,dteTranslatedValue,i,len,intHours;if(element.innerState==='open'){strTranslatedValue=translateValue((element.getAttribute('format')==='military'?'military':'regular'),element.getAttribute('value'));dteTranslatedValue=new Date('1/1/1111 '+strTranslatedValue);element.pickerModalControlElement.setAttribute('value',strTranslatedValue);arrElements=xtag.query(element.pickerContainerElement,'.selected');for(i=0,len=arrElements.length;i<len;i+=1){arrElements[i].classList.remove('selected');}
intHours=dteTranslatedValue.getHours();if(intHours>=12){intHours=intHours-12;}
if(intHours===0){intHours=12;}
xtag.query(element.pickerContainerElement,'.clock-hour[data-value="'+intHours+'"]')[0].classList.add('selected');xtag.query(element.pickerContainerElement,'.clock-minute[data-value="'+(Math.floor(dteTranslatedValue.getMinutes()/5)*5)+'"]')[0].classList.add('selected');xtag.query(element.pickerContainerElement,'.clock-period-switch.'+(dteTranslatedValue.getHours()>=12?'pm':'am'))[0].classList.add('selected');}}
function handleQS(element){var strQSValue;if(!element.qsEventFunction){element.qsEventFunction=function(){pushReplacePopHandler(element);};}
window.removeEventListener('pushstate',element.qsEventFunction);window.removeEventListener('replacestate',element.qsEventFunction);window.removeEventListener('popstate',element.qsEventFunction);if(element.getAttribute('qs')){strQSValue=GS.qryGetVal(GS.getQueryString(),element.getAttribute('qs'));if(strQSValue!==''||!element.getAttribute('value')){element.setAttribute('value',strQSValue);}
window.addEventListener('pushstate',element.qsEventFunction);window.addEventListener('replacestate',element.qsEventFunction);window.addEventListener('popstate',element.qsEventFunction);}}
function pushReplacePopHandler(element){element.setAttribute('value',GS.qryGetVal(GS.getQueryString(),element.getAttribute('qs')));}
function elementCreated(element){if(!element.hasAttribute('suspend-created')){if(element.value&&new Date(element.value).getTime()){element.setAttribute('value',element.value);delete element.value;}}}
function elementInserted(element){var today,strQSValue;if(!element.hasAttribute('suspend-created')&&!element.hasAttribute('suspend-inserted')){if(!element.inserted){element.inserted=true;element.innerState='closed';refreshControl(element);if(element.getAttribute('qs')){handleQS(element);}
if(element.hasAttribute('non-empty')&&!element.getAttribute('value')){console.warn('gs-time Warning: No value provided on "non-empty" gs-time control. Defaulting to "12:00 PM". Please provide a default value.');element.setAttribute('value','12:00 PM');}}}}
xtag.register('gs-time',{lifecycle:{created:function(){elementCreated(this);},inserted:function(){elementInserted(this);},attributeChanged:function(strAttrName,oldValue,newValue){if(strAttrName==='suspend-created'&&newValue===null){elementCreated(this);elementInserted(this);}else if(strAttrName==='suspend-inserted'&&newValue===null){elementInserted(this);}else if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){if(strAttrName==='placeholder'||strAttrName==='disabled'||strAttrName==='format'||strAttrName==='no-picker'||strAttrName==='tabindex'){refreshControl(this);}else if(strAttrName==='qs'){handleQS(this);}else if(strAttrName==='value'){setValueDisplay(this,newValue);}}}},events:{'click':function(event){if(event.target===this.button){this.toggle();}},'keydown:':function(event){var intKeyCode=(event.keyCode||event.which),newControlValue;if(this.getAttribute('value')&&(intKeyCode===38||intKeyCode===39||intKeyCode===40||intKeyCode===37)){newControlValue=new Date('1/1/1111 '+this.getAttribute('value'));event.preventDefault();event.stopPropagation();if(intKeyCode===38||intKeyCode===39){newControlValue=newControlValue.setMinutes(newControlValue.getMinutes()+1);}else if(intKeyCode===40||intKeyCode===37){newControlValue=newControlValue.setMinutes(newControlValue.getMinutes()-1);}}
if(intKeyCode===67&&!event.ctrlKey&&!event.metaKey&&!this.hasAttribute('non-empty')){newControlValue='';event.preventDefault();event.stopPropagation();}else if(intKeyCode===78&&!event.ctrlKey&&!event.metaKey&&!this.hasAttribute('no-now-button')){newControlValue=new Date();event.preventDefault();event.stopPropagation();}
if(newControlValue!==undefined){setValueDisplay(this,newControlValue);GS.setInputSelection(this.control,0,this.control.value.length);}
if(intKeyCode===13){handleNonEmpty(this);}},'focusout':function(event){if(this.innerState==='open'){this.close();}else{handleChange(this);}}},accessors:{value:{get:function(){return this.getAttribute('value');},set:function(newValue){this.setAttribute('value',newValue);}},dateValue:{get:function(){return new Date('1/1/1111 '+this.getAttribute('value'));},set:function(newValue){setValueDisplay(this,newValue);}},state:{get:function(){return this.innerState;},set:function(newValue){if(newValue==='open'){this.open();}else{this.close();}}}},methods:{focus:function(){this.control.focus();},open:function(){var element=this,pickerContainerElement,overlayElement,pickerElement,handleLook,strHTML;if(element.innerState==='closed'){element.innerState='open';element.lastClosedValue=element.getAttribute('value');if(!evt.touchDevice){element.control.focus();GS.setInputSelection(element.control,0,element.control.value.length);}else{}
pickerContainerElement=document.createElement('div');pickerContainerElement.classList.add('gs-time-time-picker-container');overlayElement=document.createElement('div');overlayElement.classList.add('gs-time-time-picker-overlay');pickerElement=document.createElement('div');pickerElement.classList.add('gs-time-time-picker');element.pickerContainerElement=pickerContainerElement;pickerContainerElement.appendChild(overlayElement);pickerContainerElement.appendChild(pickerElement);document.body.appendChild(pickerContainerElement);strHTML=ml(function(){/*
                        <div class="time-modal-control-container" flex-horizontal>
                            <gs-text class="time-modal-control" flex></gs-text>
                            <gs-button class="modal-done">Done</gs-button>
                        </div>
                        <div class="time-inner-container">
                            <div class="time-top-toolbar">
                                <div flex-horizontal align-bottom>
                                    <gs-button class="decrement-time" icononly icon="arrow-left"></gs-button>
                                    <div flex></div>
                                    <gs-button class="increment-time" icononly icon="arrow-right"></gs-button>
                                </div>
                            </div>
                            <div class="gs-time-clock-container" prevent-text-selection>
                                <div class="gs-time-bezel">
                                    <div class="clock-face-layer layer-1">
                                        <div class="clock-line" style="top: 0%;"><div class="clock-button clock-hour" data-value="12"><span class="content">12</span></div></div><div class="clock-line" style="top: 5.9%;"><div class="clock-split" style="width: 45.25%;
left: 4.5%;"><div class="clock-button clock-hour" data-value="11"><span class="content">11</span></div></div><div class="clock-split" style="width: 45.25%;
left: 46.75%;"><div class="clock-button clock-hour" data-value="1">&nbsp;<span class="content">1</span></div></div></div><div class="clock-line" style="top: 22.5%;"><div class="clock-split" style="width: 22%;
left: 0%;"><div class="clock-button clock-hour" data-value="10"><span class="content">10</span></div></div><div class="clock-split" style="width: 22%;
left: 78%;"><div class="clock-button clock-hour" data-value="2">&nbsp;<span class="content">2</span></div></div></div><div class="clock-line" style="top: 45.3%;"><div class="clock-split" style="width: 14%;
left: 0%;"><div class="clock-button clock-hour" data-value="9"><span class="content">9</span>&nbsp;</div></div><div class="clock-split" style="width: 14%;
left: 86%;"><div class="clock-button clock-hour" data-value="3">&nbsp;<span class="content">3</span></div></div></div><div class="clock-line" style="top: 67.8%;"><div class="clock-split" style="width: 22%;
left: 0%;"><div class="clock-button clock-hour" data-value="8"><span class="content">8</span>&nbsp;</div></div><div class="clock-split" style="width: 22%;
left: 78%"><div class="clock-button clock-hour" data-value="4">&nbsp;<span class="content">4</span></div></div></div><div class="clock-line" style="top: 83.5%;"><div class="clock-split" style="width: 45.25%;
left: 4.5%;"><div class="clock-button clock-hour" data-value="7"><span class="content">7</span>&nbsp;</div></div><div class="clock-split" style="width: 45.25%;
left: 46.75%;"><div class="clock-button clock-hour" data-value="5">&nbsp;<span class="content">5</span></div></div></div><div class="clock-line" style="top: 90%;"><div class="clock-button clock-hour" data-value="6"><span class="content">6</span></div></div>
                                    </div>
                                    <div class="clock-face-layer layer-2">
                                        <div class="clock-line" style="top: 0%;"><div class="clock-button clock-minute" data-value="0"><span class="content">00</span></div></div>
                                        <div class="clock-line" style="top: 5.9%;"><div class="clock-split" style="width: 45.25%;
left: 4.5%;"><div class="clock-button clock-minute" data-value="55"><span class="content">55</span></div></div><div class="clock-split" style="width: 45.25%;
left: 49.75%;"><div class="clock-button clock-minute" data-value="5"><span class="content">05</span></div></div></div>
                                        <div class="clock-line" style="top: 22.5%;"><div class="clock-split" style="width: 22%;
left: 0%;"><div class="clock-button clock-minute" data-value="50"><span class="content">50</span></div></div><div class="clock-split" style="width: 22%;
left: 78%;"><div class="clock-button clock-minute" data-value="10"><span class="content">10</span></div></div></div>
                                        <div class="clock-line" style="top: 45.3%;"><div class="clock-split" style="width: 16%;
left: 0%;"><div class="clock-button clock-minute" data-value="45"><span class="content">45</span></div></div><div class="clock-split" style="width: 16%;
left: 84%;"><div class="clock-button clock-minute" data-value="15"><span class="content">15</span></div></div></div>
                                        <div class="clock-line" style="top: 67.8%;"><div class="clock-split" style="width: 22%;
left: 0%;"><div class="clock-button clock-minute" data-value="40"><span class="content">40</span></div></div><div class="clock-split" style="width: 22%;
left: 78%;"><div class="clock-button clock-minute" data-value="20"><span class="content">20</span></div></div></div>
                                        <div class="clock-line" style="top: 83.5%;"><div class="clock-split" style="width: 45.25%;
left: 4.5%;"><div class="clock-button clock-minute" data-value="35"><span class="content">35</span></div></div><div class="clock-split" style="width: 45.25%;
left: 49.75%;"><div class="clock-button clock-minute" data-value="25"><span class="content">25</span></div></div></div>
                                        <div class="clock-line" style="top: 90%;"><div class="clock-button clock-minute" data-value="30"><span class="content">30</span></div></div>
                                        <div class="clock-center"><div class="clock-period-switch am"><span class="content">AM</span></div><div class="clock-period-switch pm"><span class="content">PM</span></div></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    */});strHTML+='<div class="time-bottom-toolbar">'+'<div flex-horizontal align-top>';if(!element.hasAttribute('no-now-button')){strHTML+='<gs-button class="now-time">Now</gs-button>';}
strHTML+='<div flex></div>';if(!element.hasAttribute('non-empty')){strHTML+='<gs-button class="clear-time">Clear</gs-button>';}
strHTML+='</div>'+'</div>';pickerElement.innerHTML=strHTML;element.pickerModalControlElement=xtag.query(pickerContainerElement,'.time-modal-control')[0];refreshPickerValue(element);element.pickerModalControlElement.addEventListener('change',function(event){setValueDisplay(element,this.value);});element.pickerModalControlElement.addEventListener('keydown',function(event){if((event.keyCode||event.which)===13){element.close();}});pickerElement.addEventListener('mousedown',function(event){if(!evt.touchDevice){event.preventDefault();event.stopPropagation();}});pickerElement.addEventListener('click',function(event){var target=event.target,arrElements,i,len,newValue;if(target.classList.contains('content')){target=target.parentNode;}
if(target.classList.contains('clock-button')||target.classList.contains('clock-period-switch')){if(target.classList.contains('clock-hour')){arrElements=xtag.query(pickerElement,'.clock-hour');}
if(target.classList.contains('clock-minute')){arrElements=xtag.query(pickerElement,'.clock-minute');}
if(target.classList.contains('clock-period-switch')){arrElements=xtag.query(pickerElement,'.clock-period-switch');}
for(i=0,len=arrElements.length;i<len;i+=1){arrElements[i].classList.remove('selected');}
target.classList.add('selected');arrElements=xtag.query(pickerElement,'.selected');if(arrElements.length===3){newValue=arrElements[0].textContent+':'+
arrElements[1].textContent+' '+
arrElements[2].textContent;}}
if(target.classList.contains('increment-time')&&element.getAttribute('value')){newValue=new Date('1/1/1111 '+element.getAttribute('value'));newValue=newValue.setMinutes(newValue.getMinutes()+1);}else if(target.classList.contains('decrement-time')&&element.getAttribute('value')){newValue=new Date('1/1/1111 '+element.getAttribute('value'));newValue=newValue.setMinutes(newValue.getMinutes()-1);}else if(target.classList.contains('now-time')){newValue=new Date();}else if(target.classList.contains('clear-time')){newValue='';}else if(target.classList.contains('modal-done')){element.close();}
if(newValue!==undefined){setValueDisplay(element,newValue);if(!evt.touchDevice){GS.setInputSelection(element.control,0,element.control.value.length);}}});handleLook=function(){var positionData,intPopupHeight,intPopupWidth;if(pickerContainerElement.parentNode!==document.body){window.removeEventListener('resize',handleLook);window.removeEventListener('orientationchange',handleLook);return;}
pickerElement.style.top='';pickerElement.style.left='';pickerElement.style.marginTop='';pickerContainerElement.classList.remove('modal');positionData=GS.getElementPositionData(element);intPopupHeight=pickerElement.offsetHeight;intPopupWidth=pickerElement.offsetWidth;if((positionData.intRoomAbove<intPopupHeight&&positionData.intRoomBelow<intPopupHeight)||window.innerWidth<400||window.innerHeight<550){pickerElement.style.marginTop='1em';pickerContainerElement.classList.add('modal');}else{if(positionData.intRoomBelow>intPopupHeight){pickerElement.style.top=(positionData.objElementOffset.top+positionData.intElementHeight)+'px';}else{pickerElement.style.top=(positionData.objElementOffset.top-intPopupHeight)+'px';}
pickerElement.style.left=((positionData.objElementOffset.left+positionData.intElementWidth)-intPopupWidth)+'px';}};handleLook();window.addEventListener('resize',handleLook);window.addEventListener('orientationchange',handleLook);}},close:function(){var element=this;if(element.innerState==='open'){element.innerState='closed';console.trace('closed',element.pickerContainerElement);if(element.pickerContainerElement){document.body.removeChild(element.pickerContainerElement);element.pickerContainerElement='';}
if(element.getAttribute('value')!==element.lastClosedValue){handleChange(element);}else if(!element.getAttribute('value')){handleNonEmpty(element);}}},toggle:function(){if(this.innerState==='open'){this.close();}else{this.open();}}}});});window.addEventListener('design-register-element',function(){registerDesignSnippet('<gs-toggle>','<gs-toggle>','gs-toggle column="${1}">${2}</gs-toggle>');designRegisterElement('gs-toggle','/v1/dev/developer_g/greyspots-'+GS.version()+'/tools/documentation/doc-elem-buttons-toggle.html');window.designElementProperty_GSTOGGLE=function(selectedElement){addProp('Icon',true,'<div flex-horizontal>'+'     <gs-text id="prop-icon-input" class="target" value="'+(selectedElement.getAttribute('icon')||'')+'" mini flex></gs-text>'+'     <gs-button id="prop-icon-picker-button" mini icononly icon="list"></gs-button>'+'     <style>#prop-icon-picker-button:after {font-size: 1em;}</style>'+'</div>',function(){return setOrRemoveTextAttribute(selectedElement,'icon',this.value,false);});document.getElementById('prop-icon-picker-button').addEventListener('click',function(){var i,len,html,arrIcons=GS.iconList(),strName,templateElement;for(i=0,len=arrIcons.length,html='';i<len;i+=1){strName=arrIcons[i].name;html+='<gs-block>'+'<gs-button iconleft icon="'+strName+'" dialogclose>'+strName+'</gs-button>'+'</gs-block>';}
templateElement=document.createElement('template');templateElement.setAttribute('data-max-width','1100px');templateElement.innerHTML=ml(function(){/*
                <gs-page>
                    <gs-header><center><h3>Choose An Icon</h3></center></gs-header>
                    <gs-body padded>
                        <gs-grid widths="1,1,1,1" reflow-at="767px">{{HTML}}</gs-grid>
                    </gs-body>
                    <gs-footer><gs-button dialogclose>Cancel</gs-button></gs-footer>
                </gs-page>
            */}).replace('{{HTML}}',html);GS.openDialog(templateElement,'',function(event,strAnswer){var propInput=document.getElementById('prop-icon-input');if(strAnswer!=='Cancel'){propInput.value=strAnswer;GS.triggerEvent(propInput,'change');}});});if(selectedElement.getAttribute('icon')||selectedElement.hasAttribute('iconleft')||selectedElement.hasAttribute('iconright')||selectedElement.hasAttribute('icontop')||selectedElement.hasAttribute('iconbottom')||selectedElement.hasAttribute('icononly')||selectedElement.hasAttribute('iconrotateright')||selectedElement.hasAttribute('iconrotatedown')||selectedElement.hasAttribute('iconrotateleft')){if(selectedElement.hasAttribute('iconleft')){strIconPos='iconleft';}else if(selectedElement.hasAttribute('iconright')){strIconPos='iconright';}else if(selectedElement.hasAttribute('icontop')){strIconPos='icontop';}else if(selectedElement.hasAttribute('iconbottom')){strIconPos='iconbottom';}else if(selectedElement.hasAttribute('icononly')){strIconPos='icononly';}else{strIconPos='';}
addProp('Icon Position',true,'<gs-select class="target" value="'+strIconPos+'" mini>'+'   <option value="">Default</option>'+'   <option value="iconleft">Left</option>'+'   <option value="iconright">Right</option>'+'   <option value="icontop">Top</option>'+'   <option value="iconbottom">Bottom</option>'+'   <option value="icononly">Icononly</option>'+'</gs-select>',function(){selectedElement.removeAttribute('iconleft');selectedElement.removeAttribute('iconright');selectedElement.removeAttribute('icontop');selectedElement.removeAttribute('iconbottom');selectedElement.removeAttribute('icononly');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});if(selectedElement.hasAttribute('iconrotateright')){strIconRotation='iconrotateright';}else if(selectedElement.hasAttribute('iconrotatedown')){strIconRotation='iconrotatedown';}else if(selectedElement.hasAttribute('iconrotateleft')){strIconRotation='iconrotateleft';}else{strIconRotation='';}
addProp('Icon&nbsp;Rotation',true,'<gs-select class="target" value="'+strIconRotation+'" mini>'+'   <option value="">None</option>'+'   <option value="iconrotateright">90 degrees</option>'+'   <option value="iconrotatedown">180 degrees</option>'+'   <option value="iconrotateleft">270 degrees</option>'+'</gs-select>',function(){selectedElement.removeAttribute('iconrotateright');selectedElement.removeAttribute('iconrotatedown');selectedElement.removeAttribute('iconrotateleft');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});}
addProp('Title',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('title')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'title',this.value);});addProp('Tabindex',true,'<gs-number class="target" value="'+(selectedElement.getAttribute('tabindex')||'')+'" mini></gs-number>',function(){return setOrRemoveTextAttribute(selectedElement,'tabindex',this.value);});strVisibilityAttribute='';if(selectedElement.hasAttribute('hidden')){strVisibilityAttribute='hidden';}
if(selectedElement.hasAttribute('hide-on-desktop')){strVisibilityAttribute='hide-on-desktop';}
if(selectedElement.hasAttribute('hide-on-tablet')){strVisibilityAttribute='hide-on-tablet';}
if(selectedElement.hasAttribute('hide-on-phone')){strVisibilityAttribute='hide-on-phone';}
if(selectedElement.hasAttribute('show-on-desktop')){strVisibilityAttribute='show-on-desktop';}
if(selectedElement.hasAttribute('show-on-tablet')){strVisibilityAttribute='show-on-tablet';}
if(selectedElement.hasAttribute('show-on-phone')){strVisibilityAttribute='show-on-phone';}
addProp('Visibility',true,'<gs-select class="target" value="'+strVisibilityAttribute+'" mini>'+'<option value="">Visible</option>'+'<option value="hidden">Invisible</option>'+'<option value="hide-on-desktop">Invisible at desktop size</option>'+'<option value="hide-on-tablet">Invisible at tablet size</option>'+'<option value="hide-on-phone">Invisible at phone size</option>'+'<option value="show-on-desktop">Visible at desktop size</option>'+'<option value="show-on-tablet">Visible at tablet size</option>'+'<option value="show-on-phone">Visible at phone size</option>'+'</gs-select>',function(){selectedElement.removeAttribute('hidden');selectedElement.removeAttribute('hide-on-desktop');selectedElement.removeAttribute('hide-on-tablet');selectedElement.removeAttribute('hide-on-phone');selectedElement.removeAttribute('show-on-desktop');selectedElement.removeAttribute('show-on-tablet');selectedElement.removeAttribute('show-on-phone');if(this.value){selectedElement.setAttribute(this.value,'');}
return selectedElement;});addProp('Disabled',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('disabled')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'disabled',this.value==='true',true);});addProp('Emphasis',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('emphasis'))+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'emphasis',(this.value==='true'),true);});addProp('Column',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('column')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'column',this.value);});addProp('Value',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('value')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'value',this.value);});addProp('Column In Querystring',true,'<gs-text class="target" value="'+(selectedElement.getAttribute('qs')||'')+'" mini></gs-text>',function(){return setOrRemoveTextAttribute(selectedElement,'qs',this.value,false);});addProp('suspend-created',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-created')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-created',this.value==='true',true);});addProp('suspend-inserted',true,'<gs-checkbox class="target" value="'+(selectedElement.hasAttribute('suspend-inserted')||'')+'" mini></gs-checkbox>',function(){return setOrRemoveBooleanAttribute(selectedElement,'suspend-inserted',this.value==='true',true);});addProp('Corners',true,'<div class="target">'+'<gs-checkbox value="'+(!(selectedElement.hasAttribute('remove-all')||selectedElement.hasAttribute('remove-top')||selectedElement.hasAttribute('remove-left')||selectedElement.hasAttribute('remove-top-left'))).toString()+'" remove-right remove-bottom id="round-top-left-corner________" inline></gs-checkbox>'+'<gs-checkbox value="'+(!(selectedElement.hasAttribute('remove-all')||selectedElement.hasAttribute('remove-top')||selectedElement.hasAttribute('remove-right')||selectedElement.hasAttribute('remove-top-right'))).toString()+'" remove-left remove-bottom id="round-top-right-corner________" inline></gs-checkbox><br />'+'<gs-checkbox value="'+(!(selectedElement.hasAttribute('remove-all')||selectedElement.hasAttribute('remove-bottom')||selectedElement.hasAttribute('remove-left')||selectedElement.hasAttribute('remove-bottom-left'))).toString()+'" remove-right remove-top id="round-bottom-left-corner________" inline></gs-checkbox>'+'<gs-checkbox value="'+(!(selectedElement.hasAttribute('remove-all')||selectedElement.hasAttribute('remove-bottom')||selectedElement.hasAttribute('remove-right')||selectedElement.hasAttribute('remove-bottom-right'))).toString()+'" remove-left remove-top id="round-bottom-right-corner________" inline></gs-checkbox>'+'</div>',function(){var topLeft=document.getElementById('round-top-left-corner________').value==='true',topRight=document.getElementById('round-top-right-corner________').value==='true',bottomLeft=document.getElementById('round-bottom-left-corner________').value==='true',bottomRight=document.getElementById('round-bottom-right-corner________').value==='true',arrStrAttr=[],i,len;selectedElement.removeAttribute('remove-all');selectedElement.removeAttribute('remove-top');selectedElement.removeAttribute('remove-bottom');selectedElement.removeAttribute('remove-left');selectedElement.removeAttribute('remove-right');selectedElement.removeAttribute('remove-top-left');selectedElement.removeAttribute('remove-top-right');selectedElement.removeAttribute('remove-bottom-left');selectedElement.removeAttribute('remove-bottom-right');if(!topLeft&&!topRight&&!bottomLeft&&!bottomRight){arrStrAttr.push('remove-all');}else if(!topLeft&&!topRight){arrStrAttr.push('remove-top');}else if(!bottomLeft&&!bottomRight){arrStrAttr.push('remove-bottom');}else if(!topLeft&&!bottomLeft){arrStrAttr.push('remove-left');}else if(!topRight&&!bottomRight){arrStrAttr.push('remove-right');}
if(!topLeft&&!bottomLeft&&arrStrAttr[0]!=='remove-all'){arrStrAttr.push('remove-left');}else if(!topLeft&&topRight){arrStrAttr.push('remove-top-left');}else if(!bottomLeft&&bottomRight){arrStrAttr.push('remove-bottom-left');}
if(!topRight&&!bottomRight&&arrStrAttr[0]!=='remove-all'){arrStrAttr.push('remove-right');}else if(topLeft&&!topRight){arrStrAttr.push('remove-top-right');}else if(bottomLeft&&!bottomRight){arrStrAttr.push('remove-bottom-right');}
for(i=0,len=arrStrAttr.length;i<len;i+=1){selectedElement.setAttribute(arrStrAttr[i],'');}
return selectedElement;});addFlexProps(selectedElement);};});document.addEventListener('DOMContentLoaded',function(){'use strict';function pushReplacePopHandler(element){element.value=GS.qryGetVal(GS.getQueryString(),element.getAttribute('qs'));}
function elementCreated(element){if(!element.hasAttribute('suspend-created')){}}
function elementInserted(element){if(!element.hasAttribute('suspend-created')&&!element.hasAttribute('suspend-inserted')){if(!element.inserted){element.inserted=true;var strQSValue;if(!element.hasAttribute('tabindex')){element.tabIndex=0;}
if(typeof element.getAttribute('value')==='string'){if(element.getAttribute('value')==='true'||element.getAttribute('value')==='-1'){element.setAttribute('selected','');}}
if(element.getAttribute('qs')){strQSValue=GS.qryGetVal(GS.getQueryString(),element.getAttribute('qs'));if(strQSValue!==''||!element.getAttribute('value')){element.value=strQSValue;}
window.addEventListener('pushstate',function(){pushReplacePopHandler(element);});window.addEventListener('replacestate',function(){pushReplacePopHandler(element);});window.addEventListener('popstate',function(){pushReplacePopHandler(element);});}}}}
xtag.register('gs-toggle',{lifecycle:{created:function(){if(this.value){this.setAttribute('value',this.value);delete this.value;}
elementCreated(this);},inserted:function(){elementInserted(this);},attributeChanged:function(strAttrName,oldValue,newValue){if(strAttrName==='suspend-created'&&newValue===null){elementCreated(this);elementInserted(this);}else if(strAttrName==='suspend-inserted'&&newValue===null){elementInserted(this);}else if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){}}},events:{'click':function(event){if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){if(this.hasAttribute('selected')){this.removeAttribute('selected');if(this.getAttribute('value')==='true'){this.setAttribute('value','false');}else if(this.getAttribute('value')==='-1'){this.setAttribute('value','0');}}else{this.setAttribute('selected','');if(this.getAttribute('value')==='false'){this.setAttribute('value','true');}else if(this.getAttribute('value')==='0'){this.setAttribute('value','-1');}}
xtag.fireEvent(this,'change',{bubbles:true,cancelable:true});}},'keypress':function(event){if(!this.hasAttribute('suspend-created')&&!this.hasAttribute('suspend-inserted')){if(!this.hasAttribute('disabled')&&(event.keyCode===13||event.keyCode===32)){event.preventDefault();event.stopPropagation();xtag.fireEvent(this,'click',{bubbles:true,cancelable:true});}}}},accessors:{'value':{'get':function(){return this.hasAttribute('selected');},'set':function(newValue){if(newValue===true||newValue==='true'){this.setAttribute('selected','');}else{this.removeAttribute('selected');}}},'textValue':{'get':function(){return this.hasAttribute('selected')?'YES':'NO';},'set':function(newValue){if(newValue===true||newValue==='true'||newValue==='YES'){this.setAttribute('selected','');}else{this.removeAttribute('selected');}}}},methods:{}});});